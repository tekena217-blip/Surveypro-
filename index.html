<!DOCTYPE html>
<html lang="en">
<head>
<!-- SurveyPro Elite | Nigeria's #1 Professional Surveying Platform -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
<meta name="description" content="SurveyPro Elite â€” Nigeria's #1 Professional Land Surveying Platform. GPS, Coordinate Conversion, GIS Tools, Equipment Rental, Training & C of O Verification. SURCON-Aligned. WGS84 Â· UTM 31â€“33N Â· NNO.">
<meta name="keywords" content="land survey Nigeria, GPS surveying, coordinate conversion, GIS tools, survey equipment rental, C of O verification, SURCON, boundary survey, cadastral survey, topographic survey, Arnold Opusunju, SurveyPro Elite">
<meta name="author" content="Arnold Opusunju â€” SurveyPro Elite">
<meta name="robots" content="index, follow">
<meta name="theme-color" content="#0f172a">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="SurveyPro Elite">
<!-- Open Graph -->
<meta property="og:title" content="SurveyPro Elite | Nigeria's #1 Professional Surveying Platform">
<meta property="og:description" content="Professional GPS survey, coordinate conversion, GIS tools, equipment rental, training & C of O verification. Commercial-grade. SURCON-aligned.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://techenite.github.io/surveyorpro">
<meta property="og:image" content="https://techenite.github.io/surveyorpro">
<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="SurveyPro Elite | Nigeria's #1 Surveying Platform">
<meta name="twitter:description" content="GPS, Coordinates, GIS, Equipment Rental & Training for Nigerian surveyors.">
<title>SurveyPro Elite | Nigeria's #1 Professional Surveying Platform</title>
<link rel="canonical" href="https://techenite.github.io/surveyorpro">
<!-- Fonts â€” async load so blank screen never happens -->
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;600;700&family=Syne:wght@700;800&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;600;700&family=Syne:wght@700;800&display=swap"></noscript>

<!-- QR Code Library â€” async, with fallback -->
<script>
// Inline critical font fallback so page NEVER shows blank
document.documentElement.style.setProperty('--ff-body', "'Space Grotesk', 'Segoe UI', system-ui, -apple-system, sans-serif");
document.documentElement.style.setProperty('--ff-mono', "'JetBrains Mono', 'Courier New', monospace");
document.documentElement.style.setProperty('--ff-display', "'Syne', 'Arial Black', sans-serif");
</script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script async src="https://js.paystack.co/v1/inline.js"></script>
<!-- Google AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6322456395209451" crossorigin="anonymous"></script>
<style>
/* â•â• CRITICAL RENDER GUARD â€” page NEVER blank â•â• */
html,body{opacity:1!important;visibility:visible!important;display:block!important;}
body{font-family:'Space Grotesk','Segoe UI',system-ui,-apple-system,sans-serif;}
.display,h1,h2,h3{font-family:'Syne','Arial Black','Impact',sans-serif;}
.mono,code{font-family:'JetBrains Mono','Courier New',monospace;}

/* â”€â”€ 36-STATES LOCATION FEATURES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#jobLocationBanner, #dirLocationBanner, #equipLocationBanner { display:none; }
.location-banner-active { display:flex!important; animation:fadeUp .3s ease; }
@media(max-width:640px){
  .state-filter{grid-template-columns:1fr!important;}
  #tab-jobs .btn-group, #tab-directory .btn-group{flex-wrap:wrap;}
}
/* Availability badge */
.avail-yes{background:#dcfce7;color:#16a34a;}
.avail-no{background:#fee2e2;color:#dc2626;}
.directory-card{position:relative;}

</style>
<!-- Structured Data (SEO) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "name": "SurveyPro Elite",
  "description": "Nigeria's #1 Professional Land Surveying Platform",
  "url": "https://techenite.github.io/surveyorpro",
  "telephone": "+2348117554948",
  "email": "opusarnold@gmail.com",
  "address": {"@type": "PostalAddress", "addressCountry": "NG"},
  "priceRange": "â‚¦â‚¦â€“â‚¦â‚¦â‚¦",
  "serviceType": "Land Surveying Services"
}
</script>

<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ROOT & RESET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --primary: #1a2332;
  --accent: #1a6b3c;
  --accent2: #1e40af;
  --gold: #92400e;
  --surface: #ffffff;
  --surface2: #f8fafb;
  --surface3: #f0f4ff;
  --border: #d1d9e0;
  --text: #1a2332;
  --text2: #4a5568;
  --text3: #718096;
  --success: #1a6b3c;
  --warning: #b45309;
  --danger: #c53030;
  --info: #1d4ed8;
  --radius: 8px;
  --shadow: 0 2px 12px rgba(15,23,42,0.06);
  --shadow-lg: 0 8px 32px rgba(15,23,42,0.1);
}
*{box-sizing:border-box;margin:0;padding:0;}
html{scroll-behavior:smooth;}
body{font-family:var(--ff-body,'Space Grotesk','Segoe UI',system-ui,sans-serif);background:#f8fafc;color:var(--text);min-height:100vh;line-height:1.6;}
.mono{font-family:var(--ff-mono,'JetBrains Mono','Courier New',monospace);}
.display{font-family:var(--ff-display,'Syne','Arial Black',sans-serif);}
::-webkit-scrollbar{width:6px;height:6px;}
::-webkit-scrollbar-track{background:#f1f5f9;}
::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px;}

/* â•â•â• TOP BANNER â•â•â• */
.top-banner{background:#1a6b3c;color:#fff;font-size:0.82rem;font-weight:600;display:none;position:relative;z-index:200;}
.top-banner.show{display:block;}
.banner-inner{max-width:1280px;margin:0 auto;padding:10px 20px;display:flex;justify-content:space-between;align-items:center;gap:10px;}

/* â•â•â• TOAST â•â•â• */
.toast-wrap{position:fixed;bottom:20px;right:20px;z-index:9999;display:flex;flex-direction:column;gap:8px;}
.toast{background:#0f172a;color:#fff;padding:12px 18px;border-radius:10px;font-size:0.84rem;font-weight:600;opacity:0;transform:translateX(20px);transition:.35s;max-width:320px;box-shadow:0 8px 24px rgba(0,0,0,0.25);}
.toast.show{opacity:1;transform:translateX(0);}
.toast.t-success{background:#15803d;}
.toast.t-warning{background:#b45309;}
.toast.t-error{background:#dc2626;}
.toast.t-info{background:#0284c7;}

/* â•â•â• HEADER â•â•â• */
header{background:#1a2332;color:#fff;position:sticky;top:0;z-index:100;box-shadow:0 1px 8px rgba(0,0,0,0.2);}
.header-inner{max-width:1280px;margin:0 auto;padding:12px 20px;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;}
.logo-block h1{font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:1.4rem;font-weight:800;letter-spacing:-0.01em;}
.logo-block h1 span{color:#4ade80;}
.logo-sub{font-size:0.65rem;opacity:0.55;margin-top:1px;letter-spacing:0.04em;}
.header-right{display:flex;align-items:center;gap:8px;flex-wrap:wrap;}
.eco-badge{display:flex;align-items:center;gap:5px;background:rgba(74,222,128,0.1);border:1px solid rgba(74,222,128,0.2);color:#4ade80;padding:3px 8px;border-radius:4px;font-size:0.68rem;font-weight:600;}
.gps-pill{display:flex;align-items:center;gap:6px;background:rgba(255,255,255,0.08);padding:5px 12px;border-radius:4px;font-size:0.78rem;cursor:pointer;transition:.2s;}
.gps-pill:hover{background:rgba(255,255,255,0.15);}
.gps-dot{width:9px;height:9px;border-radius:50%;background:#ef4444;flex-shrink:0;}
.gps-dot.active{background:#4ade80;box-shadow:0 0 8px #4ade80;animation:blink 1.5s infinite;}
@keyframes blink{0%,100%{opacity:1;}50%{opacity:0.4;}}
.hdr-btn{background:rgba(255,255,255,0.12);border:none;color:#fff;padding:7px 13px;border-radius:10px;font-size:0.8rem;cursor:pointer;transition:.2s;font-family:inherit;}
.hdr-btn:hover{background:rgba(255,255,255,0.22);}
select.hdr-btn{appearance:none;cursor:pointer;}

/* â•â•â• NAVIGATION â•â•â• */
.nav-wrap{max-width:1280px;margin:0 auto;padding:8px 20px;}
.nav-bar{background:#fff;border-radius:6px;padding:4px;display:flex;gap:2px;overflow-x:auto;box-shadow:var(--shadow);border:1px solid var(--border);}
.nav-bar::-webkit-scrollbar{height:0;}
.nav-btn{display:flex;align-items:center;gap:5px;padding:7px 13px;border:none;border-radius:5px;font-size:0.78rem;font-weight:600;white-space:nowrap;cursor:pointer;transition:.15s;background:transparent;color:var(--text2);font-family:inherit;}
.nav-btn:hover{background:#f1f5f9;color:var(--text);}
.nav-btn.active{background:#1a2332;color:#fff;}
.nav-btn .nb-icon{font-size:1.1rem;}

/* â•â•â• MAIN â•â•â• */
main{max-width:1280px;margin:0 auto;padding:20px 20px 120px;}
.tab-content{display:none;}
.tab-content.active{display:block;}
@keyframes fadeUp{from{opacity:0;transform:translateY(6px);}to{opacity:1;transform:translateY(0);}}

/* â•â•â• CARDS â•â•â• */
.card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:24px;margin-bottom:20px;border:1px solid var(--border);}
.card-header{display:flex;align-items:center;gap:10px;margin-bottom:20px;}
.card-header h2{font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:1.1rem;font-weight:700;}
.card-icon{font-size:1.4rem;}
.card-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;}
.card-hover{transition:.25s;}
.card-hover:hover{transform:translateY(-3px);box-shadow:var(--shadow-lg);}

/* â•â•â• FORMS â•â•â• */
.form-group{margin-bottom:14px;}
.form-group label{display:block;font-size:0.8rem;font-weight:600;color:var(--text2);margin-bottom:5px;}
.form-group label .req{color:var(--danger);}
input,select,textarea{width:100%;padding:11px 14px;border:2px solid var(--border);border-radius:10px;font-size:0.88rem;font-family:inherit;color:var(--text);background:#fff;transition:.2s;outline:none;}
input:focus,select:focus,textarea:focus{border-color:var(--accent2);box-shadow:0 0 0 3px rgba(29,78,216,0.1);}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
.form-row.three{grid-template-columns:1fr 1fr 1fr;}
@media(max-width:640px){.form-row,.form-row.three{grid-template-columns:1fr;}}

/* â•â•â• BUTTONS â•â•â• */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:7px;padding:10px 18px;border:none;border-radius:6px;font-size:0.85rem;font-weight:600;cursor:pointer;transition:.15s;font-family:inherit;text-decoration:none;}
.btn:hover{filter:brightness(1.07);}
.btn:active{filter:brightness(0.95);}
.btn-primary{background:#1a2332;color:#fff;}
.btn-primary:hover{background:#243147;}
.btn-green{background:#1a6b3c;color:#fff;}
.btn-green:hover{background:#1d7a44;}
.btn-blue{background:#1e40af;color:#fff;}
.btn-red{background:#c53030;color:#fff;}
.btn-red:hover{background:#a52828;}
.btn-orange{background:#b45309;color:#fff;}
.btn-gray{background:#e8edf2;color:var(--text2);}
.btn-gray:hover{background:#d8dfe8;}
.btn-outline{background:transparent;color:var(--accent);border:1.5px solid var(--accent);}
.btn-sm{padding:6px 12px;font-size:0.78rem;}
.btn-lg{padding:12px 24px;font-size:0.95rem;}
.btn-full{width:100%;}
.btn-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;}
.btn-grid.three{grid-template-columns:1fr 1fr 1fr;}
.btn-grid.four{grid-template-columns:1fr 1fr 1fr 1fr;}
@media(max-width:640px){.btn-grid.four{grid-template-columns:1fr 1fr;}.btn-grid.three{grid-template-columns:1fr 1fr;}}

/* â•â•â• GPS & STATS â•â•â• */
.gps-box{padding:16px;background:var(--surface2);border:2px solid #bbf7d0;border-radius:12px;font-size:0.85rem;}
.gps-info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px;margin-top:10px;}
.gps-info-item{background:#fff;border-radius:8px;padding:10px;border:1px solid var(--border);}
.gps-info-item .label{font-size:0.72rem;color:var(--text3);font-weight:600;}
.gps-info-item .val{font-family:var(--ff-mono,'JetBrains Mono','Courier New',monospace);font-weight:700;font-size:0.9rem;margin-top:2px;}
.stat-row{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;margin:16px 0;}
@media(max-width:640px){.stat-row{grid-template-columns:repeat(3,1fr);}}
.stat-chip{text-align:center;padding:14px 8px;border-radius:12px;border:2px solid transparent;}
.stat-chip .sv{font-family:var(--ff-mono,'JetBrains Mono','Courier New',monospace);font-size:1.2rem;font-weight:700;line-height:1;}
.stat-chip .sk{font-size:0.68rem;font-weight:600;margin-top:4px;opacity:0.85;}
.sc-dark{background:#0f172a;color:#fff;}
.sc-green{background:#f0fdf4;border-color:#bbf7d0;color:#15803d;}
.sc-blue{background:#eff6ff;border-color:#bfdbfe;color:#1d4ed8;}
.sc-orange{background:#fffbeb;border-color:#fde68a;color:#b45309;}
.sc-purple{background:#faf5ff;border-color:#e9d5ff;color:#7c3aed;}

/* â•â•â• TABLE â•â•â• */
.data-table{width:100%;border-collapse:collapse;font-size:0.8rem;}
.data-table th{background:#0f172a;color:#fff;padding:10px 12px;text-align:left;font-weight:600;letter-spacing:0.03em;}
.data-table th:first-child{border-radius:8px 0 0 8px;}
.data-table th:last-child{border-radius:0 8px 8px 0;}
.data-table td{padding:9px 12px;border-bottom:1px solid var(--border);}
.data-table tr:hover td{background:#f8fafc;}
.data-table tr:last-child td{border-bottom:none;}

/* â•â•â• CANVAS â•â•â• */
canvas#plotCanvas{width:100%;border:2px solid #e2e8f0;border-radius:12px;background:#fff;cursor:crosshair;display:block;}

/* â•â•â• COORD / SUB TABS â•â•â• */
.sub-tabs{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:20px;}
.sub-tab{padding:8px 16px;border-radius:8px;font-size:0.8rem;font-weight:600;cursor:pointer;border:2px solid var(--border);background:#fff;color:var(--text2);transition:.2s;font-family:inherit;}
.sub-tab.active{background:var(--accent2);color:#fff;border-color:var(--accent2);}
.coord-pane{display:none;}
.coord-pane.active{display:block;animation:fadeUp .3s ease;}
.result-box{background:#f8fafc;border:2px solid #e2e8f0;border-radius:10px;padding:14px;font-family:var(--ff-mono,'JetBrains Mono','Courier New',monospace);font-size:0.85rem;margin-top:12px;display:none;}
.result-box.show{display:block;}
.result-row{display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid #f1f5f9;}
.result-row:last-child{border-bottom:none;}
.result-row .rk{color:var(--text2);font-family:var(--ff-body,'Space Grotesk','Segoe UI',sans-serif);}

/* â•â•â• MANUAL INPUT BOX â•â•â• */
.manual-box{background:#f0f9ff;border:2px dashed #93c5fd;border-radius:12px;padding:18px;margin-bottom:14px;display:none;}
.manual-box.open{display:block;animation:fadeUp .3s ease;}

/* â•â•â• EQUIPMENT â•â•â• */
.equip-card{border:2px solid var(--border);border-radius:var(--radius);padding:22px;background:#fff;transition:.25s;}
.equip-card:hover{border-color:var(--accent);box-shadow:0 8px 30px rgba(22,163,74,0.12);transform:translateY(-3px);}
.equip-top{display:flex;gap:12px;align-items:flex-start;margin-bottom:12px;}
.equip-icon{font-size:2.5rem;}
.equip-price{font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:2rem;font-weight:800;color:var(--accent);line-height:1;}
.equip-earn{display:inline-block;background:#f0fdf4;border:2px solid #bbf7d0;color:#15803d;padding:5px 12px;border-radius:20px;font-size:0.78rem;font-weight:700;margin:6px 0;}
.equip-features{list-style:none;margin:10px 0;display:flex;flex-direction:column;gap:3px;}
.equip-features li{font-size:0.82rem;color:var(--text2);}

/* â•â•â• REVENUE SPLIT â•â•â• */
.rev-split{background:linear-gradient(135deg,#0f172a,#1e3a5f);color:#fff;border-radius:var(--radius);padding:24px;margin-bottom:20px;}
.rev-split h3{font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:1.1rem;margin-bottom:14px;text-align:center;}
.split-row{display:flex;justify-content:space-between;align-items:center;background:rgba(255,255,255,0.1);border-radius:10px;padding:14px 18px;margin-bottom:8px;border:1px solid rgba(255,255,255,0.15);}
.split-pct{font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:2rem;font-weight:800;color:#4ade80;}
.split-label{font-size:0.85rem;opacity:0.85;}
.split-detail{font-size:0.75rem;opacity:0.65;margin-top:2px;}

/* â•â•â• COURSE CARD â•â•â• */
.course-card{border:2px solid var(--border);border-radius:var(--radius);padding:20px;background:#fff;transition:.25s;}
.course-card:hover{border-color:var(--accent2);box-shadow:var(--shadow);}
.course-level{display:inline-block;padding:3px 10px;border-radius:20px;font-size:0.72rem;font-weight:700;}
.level-beg{background:#f0fdf4;color:#15803d;}
.level-int{background:#eff6ff;color:#1d4ed8;}
.level-adv{background:#faf5ff;color:#7c3aed;}
.course-price{font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:1.6rem;font-weight:800;color:var(--accent);}
.course-earn{background:#f0fdf4;border:1px solid #bbf7d0;color:#15803d;padding:4px 10px;border-radius:20px;font-size:0.75rem;font-weight:700;display:inline-block;}

/* â•â•â• HISTORY CARD â•â•â• */
.hist-card{border:2px solid var(--border);border-radius:var(--radius);padding:20px;margin-bottom:14px;transition:.2s;}
.hist-card:hover{border-color:var(--accent);}
.hist-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;}
.hist-code{font-family:var(--ff-mono,'JetBrains Mono','Courier New',monospace);font-size:0.75rem;font-weight:700;background:#f0fdf4;color:#15803d;padding:4px 10px;border-radius:20px;}
.hist-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:10px;}
.hist-stat{text-align:center;padding:8px;border-radius:8px;background:#f8fafc;}
.hist-stat .hk{font-size:0.68rem;color:var(--text3);}
.hist-stat .hv{font-weight:800;font-size:0.95rem;}

/* â•â•â• VERIFY â•â•â• */
.verify-success{background:#f0fdf4;border:2px solid #86efac;border-radius:var(--radius);padding:20px;}
.verify-fail{background:#fef2f2;border:2px solid #fca5a5;border-radius:var(--radius);padding:20px;text-align:center;}

/* â•â•â• GIS CARD â•â•â• */
.gis-card{border:2px solid var(--border);border-radius:var(--radius);padding:20px;background:#fff;transition:.25s;}
.gis-card:hover{transform:translateY(-3px);box-shadow:var(--shadow);}

/* â•â•â• ECO SECTION â•â•â• */
.eco-banner{background:linear-gradient(135deg,#052e16,#064e3b,#065f46);color:#fff;border-radius:var(--radius);padding:22px;text-align:center;margin-bottom:20px;border:1px solid rgba(74,222,128,0.2);position:relative;overflow:hidden;}
.eco-banner::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle at 60% 40%,rgba(74,222,128,0.08),transparent 60%);pointer-events:none;}
.eco-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:14px;}
.eco-stat{background:rgba(255,255,255,0.15);border-radius:10px;padding:12px;text-align:center;}
.eco-stat .ev{font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:1.4rem;font-weight:800;color:#4ade80;}
.eco-stat .ek{font-size:0.72rem;opacity:0.85;}

/* â•â•â• MODAL â•â•â• */
.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:500;padding:16px;backdrop-filter:blur(4px);}
.modal-bg.open{display:flex;}
.modal-box{background:#fff;border-radius:20px;padding:28px;max-width:480px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:var(--shadow-lg);}

/* â•â•â• FOOTER â•â•â• */
footer{background:linear-gradient(135deg,#0f172a,#1e293b);color:#fff;padding:40px 0 20px;}
.footer-inner{max-width:1280px;margin:0 auto;padding:0 20px;}
.footer-grid{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:30px;margin-bottom:30px;}
@media(max-width:768px){.footer-grid{grid-template-columns:1fr 1fr;gap:20px;}}
@media(max-width:480px){.footer-grid{grid-template-columns:1fr;}}
.footer-brand p{font-size:0.85rem;opacity:0.7;margin-top:8px;line-height:1.7;}
.footer-links h4,.footer-contact h4{font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-weight:700;font-size:0.9rem;margin-bottom:12px;color:#4ade80;}
.footer-links ul{list-style:none;}
.footer-links li{font-size:0.82rem;opacity:0.65;margin-bottom:5px;}
.footer-contact p{font-size:0.85rem;opacity:0.75;margin-bottom:5px;}
.footer-bottom{border-top:1px solid rgba(255,255,255,0.1);padding-top:20px;text-align:center;font-size:0.78rem;opacity:0.5;}

/* â•â•â• DARK MODE â•â•â• */
body.dark{background:#080e1a;color:#e2e8f0;}
body.dark .card{background:#0f172a;border-color:#1e293b;}
body.dark .nav-bar{background:#0f172a;}
body.dark .nav-btn{color:#94a3b8;}
body.dark .nav-btn:hover{background:#1e293b;}
body.dark input,body.dark select,body.dark textarea{background:#1e293b;border-color:#334155;color:#e2e8f0;}
body.dark .sub-tab{background:#1e293b;border-color:#334155;color:#94a3b8;}
body.dark .result-box,.dark .gps-box{background:#1e293b;border-color:#334155;}
body.dark .equip-card,body.dark .course-card,body.dark .gis-card,body.dark .hist-card,body.dark .modal-box{background:#0f172a;border-color:#1e293b;}
body.dark .data-table td{border-color:#1e293b;}
body.dark .data-table tr:hover td{background:#1e293b;}
body.dark .hist-stat{background:#1e293b;}
body.dark .manual-box{background:#0a1f12;border-color:#1a4a2a;}
body.dark [style*="background:#f0f9ff"],body.dark [style*="background:#f0fdf4"],body.dark [style*="background:#faf5ff"],body.dark [style*="background:#fffbeb"],body.dark [style*="background:#f0fdfa"],body.dark [style*="background:#fef9f0"],body.dark [style*="background:#fef9f0"]{background:#1e293b !important;}

/* â•â•â• RESPONSIVE â•â•â• */
@media(max-width:768px){
  .logo-block h1{font-size:1.2rem;}
  .stat-row{grid-template-columns:repeat(3,1fr);}
  main{padding:14px 14px 120px;}
  .card{padding:16px;}
  .equip-price{font-size:1.5rem;}
  .hist-stats{grid-template-columns:repeat(2,1fr);}
  .header-right{gap:6px;}
}
@media(max-width:480px){
  .stat-row{grid-template-columns:repeat(2,1fr);}
  .stat-chip:nth-child(5){grid-column:span 2;}
}


/* â•â•â• STATUS MSG â•â•â• */
.status-msg{padding:10px 14px;border-radius:8px;font-size:0.85rem;font-weight:600;margin-top:12px;display:none;}
.status-msg.show{display:block;}
.status-msg.success{background:#f0fdf4;color:#15803d;border:1px solid #86efac;}
.status-msg.error{background:#fef2f2;color:#dc2626;border:1px solid #fca5a5;}
/* â•â•â• SPINNER â•â•â• */
.spinner{width:20px;height:20px;border:3px solid rgba(255,255,255,0.3);border-top-color:#fff;border-radius:50%;animation:spin .7s linear infinite;display:inline-block;}
@keyframes spin{to{transform:rotate(360deg);}}

/* â•â•â• BADGE â•â•â• */
.badge{display:inline-flex;align-items:center;gap:4px;padding:3px 10px;border-radius:20px;font-size:0.72rem;font-weight:700;}
.badge-green{background:#f0fdf4;color:#15803d;}
.badge-blue{background:#eff6ff;color:#1d4ed8;}
.badge-gold{background:#fffbeb;color:#92400e;}

/* â•â•â• CONTACT FORM (Formspree) â•â•â• */
.contact-form-card{background:linear-gradient(135deg,#0f172a,#1e3a5f);border-radius:var(--radius);padding:28px;color:#fff;}
.contact-form-card label{color:rgba(255,255,255,0.8);}
.contact-form-card input,.contact-form-card select,.contact-form-card textarea{background:rgba(255,255,255,0.1);border-color:rgba(255,255,255,0.2);color:#fff;}
.contact-form-card input::placeholder,.contact-form-card textarea::placeholder{color:rgba(255,255,255,0.4);}
.contact-form-card input:focus,.contact-form-card select:focus,.contact-form-card textarea:focus{border-color:#4ade80;background:rgba(255,255,255,0.15);}

/* â•â•â• HERO SECTION â•â•â• */
.hero-section{background:#1a2332;color:#fff;border-radius:var(--radius);padding:36px 28px;text-align:center;margin-bottom:24px;position:relative;overflow:hidden;border:1px solid #2d3d54;}
.hero-title{font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:14px;}
@media(max-width:640px){.hero-title{font-size:1.6rem;}}
.hero-sub{font-size:0.92rem;opacity:0.75;max-width:560px;margin:0 auto 24px;}
.hero-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-top:24px;}
@media(max-width:640px){.hero-stats{grid-template-columns:repeat(2,1fr);}}
.hero-stat{background:rgba(255,255,255,0.07);border:1px solid rgba(255,255,255,0.1);border-radius:6px;padding:14px;}
.hero-stat .hv{font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:1.6rem;font-weight:800;color:#4ade80;}
.hero-stat .hk{font-size:0.72rem;opacity:0.65;margin-top:2px;}

/* â•â•â• PRICING HIGHLIGHT â•â•â• */
.price-popular{border:3px solid var(--accent);background:linear-gradient(160deg,#0f2d1a 0%,#14532d 100%);position:relative;color:#fff;}
.price-popular .price-box-subtitle{color:rgba(255,255,255,0.7)!important;}
.price-popular li{color:rgba(255,255,255,0.92)!important;}
.price-badge{position:absolute;top:-13px;left:50%;transform:translateX(-50%);background:var(--accent);color:#fff;padding:4px 16px;border-radius:20px;font-size:0.75rem;font-weight:700;white-space:nowrap;box-shadow:0 2px 10px rgba(22,163,74,0.5);}
.price-box{border:2px solid #1e293b;border-radius:var(--radius);padding:28px;text-align:center;transition:.25s;background:#1e293b;color:#f1f5f9;}
.price-box .price-plan-label{color:#94a3b8!important;}
.price-box .price-box-subtitle{color:#94a3b8!important;}
.price-box li{color:#cbd5e1;}
.price-box:hover{box-shadow:var(--shadow-lg);transform:translateY(-3px);}

/* â•â•â• AUTH NOTICE BANNER â•â•â• */
.auth-notice{background:linear-gradient(90deg,#1d4ed8,#7c3aed);color:#fff;border-radius:12px;padding:16px 20px;margin-bottom:20px;display:flex;align-items:center;gap:14px;flex-wrap:wrap;}

/* â•â•â• PWA INSTALL BAR â•â•â• */
#installBar{display:none;position:fixed;bottom:0;left:0;right:0;z-index:2000;background:linear-gradient(135deg,#0f172a,#1e3a5f);color:#fff;padding:14px 20px;align-items:center;justify-content:space-between;gap:12px;box-shadow:0 -4px 20px rgba(0,0,0,0.4);flex-wrap:wrap;}

/* â•â•â• ADVANCED COMMERCIAL ADDITIONS â•â•â• */
/* Formspree form styling */
.form-baas{background:var(--surface2);border:2px solid #bbf7d0;border-radius:var(--radius);padding:24px;margin-bottom:20px;}
.form-baas h3{font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-weight:700;margin-bottom:16px;font-size:1rem;}
.form-baas .status-msg{padding:10px 14px;border-radius:8px;font-size:0.85rem;font-weight:600;margin-top:12px;display:none;}
.form-baas .status-msg.show{display:block;}
.form-baas .status-msg.success{background:#f0fdf4;color:#15803d;border:1px solid #86efac;}
.form-baas .status-msg.error{background:#fef2f2;color:#dc2626;border:1px solid #fca5a5;}

/* Auth modal styles */
.auth-tabs{display:flex;gap:0;margin-bottom:20px;border:2px solid var(--border);border-radius:10px;overflow:hidden;}
.auth-tab{flex:1;padding:10px;border:none;background:#f8fafc;font-weight:600;cursor:pointer;font-family:inherit;font-size:0.85rem;transition:.2s;}
.auth-tab.active{background:#0f172a;color:#fff;}
.auth-pane{display:none;}
.auth-pane.active{display:block;}
.auth-divider{text-align:center;position:relative;margin:16px 0;}
.auth-divider::before{content:'';position:absolute;left:0;top:50%;width:100%;height:1px;background:var(--border);}
.auth-divider span{background:#fff;padding:0 12px;font-size:0.78rem;color:var(--text3);position:relative;}

/* Stripe payment button */
.stripe-btn{background:linear-gradient(135deg,#635bff,#4b44cc);color:#fff;border:none;border-radius:10px;padding:13px 22px;font-weight:700;cursor:pointer;font-family:inherit;font-size:0.9rem;width:100%;display:flex;align-items:center;justify-content:center;gap:8px;transition:.2s;}
.stripe-btn:hover{transform:translateY(-1px);box-shadow:0 6px 20px rgba(99,91,255,0.35);}
.paystack-btn{background:linear-gradient(135deg,#00c3f7,#0084cc);color:#fff;border:none;border-radius:10px;padding:13px 22px;font-weight:700;cursor:pointer;font-family:inherit;font-size:0.9rem;width:100%;display:flex;align-items:center;justify-content:center;gap:8px;transition:.2s;margin-top:8px;}
.paystack-btn:hover{transform:translateY(-1px);box-shadow:0 6px 20px rgba(0,132,204,0.35);}
/* Pay Services Tab */
.pay-purpose-tag{background:var(--surface2);border:2px solid var(--border);border-radius:30px;padding:8px 16px;font-size:0.8rem;font-weight:600;cursor:pointer;transition:all .2s;color:var(--text2);font-family:inherit;}
.pay-purpose-tag:hover,.pay-purpose-tag.active{border-color:var(--accent);color:var(--accent);background:rgba(22,163,74,0.08);}
.pay-purpose-tag.active{box-shadow:0 0 16px rgba(22,163,74,0.15);}
.svc-amt-btn{background:var(--surface2);border:2px solid var(--border);border-radius:12px;padding:12px 8px;cursor:pointer;transition:all .2s;font-family:inherit;font-size:0.9rem;font-weight:600;color:var(--text);text-align:center;display:flex;flex-direction:column;gap:2px;}
.svc-amt-btn small{font-size:0.68rem;font-weight:400;color:var(--text3);}
.svc-amt-btn:hover,.svc-amt-btn.active{border-color:var(--accent);color:var(--accent);background:rgba(22,163,74,0.08);}
.svc-amt-btn.active{box-shadow:0 0 16px rgba(22,163,74,0.15);}
@media(max-width:600px){#tab-payments .grid-2-col{grid-template-columns:1fr!important;}}

/* Dashboard section (logged-in state) */
.user-badge{display:inline-flex;align-items:center;gap:8px;background:rgba(74,222,128,0.15);border:1px solid rgba(74,222,128,0.4);color:#4ade80;padding:6px 14px;border-radius:20px;font-size:0.8rem;font-weight:600;cursor:pointer;}
.plan-badge{display:inline-block;padding:3px 10px;border-radius:20px;font-size:0.72rem;font-weight:700;}
.plan-free{background:#f0fdf4;color:#15803d;}
.plan-basic{background:#eff6ff;color:#1d4ed8;}
.plan-pro{background:#fdf4ff;color:#7c3aed;}
.plan-ent{background:#fff7ed;color:#c2410c;}

/* Advanced stats dashboard */
.stats-dash{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:20px;}
.stats-dash .sd-card{background:#fff;border:2px solid var(--border);border-radius:12px;padding:16px;text-align:center;}
.stats-dash .sd-card .sd-num{font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:1.8rem;font-weight:800;color:var(--accent);}
.stats-dash .sd-card .sd-label{font-size:0.72rem;color:var(--text3);font-weight:600;margin-top:3px;}

/* Directory listing */
.directory-card{border:2px solid var(--border);border-radius:var(--radius);padding:20px;background:#fff;transition:.25s;}
.directory-card:hover{border-color:var(--accent2);box-shadow:var(--shadow);}
.surveyor-rating{display:flex;align-items:center;gap:4px;font-size:0.82rem;color:var(--gold);}
.verification-badge{display:inline-flex;align-items:center;gap:4px;background:#f0fdf4;border:1px solid #86efac;color:#15803d;padding:3px 8px;border-radius:6px;font-size:0.72rem;font-weight:700;}
.specialization-tag{display:inline-block;background:#eff6ff;color:#1d4ed8;padding:3px 8px;border-radius:6px;font-size:0.72rem;font-weight:600;margin:2px;}

/* Job board */
.job-card{border:2px solid var(--border);border-radius:var(--radius);padding:20px;background:#fff;transition:.25s;margin-bottom:12px;}
.job-card:hover{border-color:var(--accent);box-shadow:var(--shadow);}
.job-urgency{display:inline-block;padding:3px 10px;border-radius:20px;font-size:0.72rem;font-weight:700;}
.urgency-low{background:#f0fdf4;color:#15803d;}
.urgency-med{background:#fffbeb;color:#b45309;}
.urgency-high{background:#fef2f2;color:#dc2626;}
.urgency-urg{background:#0f172a;color:#fff;}

/* State directory dropdown enhanced */
.state-filter{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-bottom:16px;}
@media(max-width:640px){.state-filter{grid-template-columns:1fr;}}

/* Notification dot */
.notif-dot{display:inline-block;width:8px;height:8px;background:#ef4444;border-radius:50%;margin-left:4px;animation:blink 2s infinite;}

/* â•â• PROFESSIONAL ENHANCEMENTS â•â• */
/* Back to top button */
#backToTop{position:fixed;bottom:18px;left:18px;z-index:2999;background:linear-gradient(135deg,#0f172a,#1e3a5f);color:#fff;border:none;width:46px;height:46px;border-radius:50%;font-size:1.2rem;cursor:pointer;box-shadow:0 4px 16px rgba(15,23,42,0.35);transition:.3s;display:none;align-items:center;justify-content:center;}
#backToTop.show{display:flex;}
#backToTop:hover{transform:translateY(-3px);box-shadow:0 8px 24px rgba(15,23,42,0.4);}

/* Feature cards on home */
.feature-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px;margin:20px 0;}
.feature-card{background:#fff;border:2px solid var(--border);border-radius:14px;padding:20px 16px;text-align:center;transition:.25s;cursor:pointer;}
.feature-card:hover{border-color:var(--accent);transform:translateY(-4px);box-shadow:0 12px 32px rgba(22,163,74,0.15);}
.feature-card .fc-icon{font-size:2rem;margin-bottom:10px;}
.feature-card .fc-title{font-weight:700;font-size:0.9rem;margin-bottom:4px;color:var(--text);}
.feature-card .fc-desc{font-size:0.75rem;color:var(--text2);}

/* Testimonial cards */
.testimonial-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px;margin:20px 0;}
.testimonial-card{background:#fff;border:1px solid var(--border);border-radius:12px;padding:18px;position:relative;}
.testimonial-card::before{content:'"';font-size:3rem;color:var(--accent);opacity:0.3;position:absolute;top:8px;left:12px;line-height:1;font-family:serif;}
.testimonial-card .tc-text{font-size:0.84rem;color:var(--text2);line-height:1.6;padding-top:16px;}
.testimonial-card .tc-author{font-weight:700;font-size:0.82rem;margin-top:12px;color:var(--text);}
.testimonial-card .tc-role{font-size:0.72rem;color:var(--text3);}
.testimonial-card .tc-stars{color:#ca8a04;font-size:0.85rem;margin-top:4px;}

/* Section headers */
.section-header{text-align:center;margin-bottom:24px;}
.section-header h3{font-family:var(--ff-display,'Syne',sans-serif);font-size:1.4rem;font-weight:800;color:var(--text);}
.section-header p{font-size:0.88rem;color:var(--text2);margin-top:6px;}
.section-tag{display:inline-block;background:linear-gradient(135deg,#dcfce7,#d1fae5);color:#16a34a;font-size:0.72rem;font-weight:700;padding:4px 14px;border-radius:20px;letter-spacing:0.05em;margin-bottom:8px;}

/* Dark mode extras */
.dark .feature-card,.dark .testimonial-card{background:#1e293b;border-color:#334155;color:#e2e8f0;}
.dark .feature-card .fc-title,.dark .testimonial-card .tc-author{color:#f1f5f9;}
.dark .feature-card .fc-desc,.dark .testimonial-card .tc-text{color:#94a3b8;}

/* Pulse animation for GPS */
@keyframes pulse-ring{0%{transform:scale(1);opacity:0.8;}100%{transform:scale(1.8);opacity:0;}}
.gps-pulse{position:relative;}
.gps-pulse::after{content:'';position:absolute;inset:0;border-radius:50%;background:#4ade80;animation:pulse-ring 1.5s ease infinite;}

/* Smooth image fallback for og-image */
img{max-width:100%;height:auto;}


/* â”€â”€ NAV GROUP SEPARATOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.nav-sep {
  width: 1px;
  height: 22px;
  background: rgba(255,255,255,0.18);
  margin: 0 3px;
  flex-shrink: 0;
  align-self: center;
  border-radius: 1px;
}
@media(max-width: 768px) { .nav-sep { display: none; } }

/* â•â•â• MONETIZATION STYLES â•â•â• */

/* Ad Banner */
.ad-banner {
  background: linear-gradient(135deg, #f8fafc, #f0f4ff);
  border: 1px solid #e2e8f0;
  border-radius: 10px;
  padding: 12px 16px;
  text-align: center;
  font-size: 0.72rem;
  color: var(--text3);
  margin: 14px 0;
  position: relative;
  overflow: hidden;
  min-height: 90px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.ad-banner::before {
  content: 'ADVERTISEMENT';
  position: absolute;
  top: 4px;
  left: 8px;
  font-size: 0.6rem;
  letter-spacing: 0.08em;
  color: var(--text3);
  font-weight: 700;
}
.ad-banner-inner {
  width: 100%;
}
.ad-label {
  font-size: 0.6rem;
  color: var(--text3);
  letter-spacing: 0.08em;
  font-weight: 700;
  margin-bottom: 4px;
}

/* Display Ad Slots */
.ad-slot-leaderboard {
  min-height: 90px;
  width: 100%;
  max-width: 728px;
  margin: 0 auto;
}
.ad-slot-rectangle {
  min-height: 250px;
  width: 300px;
  margin: 0 auto;
}
.ad-slot-banner {
  min-height: 60px;
  width: 100%;
}

/* Affiliate Banner */
.affiliate-strip {
  background: linear-gradient(135deg, #1a2332, #1e3a5f);
  color: #fff;
  border-radius: 12px;
  padding: 16px 20px;
  display: flex;
  align-items: center;
  gap: 16px;
  margin: 14px 0;
  cursor: pointer;
  transition: .2s;
  text-decoration: none;
}
.affiliate-strip:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(15,23,42,0.25); }
.affiliate-strip .af-icon { font-size: 2rem; flex-shrink: 0; }
.affiliate-strip .af-title { font-weight: 800; font-size: 0.95rem; }
.affiliate-strip .af-sub { font-size: 0.75rem; opacity: 0.7; margin-top: 3px; }
.affiliate-strip .af-badge { background: #4ade80; color: #0f172a; font-size: 0.72rem; font-weight: 800; padding: 4px 10px; border-radius: 20px; flex-shrink: 0; margin-left: auto; }

/* Content Locker */
.content-locker {
  background: linear-gradient(135deg, #f0f4ff, #e8f0fe);
  border: 2px dashed #93c5fd;
  border-radius: 12px;
  padding: 24px;
  text-align: center;
  margin: 14px 0;
  position: relative;
}
.content-locker .lock-icon { font-size: 2.5rem; margin-bottom: 10px; }
.content-locker h4 { font-weight: 800; font-size: 1rem; color: var(--text); margin-bottom: 8px; }
.content-locker p { font-size: 0.82rem; color: var(--text2); margin-bottom: 16px; }
.locker-blur { filter: blur(6px); pointer-events: none; user-select: none; }
.locker-overlay { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(248,250,252,0.85); border-radius: 12px; z-index: 5; }

/* Monetize Tab */
.monetize-section { margin-bottom: 28px; }
.monetize-card { background: #fff; border: 1px solid var(--border); border-radius: 12px; padding: 20px; margin-bottom: 14px; transition: .2s; }
.monetize-card:hover { box-shadow: var(--shadow-lg); transform: translateY(-2px); }
.monetize-card h4 { font-weight: 800; font-size: 1rem; display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.monetize-card p { font-size: 0.83rem; color: var(--text2); line-height: 1.6; margin-bottom: 12px; }
.income-badge { display: inline-block; background: #dcfce7; color: #15803d; padding: 3px 10px; border-radius: 12px; font-size: 0.72rem; font-weight: 700; margin-right: 6px; }
.income-badge.blue { background: #dbeafe; color: #1d4ed8; }
.income-badge.gold { background: #fef3c7; color: #92400e; }
.checklist-item { display: flex; align-items: flex-start; gap: 8px; padding: 10px 0; border-bottom: 1px solid var(--border); font-size: 0.85rem; }
.checklist-item:last-child { border-bottom: none; }
.checklist-icon { font-size: 1.1rem; flex-shrink: 0; margin-top: 1px; }
.checklist-status { margin-left: auto; font-size: 0.72rem; font-weight: 700; padding: 3px 8px; border-radius: 8px; flex-shrink: 0; }
.status-pending { background: #fef3c7; color: #92400e; }
.status-ready { background: #dcfce7; color: #15803d; }
.status-required { background: #fee2e2; color: #dc2626; }

/* Earnings Dashboard */
.earnings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px; margin: 16px 0; }
.earn-chip { background: #fff; border: 2px solid var(--border); border-radius: 12px; padding: 16px 12px; text-align: center; }
.earn-chip .ev { font-size: 1.4rem; font-weight: 800; color: var(--accent); line-height: 1; }
.earn-chip .ek { font-size: 0.7rem; color: var(--text2); margin-top: 5px; font-weight: 600; }

/* Sponsor card */
.sponsor-slot {
  border: 2px dashed #d1d9e0;
  border-radius: 12px;
  padding: 20px;
  text-align: center;
  color: var(--text3);
  transition: .2s;
  cursor: pointer;
  margin-bottom: 14px;
}
.sponsor-slot:hover { border-color: var(--accent); background: #f0fdf4; color: var(--accent); }

/* Pop-up ad overlay */
.ad-modal-bg { position: fixed; inset: 0; background: rgba(15,23,42,0.6); z-index: 8888; display: none; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(3px); }
.ad-modal-bg.show { display: flex; }
.ad-modal-box { background: #fff; border-radius: 16px; padding: 28px; max-width: 420px; width: 100%; position: relative; text-align: center; animation: fadeUp .3s ease; }
.ad-modal-close { position: absolute; top: 10px; right: 14px; font-size: 1.2rem; cursor: pointer; color: var(--text3); border: none; background: none; font-size: 1.5rem; line-height: 1; }
.ad-countdown { font-size: 0.75rem; color: var(--text3); margin-top: 8px; }

/* Footer Legal */
.footer-legal { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; padding: 12px 20px; border-top: 1px solid var(--border); margin-top: 20px; }
.footer-legal a { font-size: 0.75rem; color: var(--text3); text-decoration: none; transition: .15s; }
.footer-legal a:hover { color: var(--accent); text-decoration: underline; }
.advertise-link { background: linear-gradient(135deg, #1a6b3c, #15803d); color: #fff !important; padding: 5px 14px; border-radius: 20px; font-weight: 700 !important; }
</style>

<body>

<!-- TOP BANNER -->
<div class="top-banner" id="topBanner">
  <div class="banner-inner">
    <span id="bannerMsg">ğŸ‰ Welcome to SurveyPro Elite â€” Nigeria's #1 Professional Surveying Platform</span>
    <button onclick="closeBanner()" style="background:rgba(255,255,255,0.2);border:none;color:#fff;padding:5px 12px;border-radius:8px;cursor:pointer;font-family:inherit;font-weight:700;">âœ•</button>
  </div>
</div>

<!-- TOAST CONTAINER -->
<div class="toast-wrap" id="toastWrap"></div>

<!-- MODAL -->
<div class="modal-bg" id="modalBg" onclick="if(event.target===this)closeModal()">
  <div class="modal-box" id="modalBox">
    <div id="modalContent"></div>
  </div>
</div>

<!-- â•â•â• HEADER â•â•â• -->
<header>
  <div class="header-inner">
    <div class="logo-block">
      <h1 class="display">ğŸ¯ SurveyPro <span>Elite</span></h1>
      <div class="logo-sub">NIGERIA'S #1 PROFESSIONAL SURVEYING PLATFORM Â· WGS84 Â· UTM 31â€“33N Â· NNO Â· SURCON ALIGNED</div>
    </div>
    <div class="header-right">
      <div class="eco-badge">ğŸŒ¿ Eco-Certified</div>
      <div class="gps-pill" onclick="showTab('survey')">
        <span class="gps-dot" id="gpsDot"></span>
        <span id="gpsLabel">GPS Off</span>
      </div>
      <select class="hdr-btn" id="langSelect" onchange="setLang(this.value)">
        <option value="en">ğŸ‡³ğŸ‡¬ English</option>
        <option value="ha">Hausa</option>
        <option value="yo">Yoruba</option>
        <option value="ig">Igbo</option>
        <option value="fr">FranÃ§ais</option>
      </select>
      <button class="hdr-btn" onclick="toggleDark()" id="darkBtn">ğŸŒ™ Dark</button>
      <button class="hdr-btn" onclick="showTab('pricing')">ğŸ’ Pricing</button>
      <button class="hdr-btn" onclick="showTab('contact')" style="background:rgba(74,222,128,0.25);border:1px solid rgba(74,222,128,0.4);">ğŸ“© Contact</button>
    </div>
  
      <!-- Auth Buttons -->
      <div style="display:flex;align-items:center;gap:8px;">
        <button class="hdr-btn" id="loginBtn" onclick="openAuthModal('login')" style="background:rgba(74,222,128,0.2);border:1px solid rgba(74,222,128,0.4);color:#4ade80;">ğŸ” Sign In</button>
        <div id="userMenu" style="display:none;align-items:center;gap:8px;">
          <div class="user-badge" onclick="showTab('history')">
            <span>ğŸ‘¤</span>
            <span id="userName">User</span>
            <span id="userPlan" class="plan-badge plan-free">FREE</span>
          </div>
          <button class="hdr-btn" onclick="logoutUser()" style="font-size:0.72rem;">Sign Out</button>
        </div>
      </div>
      </div>
</header>

<!-- â•â•â• NAVIGATION â•â•â• -->
<div class="nav-wrap">
  <nav class="nav-bar" role="navigation" aria-label="Main navigation">
    <button class="nav-btn active" id="nb-home" onclick="showTab('home')"><span class="nb-icon">ğŸ </span>Home</button>
    <button class="nav-btn" id="nb-survey" onclick="showTab('survey')"><span class="nb-icon">ğŸ“¡</span>Survey</button>
    <button class="nav-btn" id="nb-coords" onclick="showTab('coords')"><span class="nb-icon">ğŸŒ</span>Coordinates</button>
    <button class="nav-btn" id="nb-plot" onclick="showTab('plot')"><span class="nb-icon">ğŸ“</span>Plot Layout</button>
    <button class="nav-btn" id="nb-verify" onclick="showTab('verify')"><span class="nb-icon">ğŸ”’</span>C of O</button>
    <button class="nav-btn" id="nb-reports" onclick="showTab('reports')"><span class="nb-icon">ğŸ“„</span>Reports</button>
    <button class="nav-btn" id="nb-history" onclick="showTab('history')"><span class="nb-icon">ğŸ“</span>History</button>
    <div class="nav-sep" role="separator"></div>
    <button class="nav-btn" id="nb-gis" onclick="showTab('gis')"><span class="nb-icon">ğŸ—ºï¸</span>GIS Tools</button>
    <button class="nav-btn" id="nb-tools" onclick="showTab('tools')"><span class="nb-icon">ğŸ”§</span>Adv Tools</button>
    <div class="nav-sep" role="separator"></div>
    <button class="nav-btn" id="nb-jobs" onclick="showTab('jobs')"><span class="nb-icon">ğŸ’¼</span>Jobs</button>
    <button class="nav-btn" id="nb-directory" onclick="showTab('directory')"><span class="nb-icon">ğŸ—‚ï¸</span>Directory</button>
    <button class="nav-btn" id="nb-equipment" onclick="showTab('equipment')"><span class="nb-icon">âš™ï¸</span>Equipment</button>
    <button class="nav-btn" id="nb-training" onclick="showTab('training')"><span class="nb-icon">ğŸ“</span>Training</button>
    <div class="nav-sep" role="separator"></div>
    <button class="nav-btn" id="nb-payments" onclick="showTab('payments')"><span class="nb-icon">ğŸ’³</span>Pay Services</button>
    <button class="nav-btn" id="nb-pricing" onclick="showTab('pricing')"><span class="nb-icon">ğŸ’</span>Pricing</button>
    <button class="nav-btn" id="nb-monetize" onclick="showTab('monetize')" style="color:#f0b429;font-weight:700;"><span class="nb-icon">ğŸ’°</span>Earn Money</button>
    <button class="nav-btn" id="nb-contact" onclick="showTab('contact')"><span class="nb-icon">ğŸ“©</span>Contact</button>
  </nav>
</div>

<main>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HOME TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="tab-content active" id="tab-home">

  <!-- HERO -->
  <div class="hero-section">
    <div style="display:inline-block;background:rgba(74,222,128,0.15);border:1px solid rgba(74,222,128,0.3);color:#4ade80;padding:4px 14px;border-radius:4px;font-size:0.72rem;font-weight:700;margin-bottom:14px;letter-spacing:0.04em;">ğŸ‡³ğŸ‡¬ SURCON-ALIGNED Â· WGS84 Â· UTM 31â€“33N Â· NIGERIA</div>
    <h2 class="hero-title">SurveyPro Elite</h2>
    <p class="hero-sub">Nigeria's professional land surveying platform. GPS survey tools, coordinate conversion, equipment rental, training, and more â€” all in one place.</p>
    <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
      <button class="btn btn-green btn-lg" onclick="showTab('survey')">Start Surveying</button>
      <button class="btn btn-outline btn-lg" style="color:#fff;border-color:rgba(255,255,255,0.4);" onclick="showTab('pricing')">View Plans</button>
    </div>
    <div class="hero-stats">
      <div class="hero-stat"><div class="hv">10K+</div><div class="hk">Surveys Completed</div></div>
      <div class="hero-stat"><div class="hv">36</div><div class="hk">States Covered</div></div>
      <div class="hero-stat"><div class="hv">Â±8mm</div><div class="hk">RTK Accuracy</div></div>
      <div class="hero-stat"><div class="hv">50%</div><div class="hk">Your Commission</div></div>
    </div>
  </div>

  <!-- LEADERBOARD AD â€” Google AdSense / Adsterra -->
  <div class="ad-banner" style="margin-bottom:20px;">
    <div class="ad-banner-inner">
      <div class="ad-label">ADVERTISEMENT</div>
      <!-- REPLACE THIS BLOCK WITH YOUR ADSENSE CODE:
           <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6322456395209451" crossorigin="anonymous"></script>
           <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6322456395209451" data-ad-slot="XXXXXXXXXX" data-ad-format="auto" data-full-width-responsive="true"></ins>
           <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
      -->
      <!-- OR Adsterra / Monetag banner tag goes here -->
      <div style="background:linear-gradient(135deg,#1a2332,#1e3a5f);color:#fff;border-radius:8px;padding:18px 24px;display:flex;align-items:center;gap:16px;text-align:left;cursor:pointer;" onclick="window.open('https://wa.me/2348117554948?text=I+want+to+advertise+on+SurveyPro+Elite','_blank')">
        <span style="font-size:2rem;">ğŸ“¢</span>
        <div style="flex:1;">
          <div style="font-weight:800;font-size:0.95rem;">Advertise Here â€” Reach 10,000+ Nigerian Surveyors</div>
          <div style="font-size:0.75rem;opacity:0.7;margin-top:3px;">Your ad seen by licensed surveyors, estate developers & land professionals across all 36 states. Click to book your space.</div>
        </div>
        <div style="background:#4ade80;color:#0f172a;font-weight:800;font-size:0.78rem;padding:6px 14px;border-radius:20px;flex-shrink:0;">From â‚¦5,000/mo</div>
      </div>
    </div>
  </div>

  <!-- SERVICES LIST (clean, scannable) -->
  <div class="card" style="margin-bottom:20px;">
    <div class="card-header" style="margin-bottom:0;">
      <span class="card-icon">ğŸ“‹</span>
      <h2>Our Services</h2>
    </div>
    <p style="font-size:0.84rem;color:var(--text2);margin:8px 0 20px;">Select a service below to get started.</p>
    
    <div style="display:flex;flex-direction:column;gap:0;">
      <!-- Service 1 -->
      <div onclick="showTab('survey')" style="display:flex;align-items:center;gap:16px;padding:16px;border-top:1px solid var(--border);cursor:pointer;transition:.15s;" onmouseover="this.style.background='#f8fafb'" onmouseout="this.style.background=''">
        <div style="width:40px;height:40px;background:#f0f4f8;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0;">ğŸ“¡</div>
        <div style="flex:1;">
          <div style="font-weight:700;font-size:0.95rem;color:var(--text);">1. GPS Surveying</div>
          <div style="font-size:0.82rem;color:var(--text2);margin-top:2px;">Real-time GPS capture, manual point entry, area & perimeter calculations, professional report generation</div>
        </div>
        <div style="font-size:0.78rem;color:var(--accent);font-weight:600;flex-shrink:0;">Free â†’</div>
      </div>

      <!-- Service 2 -->
      <div onclick="showTab('coords')" style="display:flex;align-items:center;gap:16px;padding:16px;border-top:1px solid var(--border);cursor:pointer;transition:.15s;" onmouseover="this.style.background='#f8fafb'" onmouseout="this.style.background=''">
        <div style="width:40px;height:40px;background:#f0f4f8;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0;">ğŸŒ</div>
        <div style="flex:1;">
          <div style="font-weight:700;font-size:0.95rem;color:var(--text);">2. Coordinate Conversion</div>
          <div style="font-size:0.82rem;color:var(--text2);margin-top:2px;">Lat/Lon â†” UTM, bearing & distance, traverse computation, multi-format output (WGS84, UTM 31â€“33N, NNO)</div>
        </div>
        <div style="font-size:0.78rem;color:var(--accent);font-weight:600;flex-shrink:0;">Open â†’</div>
      </div>

      <!-- Service 3 -->
      <div onclick="showTab('equipment')" style="display:flex;align-items:center;gap:16px;padding:16px;border-top:1px solid var(--border);cursor:pointer;transition:.15s;" onmouseover="this.style.background='#f8fafb'" onmouseout="this.style.background=''">
        <div style="width:40px;height:40px;background:#f0f4f8;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0;">âš™ï¸</div>
        <div style="flex:1;">
          <div style="font-weight:700;font-size:0.95rem;color:var(--text);">3. Instrument / Equipment Rentals</div>
          <div style="font-size:0.82rem;color:var(--text2);margin-top:2px;">Book Total Stations, RTK GNSS, drones, 3D scanners & more. From â‚¦3,000/day. Earn 50% commission on referrals</div>
        </div>
        <div style="font-size:0.78rem;color:var(--accent);font-weight:600;flex-shrink:0;">Book â†’</div>
      </div>

      <!-- Service 4 -->
      <div onclick="showTab('plot')" style="display:flex;align-items:center;gap:16px;padding:16px;border-top:1px solid var(--border);cursor:pointer;transition:.15s;" onmouseover="this.style.background='#f8fafb'" onmouseout="this.style.background=''">
        <div style="width:40px;height:40px;background:#f0f4f8;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0;">ğŸ“</div>
        <div style="flex:1;">
          <div style="font-weight:700;font-size:0.95rem;color:var(--text);">4. Area Calculations & Plot Layout</div>
          <div style="font-size:0.82rem;color:var(--text2);margin-top:2px;">Generate scaled plot diagrams, calculate hectares, acres & perimeter. Export as PNG with professional watermark</div>
        </div>
        <div style="font-size:0.78rem;color:var(--accent);font-weight:600;flex-shrink:0;">Calculate â†’</div>
      </div>

      <!-- Service 5 -->
      <div onclick="showTab('verify')" style="display:flex;align-items:center;gap:16px;padding:16px;border-top:1px solid var(--border);cursor:pointer;transition:.15s;" onmouseover="this.style.background='#f8fafb'" onmouseout="this.style.background=''">
        <div style="width:40px;height:40px;background:#f0f4f8;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0;">ğŸ”’</div>
        <div style="flex:1;">
          <div style="font-weight:700;font-size:0.95rem;color:var(--text);">5. C of O Verification</div>
          <div style="font-size:0.82rem;color:var(--text2);margin-top:2px;">Verify SurveyPro-generated codes instantly. QR scanning. Professional C of O documentation assistance</div>
        </div>
        <div style="font-size:0.78rem;color:var(--accent);font-weight:600;flex-shrink:0;">Verify â†’</div>
      </div>

      <!-- Service 6 -->
      <div onclick="showTab('gis')" style="display:flex;align-items:center;gap:16px;padding:16px;border-top:1px solid var(--border);cursor:pointer;transition:.15s;" onmouseover="this.style.background='#f8fafb'" onmouseout="this.style.background=''">
        <div style="width:40px;height:40px;background:#f0f4f8;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0;">ğŸ—ºï¸</div>
        <div style="flex:1;">
          <div style="font-weight:700;font-size:0.95rem;color:var(--text);">6. GIS Tools & Analysis</div>
          <div style="font-size:0.82rem;color:var(--text2);margin-top:2px;">Satellite imagery, urban planning, drone photogrammetry, spatial analysis. Earn 50% on every referral (up to â‚¦36,000)</div>
        </div>
        <div style="font-size:0.78rem;color:var(--accent);font-weight:600;flex-shrink:0;">Refer â†’</div>
      </div>

      <!-- Service 7 -->
      <div onclick="showTab('training')" style="display:flex;align-items:center;gap:16px;padding:16px;border-top:1px solid var(--border);cursor:pointer;transition:.15s;" onmouseover="this.style.background='#f8fafb'" onmouseout="this.style.background=''">
        <div style="width:40px;height:40px;background:#f0f4f8;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0;">ğŸ“</div>
        <div style="flex:1;">
          <div style="font-weight:700;font-size:0.95rem;color:var(--text);">7. Training & Courses</div>
          <div style="font-size:0.82rem;color:var(--text2);margin-top:2px;">GIS, drone surveying, AutoCAD, RTK/GNSS, C of O law & more. Industry-certified. Earn 50% per enrollment</div>
        </div>
        <div style="font-size:0.78rem;color:var(--accent);font-weight:600;flex-shrink:0;">Enroll â†’</div>
      </div>

      <!-- Service 8 -->
      <div onclick="showTab('reports')" style="display:flex;align-items:center;gap:16px;padding:16px;border-top:1px solid var(--border);cursor:pointer;transition:.15s;" onmouseover="this.style.background='#f8fafb'" onmouseout="this.style.background=''">
        <div style="width:40px;height:40px;background:#f0f4f8;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0;">ğŸ“„</div>
        <div style="flex:1;">
          <div style="font-weight:700;font-size:0.95rem;color:var(--text);">8. Professional Reports</div>
          <div style="font-size:0.82rem;color:var(--text2);margin-top:2px;">Generate printable survey reports with official formatting, invoices, and field data sheets</div>
        </div>
        <div style="font-size:0.78rem;color:var(--accent);font-weight:600;flex-shrink:0;">Generate â†’</div>
      </div>

      <!-- Service 9 -->
      <div onclick="showTab('jobs')" style="display:flex;align-items:center;gap:16px;padding:16px;border-top:1px solid var(--border);border-bottom:1px solid var(--border);cursor:pointer;transition:.15s;" onmouseover="this.style.background='#f8fafb'" onmouseout="this.style.background=''">
        <div style="width:40px;height:40px;background:#f0f4f8;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0;">ğŸ’¼</div>
        <div style="flex:1;">
          <div style="font-weight:700;font-size:0.95rem;color:var(--text);">9. Job Board & Surveyor Directory</div>
          <div style="font-size:0.82rem;color:var(--text2);margin-top:2px;">Find survey contracts across all 36 states. Connect with licensed surveyors nationwide</div>
        </div>
        <div style="font-size:0.78rem;color:var(--accent);font-weight:600;flex-shrink:0;">Browse â†’</div>
      </div>
    </div>
  </div>

  <!-- WHY US â€” compact version -->
  <div class="card" style="margin-bottom:20px;">
    <div class="card-header"><span class="card-icon">ğŸ†</span><h2>Why SurveyPro Elite?</h2></div>
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px;">
      <div style="display:flex;gap:10px;align-items:flex-start;padding:10px;border:1px solid var(--border);border-radius:6px;">
        <span style="font-size:1.4rem;">ğŸ“±</span>
        <div><strong style="font-size:0.88rem;">Works Offline (PWA)</strong><p style="font-size:0.8rem;color:var(--text2);margin-top:2px;">Install on any device, works without internet in the field.</p></div>
      </div>
      <div style="display:flex;gap:10px;align-items:flex-start;padding:10px;border:1px solid var(--border);border-radius:6px;">
        <span style="font-size:1.4rem;">ğŸ”</span>
        <div><strong style="font-size:0.88rem;">Secure & Private</strong><p style="font-size:0.8rem;color:var(--text2);margin-top:2px;">All data stored locally. No account required to get started.</p></div>
      </div>
      <div style="display:flex;gap:10px;align-items:flex-start;padding:10px;border:1px solid var(--border);border-radius:6px;">
        <span style="font-size:1.4rem;">ğŸ’°</span>
        <div><strong style="font-size:0.88rem;">50% Commission Model</strong><p style="font-size:0.8rem;color:var(--text2);margin-top:2px;">Earn real money on equipment, courses & GIS referrals.</p></div>
      </div>
      <div style="display:flex;gap:10px;align-items:flex-start;padding:10px;border:1px solid var(--border);border-radius:6px;">
        <span style="font-size:1.4rem;">ğŸ‡³ğŸ‡¬</span>
        <div><strong style="font-size:0.88rem;">Built for Nigeria</strong><p style="font-size:0.8rem;color:var(--text2);margin-top:2px;">WGS84, UTM 31-33N, NNO/Minna datum. All 36 states.</p></div>
      </div>
    </div>

    <!-- â•â•â• FORMSPREE CONTACT â•â•â• -->
    <div class="form-baas" style="margin-top:20px;">
      <h3>ğŸ“© Send Us a Message</h3>
      <p style="font-size:0.82rem;color:var(--text2);margin-bottom:16px;">Messages go directly to our inbox. We reply within 2 hours.</p>
      <form id="contactForm" action="https://formspree.io/f/xpwzldjk" method="POST" onsubmit="submitContact(event)">
        <div class="form-row">
          <div class="form-group"><label>Full Name <span class="req">*</span></label><input type="text" name="name" required placeholder="Your full name"></div>
          <div class="form-group"><label>Email <span class="req">*</span></label><input type="email" name="email" required placeholder="your@email.com"></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>Phone</label><input type="tel" name="phone" placeholder="080XXXXXXXX"></div>
          <div class="form-group"><label>Service Interest</label>
            <select name="service">
              <option>Boundary Survey</option><option>Topographic Survey</option><option>C of O Processing</option>
              <option>Equipment Rental</option><option>Training Course</option><option>GIS Analysis</option><option>Other</option>
            </select>
          </div>
        </div>
        <div class="form-group"><label>State</label>
          <select name="state">
            <option value="">Select your state...</option>
            <option>Abia</option><option>Adamawa</option><option>Akwa Ibom</option><option>Anambra</option>
            <option>Bauchi</option><option>Bayelsa</option><option>Benue</option><option>Borno</option>
            <option>Cross River</option><option>Delta</option><option>Ebonyi</option><option>Edo</option>
            <option>Ekiti</option><option>Enugu</option><option>FCT - Abuja</option><option>Gombe</option>
            <option>Imo</option><option>Jigawa</option><option>Kaduna</option><option>Kano</option>
            <option>Katsina</option><option>Kebbi</option><option>Kogi</option><option>Kwara</option>
            <option>Lagos</option><option>Nasarawa</option><option>Niger</option><option>Ogun</option>
            <option>Ondo</option><option>Osun</option><option>Oyo</option><option>Plateau</option>
            <option>Rivers</option><option>Sokoto</option><option>Taraba</option><option>Yobe</option><option>Zamfara</option>
          </select>
        </div>
        <div class="form-group"><label>Message <span class="req">*</span></label><textarea name="message" rows="3" required placeholder="Describe your surveying needs, land size, location, budget..."></textarea></div>
        <input type="hidden" name="_subject" value="New SurveyPro Elite Inquiry">
        <input type="hidden" name="_next" value="https://techenite.github.io/surveyorpro">
        <button class="btn btn-green btn-lg btn-full" type="submit">ğŸ“¨ Send Message</button>
        <div class="status-msg" id="contactStatus"></div>
      </form>
    </div>
  </div>

  <!-- TESTIMONIALS â€” collapsed by default -->
  <div class="card" style="margin-bottom:20px;">
    <div class="card-header" style="cursor:pointer;margin-bottom:0;" onclick="const tb=document.getElementById('testimonialsBody');const ta=document.getElementById('testimonialsArrow');tb.style.display=tb.style.display==='none'?'block':'none';ta.textContent=tb.style.display==='none'?'â–¼':'â–²'">
      <span class="card-icon">â­</span>
      <h2 style="flex:1;">Client Reviews</h2>
      <span id="testimonialsArrow" style="font-size:0.8rem;color:var(--text3);">â–¼</span>
    </div>
    <div id="testimonialsBody" style="display:none;margin-top:16px;">
      <p style="font-size:0.82rem;color:var(--text2);margin-bottom:16px;">Real feedback from professionals across all 36 states</p>
      <div class="testimonial-grid">
        <div class="testimonial-card">
          <p class="tc-text">SurveyPro Elite is a game-changer. I completed a boundary survey in Abuja and submitted the report same day. The coordinate conversion tool is incredibly accurate.</p>
          <div class="tc-author">Engr. Chukwuemeka Obi</div>
          <div class="tc-role">Licensed Surveyor Â· FCT Abuja</div>
          <div class="tc-stars">â˜…â˜…â˜…â˜…â˜…</div>
        </div>
        <div class="testimonial-card">
          <p class="tc-text">The equipment rental feature saved my project. Got a GPS receiver delivered in Lagos within 24 hours and earned 50% commission on my referral. Excellent platform!</p>
          <div class="tc-author">Mrs. Folake Adeyemi</div>
          <div class="tc-role">Estate Developer Â· Lagos State</div>
          <div class="tc-stars">â˜…â˜…â˜…â˜…â˜…</div>
        </div>
        <div class="testimonial-card">
          <p class="tc-text">As a client trying to verify my C of O, the process was straightforward. Arnold responded via WhatsApp immediately. Very professional and reliable service.</p>
          <div class="tc-author">Mallam Ibrahim Garba</div>
          <div class="tc-role">Land Owner Â· Kano State</div>
          <div class="tc-stars">â˜…â˜…â˜…â˜…â˜…</div>
        </div>
      </div>
    </div>
  </div>

  <!-- PLATFORM STATS -->
  <div class="card" style="margin-bottom:20px;background:#1a2332;color:#fff;border:none;">
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:16px;text-align:center;">
      <div><div style="font-size:1.8rem;font-weight:800;color:#4ade80;">10K+</div><div style="font-size:0.75rem;opacity:0.65;margin-top:4px;">Surveys Completed</div></div>
      <div><div style="font-size:1.8rem;font-weight:800;color:#4ade80;">36</div><div style="font-size:0.75rem;opacity:0.65;margin-top:4px;">States Covered</div></div>
      <div><div style="font-size:1.8rem;font-weight:800;color:#4ade80;">Â±8mm</div><div style="font-size:0.75rem;opacity:0.65;margin-top:4px;">RTK Accuracy</div></div>
      <div><div style="font-size:1.8rem;font-weight:800;color:#f0b429;">50%</div><div style="font-size:0.75rem;opacity:0.65;margin-top:4px;">Your Commission</div></div>
      <div><div style="font-size:1.8rem;font-weight:800;color:#4ade80;">500+</div><div style="font-size:0.75rem;opacity:0.65;margin-top:4px;">Trees Saved/Year</div></div>
    </div>
  </div>

</div><!-- END tab-home -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SURVEY TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->


<div class="tab-content" id="tab-survey">

  <!-- NOTICE BANNER -->
  <div class="card" style="margin-bottom:16px;background:#f8fafb;border-left:3px solid var(--accent);">
    <div style="display:flex;align-items:center;gap:10px;">
      <span style="font-size:1.2rem;">ğŸ“¡</span>
      <div>
        <div style="font-size:0.88rem;font-weight:700;color:var(--text);">SurveyPro Elite â€” Paperless & SURCON-Aligned</div>
        <div style="font-size:0.78rem;color:var(--text2);margin-top:2px;">WGS84 Â· UTM 31â€“33N Â· NNO datum Â· All 36 states Â· ISO 14001 compliant</div>
      </div>
    </div>
  </div>

  <!-- GPS PANEL -->
  <div class="card">
    <div class="card-header"><span class="card-icon">ğŸ“¡</span><h2>GPS & Live Location</h2></div>
    <div class="gps-box" id="gpsInfoBox">
      <p style="color:var(--text2);font-size:0.85rem;">Click <strong>Enable GPS</strong> to start real-time positioning for your survey. Works best outdoors with clear sky view.</p>
    </div>
    <div class="btn-grid four" style="margin-top:14px;">
      <button class="btn btn-green" onclick="enableGPS()">ğŸ“¡ Enable GPS</button>
      <button class="btn btn-red" onclick="stopGPS()">â›” Stop GPS</button>
      <button class="btn btn-blue" onclick="addGPSPoint()">â• Add GPS Point</button>
      <button class="btn btn-gray" onclick="getCurrentLocationInfo()">ğŸ“ My Location</button>
    </div>
    <div id="gpsInfoGrid" class="gps-info-grid" style="display:none;margin-top:12px;"></div>
  </div>

  <!-- CLIENT DETAILS -->
  <div class="card">
    <div class="card-header"><span class="card-icon">ğŸ‘¤</span><h2>Client & Project Details</h2></div>
    <div class="form-row">
      <div class="form-group"><label>Client Name <span class="req">*</span></label><input id="clientName" type="text" placeholder="Full legal name" autocomplete="name"></div>
      <div class="form-group"><label>Phone <span class="req">*</span></label><input id="clientPhone" type="tel" placeholder="080XXXXXXXX" autocomplete="tel"></div>
    </div>
    <div class="form-row">
      <div class="form-group"><label>Email</label><input id="clientEmail" type="email" placeholder="client@email.com" autocomplete="email"></div>
      <div class="form-group"><label>NIN / ID Number</label><input id="clientNIN" type="text" placeholder="National ID Number"></div>
    </div>
    <div class="form-row">
      <div class="form-group"><label>Project Name <span class="req">*</span></label><input id="projectName" type="text" placeholder="Project / Survey name"></div>
      <div class="form-group"><label>Location <span class="req">*</span></label><input id="location" type="text" placeholder="Survey site address"></div>
    </div>
    <div class="form-row three">
      <div class="form-group"><label>File Number</label><input id="fileNumber" type="text" placeholder="LD/123/2026"></div>
      <div class="form-group"><label>Survey Type</label>
        <select id="surveyType">
          <option>Boundary Survey</option><option>Topographic Survey</option>
          <option>Cadastral Survey</option><option>Engineering Survey</option>
          <option>Construction Survey</option><option>Hydrographic Survey</option>
          <option>Route Survey</option><option>Photogrammetric Survey</option>
          <option>Drone/Aerial Survey</option><option>Mining Survey</option>
        </select>
      </div>
      <div class="form-group"><label>Coordinate System</label>
        <select id="coordSys" onchange="updateDatumFromCRS()">
          <optgroup label="â”€â”€ UTM Linear (Metres) Â· WGS 84 â”€â”€">
            <option value="WGS84_UTM31N">WGS 84 / UTM Zone 31N â€” West Belt (0Â°â€“6Â°E)</option>
            <option value="WGS84_UTM32N" selected>WGS 84 / UTM Zone 32N â€” Mid Belt (6Â°â€“12Â°E) âœ“ Nigeria</option>
            <option value="WGS84_UTM33N">WGS 84 / UTM Zone 33N â€” East Belt (12Â°â€“18Â°E)</option>
            <option value="WGS84_UTM31S">WGS 84 / UTM Zone 31S â€” Southern Hemisphere</option>
            <option value="WGS84_UTM32S">WGS 84 / UTM Zone 32S â€” Southern Hemisphere</option>
          </optgroup>
          <optgroup label="â”€â”€ NNO / Minna Datum â€” Nigeria Official â”€â”€">
            <option value="NNO_UTM31N">Minna / NNO â€” Zone 31N West Belt (Clarke 1880)</option>
            <option value="NNO_UTM32N">Minna / NNO â€” Zone 32N Mid Belt (Clarke 1880)</option>
          </optgroup>
          <optgroup label="â”€â”€ Geographic Angular (Degrees) Â· WGS 84 â”€â”€">
            <option value="GEO_WGS84_DD">Geographic â€” WGS 84 Decimal Degrees (EPSG:4326)</option>
            <option value="GEO_WGS84_DMS">Geographic â€” WGS 84 DMS (DegÂ° Minâ€² Secâ€³)</option>
          </optgroup>
          <optgroup label="â”€â”€ Web Mercator Â· Linear (Metres) â”€â”€">
            <option value="WEBMERC">Web Mercator EPSG:3857 (Google Maps / Bing)</option>
          </optgroup>
          <optgroup label="â”€â”€ Polar â”€â”€">
            <option value="POLAR_N">WGS 84 / UPS North â€” Polar Stereographic</option>
          </optgroup>
        </select>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group"><label>Horizontal Datum</label>
        <select id="hDatum">
          <option value="WGS84">WGS 84 Â· EPSG:4326 â€” Global Standard (GPS)</option>
          <option value="NNO_MINNA">Minna 1987 / NNO Â· Clarke 1880 â€” Nigeria Official</option>
          <option value="CLARKE1880">Clarke 1880 â€” West Africa Historical</option>
          <option value="GRS80">GRS 1980 / ETRS89 â€” European Reference</option>
        </select>
      </div>
      <div class="form-group"><label>Vertical Datum</label>
        <select id="vDatum"><option>Mean Sea Level (MSL)</option><option>Ellipsoidal Height</option><option>Geoid Height (EGM2008)</option></select>
      </div>
    </div>
    <div class="form-group"><label>Survey Notes / Remarks</label>
      <textarea id="surveyNotes" rows="2" placeholder="Additional notes, obstructions, access issues..."></textarea>
    </div>
  </div>

  <!-- SURVEY CONTROLS -->
  <div class="card">
    <div class="card-header"><span class="card-icon">ğŸ“</span><h2>Survey Controls</h2></div>
    <div class="btn-grid four" style="margin-bottom:14px;">
      <button class="btn btn-green" onclick="addManualPointToggle()">âœï¸ Manual Point</button>
      <button class="btn btn-orange" onclick="undoPoint()">â†©ï¸ Undo Last</button>
      <button class="btn btn-blue" onclick="importCSVPoints()">ğŸ“‚ Import CSV</button>
      <button class="btn btn-red" onclick="clearSurvey()">ğŸ—‘ï¸ Clear All</button>
    </div>

    <!-- Manual Input -->
    <div class="manual-box" id="manualBox">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;flex-wrap:wrap;gap:8px;">
        <div style="font-size:0.82rem;font-weight:700;color:var(--accent2);">âœï¸ Enter Manual Point Coordinates</div>
        <div style="display:flex;gap:6px;">
          <button class="btn btn-sm" id="manModeNE" style="background:var(--accent);color:#fff;font-size:0.72rem;padding:3px 10px;" onclick="setManualMode('ne')">ğŸ“ N/E</button>
          <button class="btn btn-sm" id="manModeLL" style="background:var(--border);color:var(--text);font-size:0.72rem;padding:3px 10px;" onclick="setManualMode('latlon')">ğŸ“Œ Lat/Lon</button>
        </div>
      </div>
      <div class="form-row three">
        <div class="form-group"><label id="manField1Lbl">Northing (m)</label><input id="manualN" type="number" step="0.001" placeholder="857881.968" class="mono"></div>
        <div class="form-group"><label id="manField2Lbl">Easting (m)</label><input id="manualE" type="number" step="0.001" placeholder="707032.831" class="mono"></div>
        <div class="form-group"><label>Elevation (m)</label><input id="manualElev" type="number" step="0.001" placeholder="0.000" class="mono"></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Point Description</label><input id="manualDesc" type="text" placeholder="e.g. TP1, CP, Boundary Pillar"></div>
        <div class="form-group" style="display:flex;align-items:flex-end;">
          <button class="btn btn-green btn-full" onclick="confirmManualPoint()">âœ… Add Point</button>
        </div>
      </div>
    </div>

    <!-- Stats -->
    <div class="stat-row">
      <div class="stat-chip sc-dark"><div class="sv" id="ptCount">0</div><div class="sk">Points</div></div>
      <div class="stat-chip sc-green"><div class="sv" id="areaHa">0.0000</div><div class="sk">Hectares</div></div>
      <div class="stat-chip sc-blue"><div class="sv" id="areaAc">0.0000</div><div class="sk">Acres</div></div>
      <div class="stat-chip sc-orange"><div class="sv" id="areaSqm">0</div><div class="sk">Sq Metres</div></div>
      <div class="stat-chip sc-purple"><div class="sv" id="plotsCount">0.0</div><div class="sk">Plots(50Ã—100)</div></div>
    </div>
    <div class="stat-row" style="margin-top:0;">
      <div class="stat-chip sc-blue" style="grid-column:span 2"><div class="sv" id="perim">0.00</div><div class="sk">Perimeter (m)</div></div>
      <div class="stat-chip sc-green" style="grid-column:span 3"><div class="sv" id="bearingInfo" style="font-size:0.75rem;font-family:'Space Grotesk','Segoe UI',sans-serif';letter-spacing:0">â€”</div><div class="sk">Last Bearing / Distance</div></div>
    </div>

    <!-- Points Table -->
    <div id="pointsTableWrap" style="overflow-x:auto;margin-bottom:16px;"></div>

    <!-- Actions -->
    <div class="btn-grid" style="gap:10px;">
      <button class="btn btn-green btn-lg" onclick="completeSurvey()">âœ… Complete & Save Survey</button>
      <button class="btn btn-blue" onclick="emailSurvey()">ğŸ“§ Email Report</button>
      <button class="btn" style="background:#25D366;color:#fff;" onclick="whatsappSurvey()">ğŸ“± WhatsApp</button>
      <button class="btn btn-gray" onclick="printSurvey()">ğŸ–¨ï¸ Print Report</button>
      <button class="btn btn-primary" onclick="exportSurveyJSON()">â¬‡ï¸ Export JSON</button>
      <button class="btn btn-orange" onclick="generateQR()">ğŸ“± QR Code</button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     COORDINATES TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->


<div class="tab-content" id="tab-coords">
  <div class="card">
    <div class="card-header"><span class="card-icon">ğŸŒ</span><h2>Coordinate Conversion Tools</h2></div>
    <div class="sub-tabs">
      <button class="sub-tab active" id="ct-latutm" onclick="showCoord('latutm')">Lat/Lon â†” UTM</button>
      <button class="sub-tab" id="ct-bearing" onclick="showCoord('bearing')">Bearing & Distance</button>
      <button class="sub-tab" id="ct-multiformat" onclick="showCoord('multiformat')">Multi-Format</button>
      <button class="sub-tab" id="ct-traverse" onclick="showCoord('traverse')">Traverse Calc</button>
      <button class="sub-tab" id="ct-area" onclick="showCoord('area')">Area Calculator</button>
      <button class="sub-tab" id="ct-inverse" onclick="showCoord('inverse')">Inverse Calc</button>
    </div>

    <!-- Lat/UTM -->
    <div class="coord-pane active" id="cp-latutm">

      <!-- Projection / Datum Reference Banner -->
      <div style="background:linear-gradient(135deg,#0f172a,#1e3a5f);color:#fff;border-radius:12px;padding:16px 20px;margin-bottom:16px;">
        <div style="font-size:0.72rem;font-weight:700;opacity:0.6;text-transform:uppercase;letter-spacing:0.1em;margin-bottom:10px;">ğŸ—ºï¸ Select Reference Projection &amp; Datum</div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px;">
          <div>
            <label style="font-size:0.7rem;opacity:0.65;display:block;margin-bottom:4px;">PROJECTION / CRS</label>
            <select id="conv-projection" onchange="updateConvProjectionInfo()" style="width:100%;padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.2);font-size:0.8rem;font-weight:600;background:#1e3a5f;color:#fff;">
              <optgroup label="â”€â”€ UTM Â· WGS 84 (Nigeria Zones) â”€â”€" style="background:#0f172a;">
                <option value="UTM31N">UTM Zone 31N Â· West Belt (Lagos, Kebbi, Sokoto, Niger)</option>
                <option value="UTM32N" selected>UTM Zone 32N Â· Mid Belt (FCT, Rivers, Kano, Benue) âœ“</option>
                <option value="UTM33N">UTM Zone 33N Â· East Belt (Borno, Yobe, Adamawa)</option>
              </optgroup>
              <optgroup label="â”€â”€ NNO / Minna (Nigeria Official) â”€â”€" style="background:#0f172a;">
                <option value="NNO31N">NNO Â· Minna Zone 31N Â· West Belt Â· Clarke 1880</option>
                <option value="NNO32N">NNO Â· Minna Zone 32N Â· Mid Belt Â· Clarke 1880</option>
              </optgroup>
              <optgroup label="â”€â”€ UTM Southern Hemisphere â”€â”€" style="background:#0f172a;">
                <option value="UTM31S">UTM Zone 31S Â· Southern (False N: 10,000,000m)</option>
                <option value="UTM32S">UTM Zone 32S Â· Southern (False N: 10,000,000m)</option>
              </optgroup>
              <optgroup label="â”€â”€ Geographic (Degrees) â”€â”€" style="background:#0f172a;">
                <option value="GEO_DD">Geographic WGS84 Â· Decimal Degrees (EPSG:4326)</option>
              </optgroup>
              <optgroup label="â”€â”€ Web Mercator â”€â”€" style="background:#0f172a;">
                <option value="WEBMERC">Web Mercator EPSG:3857 Â· Google Maps (NOT for survey)</option>
              </optgroup>
            </select>
          </div>
          <div>
            <label style="font-size:0.7rem;opacity:0.65;display:block;margin-bottom:4px;">DATUM Â· ELLIPSOID</label>
            <div id="conv-datum-box" style="background:rgba(74,222,128,0.15);border:1px solid rgba(74,222,128,0.3);border-radius:8px;padding:8px 10px;">
              <div id="conv-datum-name" style="font-size:0.82rem;font-weight:700;color:#4ade80;">WGS 84 (EPSG:4326)</div>
              <div id="conv-datum-detail" style="font-size:0.68rem;opacity:0.65;margin-top:2px;">GRS80 Â· a=6,378,137m Â· 1/f=298.257</div>
            </div>
          </div>
        </div>
        <div id="conv-zone-info" style="font-size:0.74rem;background:rgba(255,255,255,0.08);border-radius:6px;padding:8px 12px;color:#93c5fd;">
          ğŸ“ <strong>Nigeria Coverage:</strong> Zone 31N (West Â· 3Â°Eâ€“9Â°E) Â· Zone 32N (Mid Â· 9Â°Eâ€“15Â°E) Â· Zone 33N (East Â· 15Â°Eâ€“21Â°E) Â· All zones WGS84, kâ‚€=0.9996, False E=500,000m
        </div>
      </div>

      <div class="card-grid">
        <div style="background:#f0f9ff;border-radius:12px;padding:20px;">
          <h4 style="font-weight:700;margin-bottom:14px;">ğŸ“ Lat/Lon â†’ Projected Coordinates</h4>
          <div class="form-group"><label>Latitude (Â°N positive, Â°S negative)</label><input id="ll-lat" type="number" step="0.0000001" placeholder="7.75771146" class="mono"></div>
          <div class="form-group"><label>Longitude (Â°E positive, Â°W negative)</label><input id="ll-lon" type="number" step="0.0000001" placeholder="4.53887695" class="mono"></div>
          <div class="form-group"><label>Force Zone (leave blank = auto-detect)</label><input id="ll-zone" type="number" min="1" max="60" placeholder="32 (auto)" class="mono"></div>
          <button class="btn btn-blue btn-full" onclick="convLatToUTM()">Convert to Projected â†’</button>
          <div class="result-box" id="res-lltoutm"></div>
        </div>
        <div style="background:#f0fdf4;border-radius:12px;padding:20px;">
          <h4 style="font-weight:700;margin-bottom:14px;">ğŸ“ Projected Coordinates â†’ Lat/Lon</h4>
          <div class="form-group"><label>UTM Zone Number (e.g. 31, 32, 33)</label><input id="utm-zone" type="number" min="1" max="60" placeholder="32" class="mono"></div>
          <div class="form-group"><label>Easting (m)</label><input id="utm-e" type="number" step="0.001" placeholder="707032.831" class="mono"></div>
          <div class="form-group"><label>Northing (m)</label><input id="utm-n" type="number" step="0.001" placeholder="857881.968" class="mono"></div>
          <div class="form-group"><label>Hemisphere</label>
            <select id="utm-hemi">
              <option value="N">N â€” Northern Hemisphere (Nigeria âœ“)</option>
              <option value="S">S â€” Southern Hemisphere</option>
            </select>
          </div>
          <button class="btn btn-green btn-full" onclick="convUTMToLat()">Convert â†’ Lat/Lon</button>
          <div class="result-box" id="res-utmtoll"></div>
        </div>
      </div>
    </div>

    <!-- Bearing & Distance -->
    <div class="coord-pane" id="cp-bearing">
      <div style="background:#faf5ff;border-radius:12px;padding:20px;">
        <h4 style="font-weight:700;margin-bottom:14px;">ğŸ§­ Calculate Point from Bearing & Distance</h4>
        <div class="form-row">
          <div class="form-group"><label>Start Northing (m)</label><input id="bd-n" type="number" step="0.001" placeholder="857881.968" class="mono"></div>
          <div class="form-group"><label>Start Easting (m)</label><input id="bd-e" type="number" step="0.001" placeholder="707032.831" class="mono"></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>Bearing (0â€“360Â°)</label><input id="bd-bearing" type="number" step="0.0001" min="0" max="360" placeholder="45.0000" class="mono"></div>
          <div class="form-group"><label>Distance (m)</label><input id="bd-dist" type="number" step="0.001" placeholder="100.000" class="mono"></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>Vertical Angle (optional Â°)</label><input id="bd-va" type="number" step="0.001" placeholder="0 = horizontal" class="mono"></div>
          <div class="form-group"><label>Instrument HI (m)</label><input id="bd-hi" type="number" step="0.001" placeholder="1.500" class="mono"></div>
        </div>
        <button class="btn btn-primary btn-full" onclick="calcBearingDist()">Calculate Point</button>
        <div class="result-box" id="bd-result"></div>
      </div>
    </div>

    <!-- Multi Format -->
    <div class="coord-pane" id="cp-multiformat">
      <div class="card-grid">
        <div style="background:#fffbeb;border-radius:12px;padding:20px;">
          <h4 style="font-weight:700;margin-bottom:14px;">Input Coordinates</h4>
          <div class="form-group"><label>Input Format</label>
            <select id="mf-format">
              <option value="dd">Decimal Degrees (e.g. 7.757)</option>
              <option value="dms">DMS (e.g. 7 45 25.5)</option>
              <option value="ddm">DDM (e.g. 7 45.425)</option>
            </select>
          </div>
          <div class="form-group"><label>Latitude</label><input id="mf-lat" placeholder="7.75771146" class="mono"></div>
          <div class="form-group"><label>Longitude</label><input id="mf-lon" placeholder="4.53887695" class="mono"></div>
          <button class="btn btn-orange btn-full" onclick="convertMultiFormat()">Convert All Formats â†’</button>
        </div>
        <div style="background:#f8fafc;border-radius:12px;padding:20px;">
          <h4 style="font-weight:700;margin-bottom:14px;">All Output Formats</h4>
          <div id="mf-results" style="font-size:0.82rem;"></div>
        </div>
      </div>
    </div>

    <!-- Traverse -->
    <div class="coord-pane" id="cp-traverse">
      <div style="background:#f0fdfa;border-radius:12px;padding:20px;">
        <h4 style="font-weight:700;margin-bottom:8px;">ğŸ“ Closed Traverse Computation</h4>
        <p style="font-size:0.82rem;color:var(--text2);margin-bottom:14px;">Bowditch/Compass rule adjustment applied. Enter traverse legs and start coordinates.</p>
        <div class="form-row">
          <div class="form-group"><label>Start Northing (m)</label><input id="trav-n0" type="number" step="0.001" placeholder="1000.000" class="mono"></div>
          <div class="form-group"><label>Start Easting (m)</label><input id="trav-e0" type="number" step="0.001" placeholder="1000.000" class="mono"></div>
        </div>
        <button class="btn btn-green btn-sm" onclick="addTravLeg()" style="margin-bottom:10px;">+ Add Leg</button>
        <div id="trav-legs" style="margin-bottom:12px;display:flex;flex-direction:column;gap:8px;"></div>
        <div class="btn-grid">
          <button class="btn btn-primary" onclick="computeTraverse()">Compute Traverse</button>
          <button class="btn btn-gray" onclick="clearTraverse()">Clear Legs</button>
        </div>
        <div class="result-box" id="trav-result" style="margin-top:12px;overflow-x:auto;"></div>
      </div>
    </div>

    <!-- Area Calculator -->
    <div class="coord-pane" id="cp-area">
      <div style="background:#faf5ff;border-radius:12px;padding:20px;">
        <h4 style="font-weight:700;margin-bottom:14px;">ğŸ“ Area from Coordinates (Shoelace Formula)</h4>
        <p style="font-size:0.82rem;color:var(--text2);margin-bottom:12px;">Enter N, E coordinate pairs (one per line)</p>
        <div class="form-group"><label>Northing values (one per line)</label><textarea id="area-n" rows="6" placeholder="857881.968&#10;857882.000&#10;857800.000&#10;857799.000" class="mono"></textarea></div>
        <div class="form-group"><label>Easting values (one per line)</label><textarea id="area-e" rows="6" placeholder="707032.831&#10;707200.000&#10;707200.000&#10;707032.000" class="mono"></textarea></div>
        <button class="btn btn-primary btn-full" onclick="calcAreaFromCoords()">Calculate Area</button>
        <div class="result-box" id="area-result"></div>
      </div>
    </div>

    <!-- Inverse Calc -->
    <div class="coord-pane" id="cp-inverse">
      <div style="background:#fef9f0;border-radius:12px;padding:20px;">
        <h4 style="font-weight:700;margin-bottom:14px;">ğŸ”„ Inverse Calculation (Distance & Bearing)</h4>
        <div class="card-grid">
          <div>
            <h5 style="font-size:0.85rem;font-weight:700;margin-bottom:10px;">Point A</h5>
            <div class="form-group"><label>Northing A (m)</label><input id="inv-n1" type="number" step="0.001" placeholder="1000.000" class="mono"></div>
            <div class="form-group"><label>Easting A (m)</label><input id="inv-e1" type="number" step="0.001" placeholder="1000.000" class="mono"></div>
          </div>
          <div>
            <h5 style="font-size:0.85rem;font-weight:700;margin-bottom:10px;">Point B</h5>
            <div class="form-group"><label>Northing B (m)</label><input id="inv-n2" type="number" step="0.001" placeholder="1100.000" class="mono"></div>
            <div class="form-group"><label>Easting B (m)</label><input id="inv-e2" type="number" step="0.001" placeholder="1100.000" class="mono"></div>
          </div>
        </div>
        <button class="btn btn-orange btn-full" onclick="calcInverse()">Calculate Inverse</button>
        <div class="result-box" id="inv-result"></div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PLOT LAYOUT TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->


<div class="tab-content" id="tab-plot">
  <div class="card">
    <div class="card-header"><span class="card-icon">ğŸ“</span><h2>Professional Survey Plot Layout Generator</h2></div>
    <p style="font-size:0.85rem;color:var(--text2);margin-bottom:16px;">Generate a scaled plot diagram with survey coordinates, dimensions, and professional watermark. Export as PNG.</p>
    <div class="form-row">
      <div class="form-group"><label>Plot Owner / Title Holder</label><input id="plotOwner" type="text" placeholder="Full legal name"></div>
      <div class="form-group"><label>Plot Address / Survey Number</label><input id="plotAddress" type="text" placeholder="Plot address or survey description"></div>
    </div>
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px;flex-wrap:wrap;">
      <span style="font-size:0.8rem;color:var(--text2);font-weight:600;">Start Coordinate Mode:</span>
      <button class="btn btn-sm" id="plotModeLatLon" style="background:var(--accent);color:#fff;font-size:0.78rem;padding:4px 12px;" onclick="setPlotMode('latlon')">ğŸ“Œ Lat/Lon</button>
      <button class="btn btn-sm" id="plotModeNE" style="background:var(--border);color:var(--text);font-size:0.78rem;padding:4px 12px;" onclick="setPlotMode('ne')">ğŸ“ Northing/Easting</button>
    </div>
    <div class="form-row">
      <div class="form-group"><label id="plotField1Lbl">Start Latitude (Â°)</label><input id="plotLat" type="number" step="0.0000001" placeholder="7.75771146" class="mono"></div>
      <div class="form-group"><label id="plotField2Lbl">Start Longitude (Â°)</label><input id="plotLon" type="number" step="0.0000001" placeholder="4.53887695" class="mono"></div>
    </div>
    <div class="form-row three">
      <div class="form-group"><label>Plot Width (m)</label><input id="plotWidth" type="number" value="15" step="0.1"></div>
      <div class="form-group"><label>Plot Depth (m)</label><input id="plotDepth" type="number" value="30" step="0.1"></div>
      <div class="form-group"><label>Orientation (Â°)</label><input id="plotOrient" type="number" value="0" step="0.1" placeholder="0 = North"></div>
    </div>
    <div class="form-row">
      <div class="form-group"><label>Scale</label><select id="plotScale"><option value="500">1:500</option><option value="1000">1:1000</option><option value="2500">1:2500</option><option value="5000">1:5000</option></select></div>
      <div class="form-group"><label>Plot Title</label><input id="plotTitle" type="text" placeholder="e.g. Survey Plan Showing..."></div>
    </div>
    <div class="btn-grid" style="margin-bottom:14px;">
      <button class="btn btn-primary" onclick="generatePlot()">ğŸ“ Generate Layout</button>
      <button class="btn btn-blue" onclick="exportPlot()">ğŸ’¾ Export PNG</button>
      <button class="btn btn-green" onclick="calcCanvasArea()">ğŸ“Š Calculate Area</button>
      <button class="btn btn-gray" onclick="clearPlotCanvas()">ğŸ—‘ï¸ Clear</button>
    </div>
    <canvas id="plotCanvas" width="900" height="600"></canvas>
    <div class="result-box" id="plotAreaResult" style="margin-top:12px;"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GIS TOOLS TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->


<div class="tab-content" id="tab-verify">
  <div class="card">
    <div class="card-header"><span class="card-icon">ğŸ”’</span><h2>C of O Verification System</h2></div>
    <div style="background:#fffbeb;border-left:4px solid #d97706;border-radius:8px;padding:14px;margin-bottom:20px;font-size:0.85rem;">
      <strong>âš ï¸ Notice:</strong> This system verifies SurveyPro Elite-generated survey codes. For official government Certificate of Occupancy, contact your state land registry (Lagos, Abuja, etc.).
    </div>

    <div style="max-width:500px;">
      <div class="form-group">
        <label style="font-size:1rem;font-weight:700;">Enter Verification Code</label>
        <input id="verifyInput" type="text" placeholder="e.g. NGS-MLP6LZZD" class="mono" style="font-size:1.1rem;letter-spacing:0.08em;text-transform:uppercase;" oninput="this.value=this.value.toUpperCase()">
      </div>
      <button class="btn btn-primary btn-full btn-lg" onclick="verifySurveyCode()">ğŸ” Verify Code</button>
    </div>

    <div id="verifyResult" style="margin-top:20px;"></div>

    <div style="margin-top:24px;background:var(--surface3);border:2px solid #bfdbfe;border-radius:12px;padding:20px;">
      <h4 style="font-weight:700;margin-bottom:8px;">ğŸ“‹ Professional C of O Assistance</h4>
      <p style="font-size:0.85rem;color:var(--text2);margin-bottom:14px;">Need full C of O documentation, land title processing, or government registry coordination? Our team handles it end-to-end.</p>
      <div class="btn-grid">
        <button class="btn" style="background:#25D366;color:#fff;" onclick="requestCofO()">ğŸ“± WhatsApp Inquiry</button>
        <button class="btn btn-blue" onclick="emailCofO()">ğŸ“§ Email Inquiry</button>
      </div>
    </div>

    <div id="qrSection" style="display:none;margin-top:20px;text-align:center;">
      <h4 style="font-weight:700;margin-bottom:10px;">ğŸ“± Scan to Verify</h4>
      <div id="qrContainer"></div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     EQUIPMENT TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->


<div class="tab-content" id="tab-reports">
  <div class="card">
    <div class="card-header"><span class="card-icon">ğŸ“„</span><h2>Professional Reports Generator</h2></div>
    <p style="color:var(--text2);font-size:0.88rem;margin-bottom:20px;">Generate professional, printable survey reports with official formatting. Select a saved survey, add surveyor details, and export or email.</p>
    <div class="form-row">
      <div class="form-group"><label>Select Survey</label>
        <select id="reportSurveySelect"><option value="">â€” Select a saved survey â€”</option></select>
      </div>
      <div class="form-group"><label>Report Type</label>
        <select id="reportType">
          <option>Full Survey Report</option>
          <option>Summary Certificate</option>
          <option>Client Invoice</option>
          <option>Field Data Sheet</option>
        </select>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group"><label>Surveyor's Name</label><input id="rptSurveyor" type="text" placeholder="Licensed Surveyor Name" value="Arnold Opusunju"></div>
      <div class="form-group"><label>License / SURCON Number</label><input id="rptLicense" type="text" placeholder="SURCON/2026/XXXXX"></div>
    </div>
    <div class="form-group"><label>Report Footer / Seal Statement</label><textarea id="rptFooter" rows="2" placeholder="This survey was conducted in accordance with SURCON standards and the provisions of the Survey Coordination Act..."></textarea></div>
    <div class="btn-grid">
      <button class="btn btn-primary" onclick="generateReport()">ğŸ“„ Generate Report</button>
      <button class="btn btn-blue" onclick="printReport()">ğŸ–¨ï¸ Print</button>
      <button class="btn btn-green" onclick="emailReport()">ğŸ“§ Email Report</button>
      <button class="btn btn-gray" onclick="previewReport()">ğŸ‘ï¸ Preview</button>
    </div>
    <div id="reportPreview" style="margin-top:20px;"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PRICING TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->


<div class="tab-content" id="tab-history">
  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:10px;">
      <div class="card-header" style="margin-bottom:0;"><span class="card-icon">ğŸ“</span><h2>Survey History</h2></div>
      <div style="display:flex;gap:8px;">
        <button class="btn btn-blue btn-sm" onclick="exportAllSurveysJSON()">â¬‡ï¸ Export All</button>
        <button class="btn btn-red btn-sm" onclick="clearAllHistory()">ğŸ—‘ï¸ Clear All</button>
      </div>
    </div>
    <div id="historyContent">
      <div style="text-align:center;padding:60px 20px;color:var(--text3);">
        <div style="font-size:3rem;margin-bottom:12px;">ğŸ“‚</div>
        <p style="font-size:1.1rem;font-weight:600;">No saved surveys yet</p>
        <p style="font-size:0.85rem;margin-top:6px;">Complete and save surveys to see them here</p>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     REPORTS TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->


<div class="tab-content" id="tab-gis">
  <div class="card">
    <div class="card-header"><span class="card-icon">ğŸ—ºï¸</span><h2>GIS & Remote Sensing Services</h2></div>
    <p style="color:var(--text2);font-size:0.88rem;margin-bottom:20px;">Refer clients to our licensed GIS partners. <strong>Earn 50% on every successful referral</strong> â€” your 50% paid to Opay: 8117554948 Â· partner 50% goes to the licensed GIS firm.</p>

    <div class="card-grid">
      <div class="gis-card"><div style="font-size:2rem;margin-bottom:8px;">ğŸ›°ï¸</div>
        <h4 style="font-weight:700;margin-bottom:6px;">Satellite Data Access</h4>
        <p style="font-size:0.82rem;color:var(--text2);margin-bottom:12px;">Multispectral imagery, NDVI analysis, land cover classification, change detection (2mâ€“30m resolution).</p>
        <div style="font-size:0.75rem;color:var(--text3);margin-bottom:10px;">ğŸ’° From â‚¦15,000 Â· Your 50%: â‚¦7,500</div>
        <button class="btn btn-blue btn-full btn-sm" onclick="requestGIS('Satellite Data Access','15000')">Request Service</button></div>

      <div class="gis-card"><div style="font-size:2rem;margin-bottom:8px;">ğŸŒ¾</div>
        <h4 style="font-weight:700;margin-bottom:6px;">Agricultural Monitoring</h4>
        <p style="font-size:0.82rem;color:var(--text2);margin-bottom:12px;">Crop health (NDVI/NDWI), yield prediction, irrigation optimization, precision farming reports.</p>
        <div style="font-size:0.75rem;color:var(--text3);margin-bottom:10px;">ğŸ’° From â‚¦20,000 Â· Your 50%: â‚¦10,000</div>
        <button class="btn btn-green btn-full btn-sm" onclick="requestGIS('Agricultural Monitoring','20000')">Request Service</button></div>

      <div class="gis-card"><div style="font-size:2rem;margin-bottom:8px;">ğŸ™ï¸</div>
        <h4 style="font-weight:700;margin-bottom:6px;">Urban Planning GIS</h4>
        <p style="font-size:0.82rem;color:var(--text2);margin-bottom:12px;">Land use mapping, infrastructure planning, zoning analysis, urban growth modelling & visualizations.</p>
        <div style="font-size:0.75rem;color:var(--text3);margin-bottom:10px;">ğŸ’° From â‚¦35,000 Â· Your 50%: â‚¦17,500</div>
        <button class="btn btn-primary btn-full btn-sm" onclick="requestGIS('Urban Planning GIS','35000')">Request Service</button></div>

      <div class="gis-card"><div style="font-size:2rem;margin-bottom:8px;">ğŸŒŠ</div>
        <h4 style="font-weight:700;margin-bottom:6px;">Flood Risk Assessment</h4>
        <p style="font-size:0.82rem;color:var(--text2);margin-bottom:12px;">Hydrological modelling, DEM extraction, drainage analysis, flood susceptibility mapping (FEMA-aligned).</p>
        <div style="font-size:0.75rem;color:var(--text3);margin-bottom:10px;">ğŸ’° From â‚¦40,000 Â· Your 50%: â‚¦20,000</div>
        <button class="btn btn-blue btn-full btn-sm" onclick="requestGIS('Flood Risk Assessment','40000')">Request Service</button></div>

      <div class="gis-card"><div style="font-size:2rem;margin-bottom:8px;">ğŸ—‚ï¸</div>
        <h4 style="font-weight:700;margin-bottom:6px;">Cadastral Mapping</h4>
        <p style="font-size:0.82rem;color:var(--text2);margin-bottom:12px;">Property boundary delineation, title surveys, land registry GIS database, parcel indexing.</p>
        <div style="font-size:0.75rem;color:var(--text3);margin-bottom:10px;">ğŸ’° From â‚¦25,000 Â· Your 50%: â‚¦12,500</div>
        <button class="btn btn-orange btn-full btn-sm" onclick="requestGIS('Cadastral Mapping','25000')">Request Service</button></div>

      <div class="gis-card"><div style="font-size:2rem;margin-bottom:8px;">ğŸŒ¿</div>
        <h4 style="font-weight:700;margin-bottom:6px;">Environmental Impact (EIA)</h4>
        <p style="font-size:0.82rem;color:var(--text2);margin-bottom:12px;">Deforestation monitoring, biodiversity mapping, habitat analysis, NESREA-compliant EIA reports.</p>
        <div style="font-size:0.75rem;color:var(--text3);margin-bottom:10px;">ğŸ’° From â‚¦50,000 Â· Your 50%: â‚¦25,000</div>
        <button class="btn btn-green btn-full btn-sm" onclick="requestGIS('Environmental Impact Assessment','50000')">Request Service</button></div>

      <div class="gis-card"><div style="font-size:2rem;margin-bottom:8px;">ğŸš</div>
        <h4 style="font-weight:700;margin-bottom:6px;">Drone Photogrammetry</h4>
        <p style="font-size:0.82rem;color:var(--text2);margin-bottom:12px;">Aerial mapping, orthophoto, DSM/DTM generation, volumetric analysis, 3D point cloud.</p>
        <div style="font-size:0.75rem;color:var(--text3);margin-bottom:10px;">ğŸ’° From â‚¦80,000 Â· Your 50%: â‚¦40,000</div>
        <button class="btn btn-primary btn-full btn-sm" onclick="requestGIS('Drone Photogrammetry','80000')">Request Service</button></div>

      <div class="gis-card"><div style="font-size:2rem;margin-bottom:8px;">ğŸ—ï¸</div>
        <h4 style="font-weight:700;margin-bottom:6px;">BIM & 3D Modelling</h4>
        <p style="font-size:0.82rem;color:var(--text2);margin-bottom:12px;">Building Information Modelling, 3D laser scan to BIM, as-built documentation, clash detection.</p>
        <div style="font-size:0.75rem;color:var(--text3);margin-bottom:10px;">ğŸ’° From â‚¦60,000 Â· Your 50%: â‚¦30,000</div>
        <button class="btn btn-blue btn-full btn-sm" onclick="requestGIS('BIM 3D Modelling','60000')">Request Service</button></div>
    </div>

    <div style="margin-top:20px;background:#0f172a;color:#fff;border-radius:var(--radius);padding:20px;text-align:center;">
      <p style="font-weight:700;font-size:1.05rem;">ğŸ“ Direct Contact: Arnold Opusunju</p>
      <p style="opacity:0.7;font-size:0.85rem;margin-top:6px;">+234-811-755-4948 Â· <a href="/cdn-cgi/l/email-protection#bbd4cbcec8dac9d5d4d7dffbdcd6dad2d795d8d4d6" style="color:#fff;"><span class="__cf_email__" data-cfemail="6d021d181e0c1f030201092d0a000c0401430e0200">[email&#160;protected]</span></a> Â· Opay: 8117554948</p>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     C of O VERIFY TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->


<div class="tab-content" id="tab-tools">
  <div class="card" style="border-left:4px solid #7c3aed;">
    <div class="card-header"><span class="card-icon">ğŸ”§</span><h2>Advanced Engineering Tools</h2></div>
    <p style="color:var(--text2);font-size:0.88rem;margin-bottom:20px;">Professional-grade engineering calculations for field surveyors. All computations follow SURCON standards.</p>

    <!-- Sub Tabs -->
    <div class="sub-tabs">
      <button class="sub-tab active" id="tt-slope" onclick="showToolPane('slope')">ğŸ“ Slope & Grade</button>
      <button class="sub-tab" id="tt-stakeout" onclick="showToolPane('stakeout')">ğŸ¯ Stakeout</button>
      <button class="sub-tab" id="tt-curve" onclick="showToolPane('curve')">ğŸŒ€ Horizontal Curve</button>
      <button class="sub-tab" id="tt-volume" onclick="showToolPane('volume')">ğŸ“¦ Volume Calc</button>
      <button class="sub-tab" id="tt-trig" onclick="showToolPane('trig')">ğŸ“ Trig Levelling</button>
      <button class="sub-tab" id="tt-scale" onclick="showToolPane('scale')">ğŸ—ºï¸ Map Scale</button>
    </div>

    <!-- Slope & Grade -->
    <div class="coord-pane active" id="tp-slope">
      <div style="background:#f0f9ff;border-radius:12px;padding:20px;">
        <h4 style="font-weight:700;margin-bottom:14px;">ğŸ“ Slope, Grade & Cross-Fall Calculator</h4>
        <div class="form-row three">
          <div class="form-group"><label>Elevation Start (m)</label><input id="slope-e1" type="number" step="0.001" placeholder="100.000" class="mono"></div>
          <div class="form-group"><label>Elevation End (m)</label><input id="slope-e2" type="number" step="0.001" placeholder="103.500" class="mono"></div>
          <div class="form-group"><label>Horizontal Distance (m)</label><input id="slope-dist" type="number" step="0.001" placeholder="100.000" class="mono"></div>
        </div>
        <button class="btn btn-blue btn-full" onclick="calcSlope()">Calculate Slope</button>
        <div class="result-box" id="slope-result"></div>
      </div>
    </div>

    <!-- Stakeout -->
    <div class="coord-pane" id="tp-stakeout">
      <div style="background:#f0fdf4;border-radius:12px;padding:20px;">
        <h4 style="font-weight:700;margin-bottom:14px;">ğŸ¯ Stakeout Data Generator</h4>
        <div class="card-grid">
          <div>
            <h5 style="font-size:0.85rem;font-weight:700;margin-bottom:10px;">Instrument Station</h5>
            <div class="form-group"><label>Station Northing (m)</label><input id="so-sn" type="number" step="0.001" placeholder="1000.000" class="mono"></div>
            <div class="form-group"><label>Station Easting (m)</label><input id="so-se" type="number" step="0.001" placeholder="1000.000" class="mono"></div>
          </div>
          <div>
            <h5 style="font-size:0.85rem;font-weight:700;margin-bottom:10px;">Target Point</h5>
            <div class="form-group"><label>Target Northing (m)</label><input id="so-tn" type="number" step="0.001" placeholder="1050.000" class="mono"></div>
            <div class="form-group"><label>Target Easting (m)</label><input id="so-te" type="number" step="0.001" placeholder="1050.000" class="mono"></div>
          </div>
        </div>
        <button class="btn btn-green btn-full" onclick="generateStakeout()">Generate Stakeout Data</button>
        <div class="result-box" id="so-result"></div>
      </div>
    </div>

    <!-- Horizontal Curve -->
    <div class="coord-pane" id="tp-curve">
      <div style="background:#faf5ff;border-radius:12px;padding:20px;">
        <h4 style="font-weight:700;margin-bottom:14px;">ğŸŒ€ Horizontal Curve Calculator</h4>
        <div class="form-row three">
          <div class="form-group"><label>Radius (m)</label><input id="hc-r" type="number" step="0.1" placeholder="200.0" class="mono"></div>
          <div class="form-group"><label>Deflection Angle (Â°)</label><input id="hc-delta" type="number" step="0.001" placeholder="45.000" class="mono"></div>
          <div class="form-group"><label>Chainage of PC (m)</label><input id="hc-pc" type="number" step="0.001" placeholder="1000.000" class="mono"></div>
        </div>
        <button class="btn btn-primary btn-full" onclick="calcHorizCurve()">Calculate Curve Elements</button>
        <div class="result-box" id="hc-result"></div>
      </div>
    </div>

    <!-- Volume -->
    <div class="coord-pane" id="tp-volume">
      <div style="background:#fffbeb;border-radius:12px;padding:20px;">
        <h4 style="font-weight:700;margin-bottom:14px;">ğŸ“¦ Earthworks Volume Calculator (Prismoidal)</h4>
        <p style="font-size:0.82rem;color:var(--text2);margin-bottom:12px;">Uses Prismoidal formula: V = L/6 Ã— (A1 + 4Am + A2)</p>
        <div class="form-row">
          <div class="form-group"><label>Area at Section 1 (mÂ²)</label><input id="vol-a1" type="number" step="0.01" placeholder="25.00" class="mono"></div>
          <div class="form-group"><label>Area at Midpoint (mÂ²)</label><input id="vol-am" type="number" step="0.01" placeholder="30.00" class="mono"></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>Area at Section 2 (mÂ²)</label><input id="vol-a2" type="number" step="0.01" placeholder="28.00" class="mono"></div>
          <div class="form-group"><label>Length Between Sections (m)</label><input id="vol-l" type="number" step="0.01" placeholder="20.00" class="mono"></div>
        </div>
        <button class="btn btn-orange btn-full" onclick="calcVolume()">Calculate Volume</button>
        <div class="result-box" id="vol-result"></div>
      </div>
    </div>

    <!-- Trig Levelling -->
    <div class="coord-pane" id="tp-trig">
      <div style="background:#f0fdfa;border-radius:12px;padding:20px;">
        <h4 style="font-weight:700;margin-bottom:14px;">ğŸ“ Trigonometric Levelling</h4>
        <div class="form-row">
          <div class="form-group"><label>Instrument Height (m)</label><input id="tl-hi" type="number" step="0.001" placeholder="1.500" class="mono"></div>
          <div class="form-group"><label>Target Height (m)</label><input id="tl-th" type="number" step="0.001" placeholder="1.800" class="mono"></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>Slope Distance (m)</label><input id="tl-sd" type="number" step="0.001" placeholder="250.000" class="mono"></div>
          <div class="form-group"><label>Vertical Angle (Â°)</label><input id="tl-va" type="number" step="0.0001" placeholder="3.5000" class="mono"></div>
        </div>
        <div class="form-group"><label>Station Elevation (m)</label><input id="tl-elev" type="number" step="0.001" placeholder="100.000" class="mono"></div>
        <button class="btn btn-green btn-full" onclick="calcTrigLevel()">Calculate Elevation</button>
        <div class="result-box" id="tl-result"></div>
      </div>
    </div>

    <!-- Map Scale -->
    <div class="coord-pane" id="tp-scale">
      <div style="background:#fef9f0;border-radius:12px;padding:20px;">
        <h4 style="font-weight:700;margin-bottom:14px;">ğŸ—ºï¸ Map Scale & Distance Converter</h4>
        <div class="form-row">
          <div class="form-group"><label>Scale Denominator (e.g. 5000 for 1:5000)</label><input id="ms-scale" type="number" placeholder="5000" class="mono" value="5000"></div>
          <div class="form-group"><label>Map Distance (mm)</label><input id="ms-map" type="number" step="0.01" placeholder="100" class="mono"></div>
        </div>
        <button class="btn btn-primary btn-full" onclick="calcMapScale()">Convert Scale</button>
        <div class="result-box" id="ms-result"></div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â• FOOTER â•â•â• (tabs continue below) -->



<!-- â•â•â• AUTH MODAL â•â•â• -->
<div class="modal-bg" id="authModal">
  <div class="modal-box" style="max-width:420px;">
    <div style="text-align:center;padding:16px 0 8px;">
      <div style="font-size:2.2rem;margin-bottom:6px;">ğŸ¯</div>
      <h2 class="display" style="font-size:1.4rem;font-weight:800;margin-bottom:4px;">SurveyPro Elite</h2>
      <p style="font-size:0.78rem;color:var(--text2);margin-bottom:14px;">Nigeria's #1 Professional Surveying Platform<br>Sign in or create a free account to get started</p>
    </div>
    <div class="auth-tabs">
      <button class="auth-tab active" onclick="switchAuth('login')">Sign In</button>
      <button class="auth-tab" onclick="switchAuth('register')">Create Free Account</button>
    </div>
    
    <!-- Login -->
    <div class="auth-pane active" id="auth-login">
      <div class="form-group"><label>Email Address</label><input type="email" id="loginEmail" placeholder="your@email.com" autocomplete="email" onkeydown="if(event.key==='Enter')doLogin()"></div>
      <div class="form-group"><label>Password</label><input type="password" id="loginPwd" placeholder="Your password" autocomplete="current-password" onkeydown="if(event.key==='Enter')doLogin()"></div>
      <button class="btn btn-primary btn-full" onclick="doLogin()">ğŸ” Sign In</button>
      <div class="auth-divider"><span>or continue with</span></div>
      <button class="btn btn-full" style="background:#4285f4;color:#fff;" onclick="googleAuth()">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="white"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
        Sign in with Google
      </button>
      <p style="text-align:center;font-size:0.78rem;color:var(--text3);margin-top:12px;"><a href="#" onclick="showForgotPwd()" style="color:var(--accent2);">Forgot password?</a></p>
    </div>
    
    <!-- Register -->
    <div class="auth-pane" id="auth-register">
      <div class="form-row">
        <div class="form-group"><label>First Name</label><input type="text" id="regFirst" placeholder="First name"></div>
        <div class="form-group"><label>Last Name</label><input type="text" id="regLast" placeholder="Last name"></div>
      </div>
      <div class="form-group"><label>Email</label><input type="email" id="regEmail" placeholder="your@email.com" autocomplete="email"></div>
      <div class="form-group"><label>Phone</label><input type="tel" id="regPhone" placeholder="080XXXXXXXX"></div>
      <div class="form-group"><label>Password (min 8 chars)</label><input type="password" id="regPwd" placeholder="Create password" autocomplete="new-password"></div>
      <div class="form-group"><label>Role</label>
        <select id="regRole"><option value="surveyor">Licensed Surveyor</option><option value="client">Land Owner / Client</option></select>
      </div>
      <div class="form-group" id="licenseGroup"><label>SURCON License Number</label><input type="text" id="regLicense" placeholder="SURCON/XXXX/XXXXX"></div>
      <button class="btn btn-green btn-full" onclick="doRegister()">âœ… Create Free Account</button>
      <p style="text-align:center;font-size:0.78rem;color:var(--text3);margin-top:10px;">By registering, you agree to our Terms of Service.</p>
    </div>
    <!-- Skip / Use Without Account -->
    <div style="text-align:center;padding:12px 0 4px;border-top:1px solid var(--border);margin-top:12px;">
      <button onclick="closeAuthModal()" style="background:none;border:none;color:var(--text3);font-size:0.78rem;cursor:pointer;font-family:inherit;text-decoration:underline;">Continue without signing in â†’</button>
    </div>
  </div>
</div>


<!-- â•â•â• PAY SERVICES TAB â•â•â• -->


<div class="tab-content" id="tab-jobs">
  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:10px;">
      <div class="card-header" style="margin-bottom:0;"><span class="card-icon">ğŸ’¼</span><h2>Survey Job Board â€” All 36 States + FCT</h2></div>
      <div style="display:flex;gap:8px;flex-wrap:wrap;">
        <button class="btn btn-sm" style="background:linear-gradient(135deg,#0ea5e9,#0284c7);color:#fff;font-weight:700;" onclick="detectLocationForJobs()">ğŸ“ Jobs Near Me</button>
        <button class="btn btn-green btn-sm" onclick="postJob()">â• Post a Job</button>
        <button class="btn btn-blue btn-sm" onclick="initJobBoard()">ğŸ”„ Refresh</button>
      </div>
    </div>
    <div id="jobLocationBanner" style="display:none;background:linear-gradient(135deg,#f0fdf4,#dcfce7);border:2px solid #86efac;border-radius:12px;padding:12px 16px;margin-bottom:16px;align-items:center;gap:10px;">
      <span style="font-size:1.3rem;">ğŸ“</span>
      <div style="flex:1;"><div style="font-weight:700;font-size:0.85rem;" id="jobLocationText">Detecting location...</div><div style="font-size:0.72rem;color:#16a34a;">Showing jobs in your state</div></div>
      <button onclick="clearJobLocation()" style="background:none;border:1px solid #86efac;border-radius:6px;padding:4px 10px;font-size:0.72rem;cursor:pointer;color:#166534;">âœ• Clear Filter</button>
    </div>
    <div style="background:#eff6ff;border:2px solid #bfdbfe;border-radius:12px;padding:14px;margin-bottom:16px;">
      <p style="font-size:0.82rem;color:var(--accent2);font-weight:700;margin-bottom:4px;">ğŸ’¼ How It Works</p>
      <p style="font-size:0.78rem;color:var(--text2);">Land owners post jobs â†’ Licensed surveyors apply â†’ Platform earns <strong>10%</strong> on completion. All 36 states + FCT. Tap <strong>ğŸ“ Jobs Near Me</strong> to auto-detect your state.</p>
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-bottom:16px;" class="state-filter">
      <div class="form-group" style="margin:0;"><label>State / Location</label>
        <select id="jobStateFilter" onchange="filterJobs()">
          <option value="">All States</option>
          <option>Abia</option><option>Adamawa</option><option>Akwa Ibom</option><option>Anambra</option>
          <option>Bauchi</option><option>Bayelsa</option><option>Benue</option><option>Borno</option>
          <option>Cross River</option><option>Delta</option><option>Ebonyi</option><option>Edo</option>
          <option>Ekiti</option><option>Enugu</option><option>FCT - Abuja</option><option>Gombe</option>
          <option>Imo</option><option>Jigawa</option><option>Kaduna</option><option>Kano</option>
          <option>Katsina</option><option>Kebbi</option><option>Kogi</option><option>Kwara</option>
          <option>Lagos</option><option>Nasarawa</option><option>Niger</option><option>Ogun</option>
          <option>Ondo</option><option>Osun</option><option>Oyo</option><option>Plateau</option>
          <option>Rivers</option><option>Sokoto</option><option>Taraba</option><option>Yobe</option>
          <option>Zamfara</option>
        </select>
      </div>
      <div class="form-group" style="margin:0;"><label>Category</label>
        <select id="jobCatFilter" onchange="filterJobs()"><option value="">All Categories</option>
          <option>Cadastral Survey</option><option>Topographic Survey</option><option>Boundary Survey</option>
          <option>Engineering Survey</option><option>Hydrographic Survey</option><option>GIS Mapping</option>
          <option>Aerial/Drone Survey</option><option>C of O Processing</option>
        </select>
      </div>
      <div class="form-group" style="margin:0;"><label>Priority</label>
        <select id="jobUrgFilter" onchange="filterJobs()"><option value="">All Priority</option>
          <option value="urgent">ğŸ”´ Urgent</option><option value="high">ğŸŸ  High</option>
          <option value="medium">ğŸŸ¡ Medium</option><option value="low">ğŸŸ¢ Low</option>
        </select>
      </div>
    </div>
    <div id="jobBoardContent"><div style="text-align:center;padding:40px;color:var(--text3);">Loading jobs...</div></div>
  </div>
</div>


<div class="tab-content" id="tab-directory">
  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:10px;">
      <div class="card-header" style="margin-bottom:0;"><span class="card-icon">ğŸ—‚ï¸</span><h2>Surveyor Directory â€” All 36 States + FCT</h2></div>
      <div style="display:flex;gap:8px;">
        <button class="btn btn-sm" style="background:linear-gradient(135deg,#0ea5e9,#0284c7);color:#fff;font-weight:700;" onclick="detectLocationForDirectory()">ğŸ“ Near Me</button>
        <button class="btn btn-green btn-sm" onclick="registerAsSurveyor()">â• Register</button>
      </div>
    </div>
    <div id="dirLocationBanner" style="display:none;background:linear-gradient(135deg,#f0fdf4,#dcfce7);border:2px solid #86efac;border-radius:12px;padding:12px 16px;margin-bottom:16px;align-items:center;gap:10px;">
      <span style="font-size:1.3rem;">ğŸ“</span>
      <div style="flex:1;"><div style="font-weight:700;font-size:0.85rem;" id="dirLocationText">Detecting location...</div><div style="font-size:0.72rem;color:#16a34a;">Showing surveyors in your state</div></div>
      <button onclick="clearDirLocation()" style="background:none;border:1px solid #86efac;border-radius:6px;padding:4px 10px;font-size:0.72rem;cursor:pointer;color:#166534;">âœ• Clear Filter</button>
    </div>
    <p style="color:var(--text2);font-size:0.85rem;margin-bottom:16px;">Find and hire SURCON-licensed professional surveyors near you. Verified credentials. Real reviews. All 36 states + FCT.</p>
    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-bottom:20px;" class="state-filter">
      <div class="form-group" style="margin:0;"><label>State</label>
        <select id="dirStateFilter" onchange="filterDirectory()">
          <option value="">All States</option>
          <option>Abia</option><option>Adamawa</option><option>Akwa Ibom</option><option>Anambra</option>
          <option>Bauchi</option><option>Bayelsa</option><option>Benue</option><option>Borno</option>
          <option>Cross River</option><option>Delta</option><option>Ebonyi</option><option>Edo</option>
          <option>Ekiti</option><option>Enugu</option><option>FCT - Abuja</option><option>Gombe</option>
          <option>Imo</option><option>Jigawa</option><option>Kaduna</option><option>Kano</option>
          <option>Katsina</option><option>Kebbi</option><option>Kogi</option><option>Kwara</option>
          <option>Lagos</option><option>Nasarawa</option><option>Niger</option><option>Ogun</option>
          <option>Ondo</option><option>Osun</option><option>Oyo</option><option>Plateau</option>
          <option>Rivers</option><option>Sokoto</option><option>Taraba</option><option>Yobe</option>
          <option>Zamfara</option>
        </select>
      </div>
      <div class="form-group" style="margin:0;"><label>Specialization</label>
        <select id="dirSpecFilter" onchange="filterDirectory()"><option value="">All Specializations</option>
          <option>Cadastral Survey</option><option>Topographic Survey</option><option>Boundary Survey</option>
          <option>Engineering Survey</option><option>GIS Mapping</option><option>Hydrographic Survey</option>
          <option>Photogrammetric Survey</option><option>Environmental Survey</option><option>Aerial/Drone Survey</option>
        </select>
      </div>
      <div class="form-group" style="margin:0;"><label>Min Rating</label>
        <select id="dirRatingFilter" onchange="filterDirectory()"><option value="">Any Rating</option>
          <option value="4.5">â­ 4.5+</option><option value="4.0">â­ 4.0+</option><option value="3.5">â­ 3.5+</option>
        </select>
      </div>
    </div>
    <div class="card-grid" id="directoryContent"><div style="text-align:center;padding:40px;color:var(--text3);">Loading directory...</div></div>
  </div>
</div>


<div class="tab-content" id="tab-equipment" data-nearme="true">
  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;flex-wrap:wrap;gap:8px;">
      <div class="card-header" style="margin-bottom:0;"><span class="card-icon">âš™ï¸</span><h2>Equipment Rental â€” All 36 States</h2></div>
      <button class="btn btn-sm" style="background:linear-gradient(135deg,#0ea5e9,#0284c7);color:#fff;font-weight:700;" onclick="detectLocationForEquipment()">ğŸ“ Near Me</button>
    </div>
    <div id="equipLocationBanner" style="display:none;background:linear-gradient(135deg,#f0fdf4,#dcfce7);border:2px solid #86efac;border-radius:10px;padding:10px 14px;margin-bottom:12px;align-items:center;gap:8px;">
      <span>ğŸ“</span><div style="flex:1;font-size:0.82rem;font-weight:600;" id="equipLocationText">Detecting...</div>
      <button onclick="document.getElementById('equipLocationBanner').style.display='none';" style="background:none;border:1px solid #86efac;border-radius:5px;padding:3px 8px;font-size:0.7rem;cursor:pointer;color:#166534;">âœ•</button>
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px;">
      <div class="form-group" style="margin:0;"><label>Filter by State</label>
        <select id="equipStateFilter" onchange="filterEquipment()">
          <option value="">All States (Nationwide Delivery)</option>
          <option>Abia</option><option>Adamawa</option><option>Akwa Ibom</option><option>Anambra</option>
          <option>Bauchi</option><option>Bayelsa</option><option>Benue</option><option>Borno</option>
          <option>Cross River</option><option>Delta</option><option>Ebonyi</option><option>Edo</option>
          <option>Ekiti</option><option>Enugu</option><option>FCT - Abuja</option><option>Gombe</option>
          <option>Imo</option><option>Jigawa</option><option>Kaduna</option><option>Kano</option>
          <option>Katsina</option><option>Kebbi</option><option>Kogi</option><option>Kwara</option>
          <option>Lagos</option><option>Nasarawa</option><option>Niger</option><option>Ogun</option>
          <option>Ondo</option><option>Osun</option><option>Oyo</option><option>Plateau</option>
          <option>Rivers</option><option>Sokoto</option><option>Taraba</option><option>Yobe</option>
          <option>Zamfara</option>
        </select>
      </div>
      <div class="form-group" style="margin:0;"><label>Equipment Type</label>
        <select id="equipTypeFilter" onchange="filterEquipment()">
          <option value="">All Equipment</option>
          <option>GPS / GNSS</option><option>Total Station</option><option>Drone / UAV</option>
          <option>Digital Level</option><option>Laser Scanner</option><option>Theodolite</option>
        </select>
      </div>
    </div>

    <div class="rev-split">
      <h3>ğŸ’° Revenue Split â€” You Earn 50% on Every Booking</h3>
      <div class="split-row">
        <div><div class="split-label">Your Platform Commission (Arnold)</div><div class="split-detail">Instant transfer Â· Opay: 8117554948</div></div>
        <div style="text-align:center;"><div class="split-pct">50%</div><div style="font-size:0.75rem;opacity:0.75;">of rental price</div></div>
      </div>
      <div class="split-row">
        <div><div class="split-label">Equipment Rental Partner</div><div class="split-detail">Licensed & insured equipment providers</div></div>
        <div style="text-align:center;"><div class="split-pct" style="color:#60a5fa;">50%</div><div style="font-size:0.75rem;opacity:0.75;">of rental price</div></div>
      </div>
      <div style="font-size:0.75rem;text-align:center;margin-top:12px;opacity:0.65;border-top:1px solid rgba(255,255,255,0.15);padding-top:10px;">Customer pays â†’ 50% auto-credited to Opay 8117554948 â†’ 50% goes to licensed equipment partner</div>
    </div>

    <div class="card-grid" id="equipGrid"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     TRAINING TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->


<div class="tab-content" id="tab-training">
  <div class="card">
    <div class="card-header"><span class="card-icon">ğŸ“</span><h2>Professional Training Hub</h2></div>
    <p style="color:var(--text2);font-size:0.88rem;margin-bottom:18px;">Industry-certified courses. <strong>50% commission on every enrollment</strong>. Delivered by global leaders including Autodesk, Trimble, Pix4D, and more.</p>

    <div class="rev-split" style="margin-bottom:20px;">
      <h3>ğŸ’¡ Training Revenue Share</h3>
      <div class="split-row"><div><div class="split-label">Platform Owner (Arnold) Â· Opay: 8117554948</div></div><div class="split-pct">50%</div></div>
      <div class="split-row"><div><div class="split-label">Course / Education Provider</div></div><div class="split-pct" style="color:#60a5fa;">50%</div></div>
    </div>

    <div class="card-grid" id="coursesGrid"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     JOBS TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->


<div class="tab-content" id="tab-payments">
  <div class="section-header">
    <div class="section-tag">ğŸ’³ DIRECT PAYMENT</div>
    <h3>Pay for Survey Services</h3>
    <p>Book a field survey, pay for a collab, or purchase any professional service â€” securely & instantly</p>
  </div>

  <!-- Purpose Tags -->
  <div style="display:flex;flex-wrap:wrap;gap:8px;margin-bottom:20px;justify-content:center;">
    <button class="pay-purpose-tag active" onclick="selectPayPurpose(this,'Boundary Survey ğŸ“')">Boundary Survey ğŸ“</button>
    <button class="pay-purpose-tag" onclick="selectPayPurpose(this,'Topographic Survey ğŸ—ºï¸')">Topographic Survey ğŸ—ºï¸</button>
    <button class="pay-purpose-tag" onclick="selectPayPurpose(this,'C of O Processing ğŸ”’')">C of O Processing ğŸ”’</button>
    <button class="pay-purpose-tag" onclick="selectPayPurpose(this,'GIS Analysis ğŸŒ')">GIS Analysis ğŸŒ</button>
    <button class="pay-purpose-tag" onclick="selectPayPurpose(this,'Equipment Rental âš™ï¸')">Equipment Rental âš™ï¸</button>
    <button class="pay-purpose-tag" onclick="selectPayPurpose(this,'Training Enrolment ğŸ“')">Training Enrolment ğŸ“</button>
    <button class="pay-purpose-tag" onclick="selectPayPurpose(this,'Drone Survey ğŸš')">Drone Survey ğŸš</button>
    <button class="pay-purpose-tag" onclick="selectPayPurpose(this,'Other Services ğŸ“©')">Other Services ğŸ“©</button>
  </div>

  <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;max-width:760px;margin:0 auto;">
    
    <!-- Amount Selector Card -->
    <div style="background:var(--surface);border:2px solid var(--border);border-radius:18px;padding:22px;">
      <div style="font-size:0.72rem;font-weight:700;letter-spacing:0.08em;color:var(--accent);text-transform:uppercase;margin-bottom:16px;display:flex;align-items:center;gap:8px;">
        Select Amount
        <div style="flex:1;height:1px;background:var(--border);"></div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px;" id="svcAmountGrid">
        <button class="svc-amt-btn" onclick="selectSvcAmount(this,50000)">â‚¦50,000<small>Boundary</small></button>
        <button class="svc-amt-btn active" onclick="selectSvcAmount(this,100000)">â‚¦100,000<small>Popular</small></button>
        <button class="svc-amt-btn" onclick="selectSvcAmount(this,150000)">â‚¦150,000<small>C of O</small></button>
        <button class="svc-amt-btn" onclick="selectSvcAmount(this,200000)">â‚¦200,000<small>Full project</small></button>
        <button class="svc-amt-btn" onclick="selectSvcAmount(this,25000)">â‚¦25,000<small>Deposit</small></button>
        <button class="svc-amt-btn" onclick="selectSvcAmount(this,0)" id="svcCustomBtn">Custom<small>Enter below</small></button>
      </div>
      <div id="svcCustomWrap" style="display:none;position:relative;margin-top:8px;">
        <span style="position:absolute;left:14px;top:50%;transform:translateY(-50%);color:var(--accent);font-weight:700;pointer-events:none;">â‚¦</span>
        <input type="number" id="svcCustomAmt" placeholder="Enter amount" min="100" oninput="updateSvcCustomAmount()" style="padding-left:36px;border-radius:10px;border:2px solid var(--border);padding-top:11px;padding-bottom:11px;font-size:0.9rem;width:100%;">
      </div>
      
      <!-- Amount Display -->
      <div style="text-align:center;padding:16px;background:linear-gradient(135deg,rgba(22,163,74,0.06),rgba(6,78,59,0.06));border:2px solid rgba(22,163,74,0.2);border-radius:14px;margin-top:14px;">
        <div class="display" style="font-size:2.2rem;font-weight:800;color:var(--accent);" id="svcDisplayAmount">â‚¦100,000</div>
        <div style="font-size:0.78rem;color:var(--text2);margin-top:4px;" id="svcDisplayPurpose">Boundary Survey ğŸ“</div>
      </div>
    </div>

    <!-- Payer Details + Pay Button -->
    <div style="background:var(--surface);border:2px solid var(--border);border-radius:18px;padding:22px;display:flex;flex-direction:column;gap:12px;">
      <div style="font-size:0.72rem;font-weight:700;letter-spacing:0.08em;color:var(--accent);text-transform:uppercase;display:flex;align-items:center;gap:8px;">
        Your Details
        <div style="flex:1;height:1px;background:var(--border);"></div>
      </div>
      
      <div class="form-group" style="margin-bottom:0;">
        <label>Full Name</label>
        <input type="text" id="svcPayerName" placeholder="e.g. Emeka Okonkwo">
      </div>
      <div class="form-group" style="margin-bottom:0;">
        <label>Email Address</label>
        <input type="email" id="svcPayerEmail" placeholder="you@email.com">
      </div>
      <div class="form-group" style="margin-bottom:0;">
        <label>Phone Number</label>
        <input type="tel" id="svcPayerPhone" placeholder="+234 800 0000 0000">
      </div>
      <div class="form-group" style="margin-bottom:0;">
        <label>Notes (optional)</label>
        <input type="text" id="svcPayerNote" placeholder="Location, parcel size, details...">
      </div>
      
      <button onclick="paySurveyService()" style="background:linear-gradient(135deg,#16a34a,#064e3b);color:#fff;border:none;border-radius:14px;padding:16px;font-family:inherit;font-size:1rem;font-weight:800;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;transition:all .2s;letter-spacing:0.03em;margin-top:4px;box-shadow:0 4px 20px rgba(22,163,74,0.3);" onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 8px 30px rgba(22,163,74,0.4)'" onmouseout="this.style.transform='';this.style.boxShadow='0 4px 20px rgba(22,163,74,0.3)'">
        ğŸ”’ Pay Securely with Paystack
      </button>
      
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
        <button onclick="svcPayViaWhatsApp()" style="background:#25D366;color:#fff;border:none;border-radius:12px;padding:11px;font-family:inherit;font-size:0.82rem;font-weight:700;cursor:pointer;transition:all .2s;">ğŸ“± WhatsApp Pay</button>
        <button onclick="svcPayViaBank()" style="background:var(--surface2);color:var(--text);border:2px solid var(--border);border-radius:12px;padding:11px;font-family:inherit;font-size:0.82rem;font-weight:700;cursor:pointer;transition:all .2s;">ğŸ¦ Bank Transfer</button>
      </div>
      
      <div style="text-align:center;font-size:0.72rem;color:var(--text3);padding-top:4px;">
        ğŸ”’ Secured by <strong style="color:#00c3f7;">Paystack</strong> Â· PCI DSS Â· SSL Encrypted
      </div>
    </div>
  </div>

  <!-- Payment Methods Banner -->
  <div style="background:#f0fdf4;border:2px solid #bbf7d0;border-radius:14px;padding:18px;margin-top:24px;max-width:760px;margin-left:auto;margin-right:auto;">
    <div style="font-size:0.8rem;font-weight:700;margin-bottom:10px;">âœ… Accepted Payment Methods</div>
    <div style="display:flex;flex-wrap:wrap;gap:8px;font-size:0.82rem;">
      <span style="background:#fff;border:1px solid #86efac;padding:8px 14px;border-radius:8px;font-weight:600;">ğŸ’³ Card (Visa/Mastercard)</span>
      <span style="background:#fff;border:1px solid #86efac;padding:8px 14px;border-radius:8px;font-weight:600;">ğŸ¦ Bank Transfer (USSD/Online)</span>
      <span style="background:#fff;border:1px solid #86efac;padding:8px 14px;border-radius:8px;font-weight:600;">ğŸ“± Opay: 8117554948</span>
      <span style="background:#fff;border:1px solid #86efac;padding:8px 14px;border-radius:8px;font-weight:600;">ğŸŸ¢ WhatsApp Confirmation</span>
      <span style="background:#fff;border:1px solid #86efac;padding:8px 14px;border-radius:8px;font-weight:600;">ğŸ“² PalmPay Transfer</span>
    </div>
  </div>
</div>


<div class="tab-content" id="tab-pricing">
  <div class="card">
    <div class="card-header"><span class="card-icon">ğŸ’</span><h2>Pricing & Service Packages</h2></div>
    <p style="color:var(--text2);font-size:0.88rem;margin-bottom:24px;text-align:center;">Professional surveying services at transparent, competitive rates. All prices in Nigerian Naira (â‚¦). Pay via WhatsApp, Opay, or bank transfer.</p>

    <!-- Subscription Plans -->
    <h3 style="font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-weight:700;margin-bottom:16px;">ğŸ”‘ Platform Subscription Plans</h3>
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px;margin-bottom:36px;">
      <!-- Basic -->
      <div class="price-box">
        <div class="price-plan-label" style="font-size:0.8rem;font-weight:700;letter-spacing:0.08em;margin-bottom:8px;">BASIC</div>
        <div style="font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:2.5rem;font-weight:800;color:#4ade80;">Free</div>
        <div class="price-box-subtitle" style="font-size:0.8rem;margin-bottom:16px;">GPS + Coordinates + Plot Layout</div>
        <ul style="text-align:left;font-size:0.82rem;list-style:none;display:flex;flex-direction:column;gap:7px;margin-bottom:20px;color:#cbd5e1;">
          <li>âœ… Unlimited GPS points</li>
          <li>âœ… All coordinate conversions</li>
          <li>âœ… Plot layout generator</li>
          <li>âœ… Survey history (local)</li>
          <li>âœ… C of O verification</li>
          <li>âŒ Advanced PDF reports</li>
          <li>âŒ Priority support</li>
        </ul>
        <button class="btn btn-outline btn-full" onclick="showTab('survey')">Get Started Free</button>
      </div>
      <!-- Pro -->
      <div class="price-box price-popular">
        <div class="price-badge">â­ MOST POPULAR</div>
        <div style="font-size:0.8rem;font-weight:700;color:#4ade80;letter-spacing:0.08em;margin-bottom:8px;">PROFESSIONAL</div>
        <div style="font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:2.5rem;font-weight:800;color:#4ade80;">â‚¦5,000<span style="font-size:1rem;color:rgba(255,255,255,0.6)">/mo</span></div>
        <div class="price-box-subtitle" style="font-size:0.8rem;margin-bottom:16px;">Full platform access</div>
        <ul style="text-align:left;font-size:0.82rem;list-style:none;display:flex;flex-direction:column;gap:7px;margin-bottom:20px;">
          <li>âœ… Everything in Basic</li>
          <li>âœ… Professional PDF reports</li>
          <li>âœ… Traverse computation</li>
          <li>âœ… GIS service referrals</li>
          <li>âœ… Equipment & training commissions</li>
          <li>âœ… WhatsApp integration</li>
          <li>âœ… Priority support</li>
        </ul>
        <button class="btn btn-green btn-full" onclick="subscribePro()">Subscribe â€” â‚¦5,000/mo</button>
      </div>
      <!-- Enterprise -->
      <div class="price-box" style="border-color:#1d4ed8;background:linear-gradient(160deg,#0a1535 0%,#1e3a8a 100%);">
        <div style="font-size:0.8rem;font-weight:700;color:#93c5fd;letter-spacing:0.08em;margin-bottom:8px;">ENTERPRISE</div>
        <div style="font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:2.5rem;font-weight:800;color:#60a5fa;">â‚¦25,000<span style="font-size:1rem;color:rgba(255,255,255,0.6)">/mo</span></div>
        <div style="font-size:0.8rem;color:rgba(255,255,255,0.6);margin-bottom:16px;">For survey firms & agencies</div>
        <ul style="text-align:left;font-size:0.82rem;list-style:none;display:flex;flex-direction:column;gap:7px;margin-bottom:20px;color:rgba(255,255,255,0.85);">
          <li>âœ… Unlimited users</li>
          <li>âœ… White-label options</li>
          <li>âœ… API access & webhooks</li>
          <li>âœ… Custom branding</li>
          <li>âœ… Dedicated account manager</li>
          <li>âœ… SLA guarantee</li>
        </ul>
        <button class="btn btn-blue btn-full" onclick="contactEnterprise()">Contact for Enterprise</button>
      </div>
    </div>

    <!-- Payment Methods -->
    <div style="background:#0f172a;border:2px solid #1e3a5f;border-radius:12px;padding:20px;margin-bottom:24px;">
      <h4 style="font-weight:700;margin-bottom:10px;color:#f1f5f9;">ğŸ’³ Accepted Payment Methods</h4>
      <div style="display:flex;gap:10px;flex-wrap:wrap;font-size:0.85rem;">
        <span style="background:#1e293b;border:1px solid #334155;color:#cbd5e1;padding:8px 14px;border-radius:8px;">ğŸ“± Opay: 8117554948</span>
        <span style="background:#1e293b;border:1px solid #334155;color:#cbd5e1;padding:8px 14px;border-radius:8px;">ğŸŸ¢ WhatsApp Pay</span>
        <span style="background:#1e293b;border:1px solid #334155;color:#cbd5e1;padding:8px 14px;border-radius:8px;">ğŸ¦ Bank Transfer</span>
        <span style="background:#1e293b;border:1px solid #334155;color:#cbd5e1;padding:8px 14px;border-radius:8px;">ğŸ’³ Card (via Paystack)</span>
      </div>
      <p style="font-size:0.78rem;color:#94a3b8;margin-top:10px;">Contact via WhatsApp to set up payment and activate your subscription: +234-811-755-4948</p>
    </div>

    <!-- Survey Service Rates -->
    <h3 style="font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-weight:700;margin-bottom:14px;">ğŸ“‹ Professional Survey Service Rates</h3>
    <div style="overflow-x:auto;">
      <table class="data-table">
        <thead><tr><th>Service</th><th>Rate (From)</th><th>Unit</th><th>Notes</th></tr></thead>
        <tbody>
          <tr><td>Boundary Survey</td><td class="mono">â‚¦50,000</td><td>Per plot</td><td>Includes beaconing & pillars</td></tr>
          <tr><td>Topographic Survey</td><td class="mono">â‚¦15,000</td><td>Per hectare</td><td>Minimum 2ha</td></tr>
          <tr><td>Cadastral Survey</td><td class="mono">â‚¦80,000</td><td>Per parcel</td><td>Government-certified</td></tr>
          <tr><td>Engineering Survey</td><td class="mono">â‚¦100,000</td><td>Per project</td><td>Depends on scope</td></tr>
          <tr><td>Drone Aerial Survey</td><td class="mono">â‚¦80,000</td><td>Per day</td><td>Includes processing</td></tr>
          <tr><td>C of O Processing</td><td class="mono">â‚¦150,000</td><td>Per title</td><td>State-specific</td></tr>
          <tr><td>GIS Report / Analysis</td><td class="mono">â‚¦25,000</td><td>Per report</td><td>Custom analysis</td></tr>
          <tr><td>Training (per person)</td><td class="mono">â‚¦18,000</td><td>Per course</td><td>6â€“16 hours</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CONTACT TAB (Formspree-powered â€” no backend needed)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->


<div class="tab-content" id="tab-contact">

  <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px;" class="contact-grid">
    <!-- Formspree Contact Form -->
    <div class="contact-form-card">
      <h2 style="font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:1.3rem;font-weight:800;margin-bottom:6px;">ğŸ“© Send Us a Message</h2>
      <p style="font-size:0.82rem;opacity:0.7;margin-bottom:20px;">Powered by Formspree â€” no server needed. We reply within 24 hours.</p>

      <!-- IMPORTANT: Replace YOUR_FORMSPREE_ID below with your actual Formspree form ID from formspree.io -->
      <form id="contactForm" action="https://formspree.io/f/xpwzldjk" method="POST" onsubmit="handleContactSubmit(event)">
        <div class="form-group"><label>Full Name <span class="req">*</span></label><input type="text" name="name" placeholder="Your full name" required autocomplete="name"></div>
        <div class="form-group"><label>Email <span class="req">*</span></label><input type="email" name="email" placeholder="your@email.com" required autocomplete="email"></div>
        <div class="form-group"><label>Phone</label><input type="tel" name="phone" placeholder="080XXXXXXXX" autocomplete="tel"></div>
        <div class="form-group"><label>Service Interested In</label>
          <select name="service">
            <option value="">Select a service...</option>
            <option>Boundary Survey</option><option>Topographic Survey</option>
            <option>Cadastral Survey</option><option>Drone Survey</option>
            <option>C of O Processing</option><option>GIS Service</option>
            <option>Equipment Rental</option><option>Training Enrollment</option>
            <option>Professional Subscription</option><option>Enterprise Plan</option>
          </select>
        </div>
        <div class="form-group"><label>Message <span class="req">*</span></label>
          <textarea name="message" rows="4" placeholder="Describe your survey requirements, location, and timeline..." required></textarea>
        </div>
        <!-- Hidden fields for Formspree -->
        <input type="hidden" name="_subject" value="New SurveyPro Elite Inquiry">
        <input type="hidden" name="_next" value="https://techenite.github.io/surveyorpro">
        <input type="text" name="_gotcha" style="display:none"> <!-- honeypot spam filter -->

        <div id="contactFormMsg" style="display:none;background:rgba(74,222,128,0.2);border:1px solid rgba(74,222,128,0.5);border-radius:8px;padding:12px;font-size:0.85rem;margin-bottom:12px;color:#4ade80;"></div>
        <button type="submit" class="btn btn-green btn-full btn-lg" id="contactSubmitBtn">ğŸ“© Send Message</button>
      </form>
    </div>

    <!-- Contact Info -->
    <div>
      <div class="card" style="border-left:4px solid var(--accent);">
        <h3 style="font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-weight:700;margin-bottom:16px;">ğŸ“ Direct Contact</h3>
        <div style="display:flex;flex-direction:column;gap:12px;font-size:0.9rem;">
          <a href="tel:+2348117554948" style="display:flex;gap:10px;align-items:center;text-decoration:none;color:var(--text);padding:12px;background:#f0fdf4;border-radius:10px;border:1px solid #bbf7d0;">
            <span style="font-size:1.4rem;">ğŸ“</span><div><div style="font-weight:700;">+234-811-755-4948</div><div style="font-size:0.75rem;color:var(--text3);">Call or SMS</div></div>
          </a>
          <a href="https://wa.me/2348117554948" target="_blank" rel="noopener" style="display:flex;gap:10px;align-items:center;text-decoration:none;color:#fff;padding:12px;background:#25D366;border-radius:10px;">
            <span style="font-size:1.4rem;">ğŸ’¬</span><div><div style="font-weight:700;">WhatsApp Us</div><div style="font-size:0.75rem;opacity:0.85;">Fast response Â· 08117554948</div></div>
          </a>
          <a href="/cdn-cgi/l/email-protection#94fbe4e1e7f5e6fafbf8f0d4f3f9f5fdf8baf7fbf9" style="display:flex;gap:10px;align-items:center;text-decoration:none;color:var(--text);padding:12px;background:var(--surface3);border-radius:10px;border:1px solid #bfdbfe;">
            <span style="font-size:1.4rem;">ğŸ“§</span><div><div style="font-weight:700;"><span class="__cf_email__" data-cfemail="f19e81848290839f9e9d95b1969c90989ddf929e9c">[email&#160;protected]</span></div><div style="font-size:0.75rem;color:var(--text3);">Email Arnold directly</div></div>
          </a>
          <div style="display:flex;gap:10px;align-items:center;padding:12px;background:#fffbeb;border-radius:10px;border:1px solid #fde68a;">
            <span style="font-size:1.4rem;">ğŸ’³</span><div><div style="font-weight:700;">Opay: 8117554948</div><div style="font-size:0.75rem;color:var(--text3);">Instant transfers accepted</div></div>
          </div>
        </div>
        <div style="margin-top:16px;padding:12px;background:#f8fafc;border-radius:10px;font-size:0.8rem;color:var(--text2);">
          <strong>Office Hours:</strong> Monâ€“Sat Â· 8:00 AM â€“ 6:00 PM WAT<br>
          <strong>Response Time:</strong> WhatsApp: &lt;1 hour Â· Email: &lt;24 hours
        </div>
      </div>

      <div class="card" style="margin-top:0;border-left:4px solid var(--accent2);">
        <h3 style="font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-weight:700;margin-bottom:12px;">ğŸš€ Quick Actions</h3>
        <div style="display:flex;flex-direction:column;gap:10px;">
          <button class="btn btn-green btn-full" onclick="showTab('survey')">ğŸ“¡ Start a Free Survey</button>
          <button class="btn btn-blue btn-full" onclick="subscribePro()">ğŸ’ Subscribe â€” â‚¦5,000/mo</button>
          <button class="btn btn-primary btn-full" onclick="contactEnterprise()">ğŸ¢ Enterprise Inquiry</button>
          <button class="btn btn-gray btn-full" onclick="showTab('pricing')">ğŸ“‹ View All Pricing</button>
        </div>
      </div>
    </div>
  </div>

  <style>
/* === ANTI-BLANK-SCREEN: Force body visible at all times === */
html{opacity:1!important;visibility:visible!important;}
body{opacity:1!important;visibility:visible!important;display:block!important;font-family:'Segoe UI',system-ui,sans-serif;}
  @media(max-width:768px){.contact-grid{grid-template-columns:1fr!important;}}
  </style>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ADVANCED TOOLS TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->



<!-- â•â•â• PAYMENT MODAL â€” Professional Paystack Integration â•â•â• -->
<div class="modal-bg" id="paymentModal" onclick="if(event.target===this)closePaymentModal()" style="z-index:600;">
  <div class="modal-box" style="max-width:500px;border-radius:24px;padding:0;overflow:hidden;border:1px solid rgba(22,163,74,0.25);box-shadow:0 24px 80px rgba(0,0,0,0.25);">
    
    <!-- Modal Header -->
    <div style="background:linear-gradient(135deg,#0f172a 0%,#064e3b 100%);padding:28px 28px 24px;position:relative;overflow:hidden;">
      <div style="position:absolute;inset:0;background:url('data:image/svg+xml,%3Csvg width=\'60\' height=\'60\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Ccircle cx=\'30\' cy=\'30\' r=\'1\' fill=\'rgba(255,255,255,0.04)\'/%3E%3C/svg%3E') repeat;pointer-events:none;"></div>
      <button onclick="closePaymentModal()" style="position:absolute;top:16px;right:16px;background:rgba(255,255,255,0.1);border:none;color:#fff;width:32px;height:32px;border-radius:50%;cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center;">âœ•</button>
      <div style="display:inline-flex;align-items:center;gap:6px;background:rgba(74,222,128,0.15);border:1px solid rgba(74,222,128,0.3);border-radius:30px;padding:4px 14px;font-size:0.72rem;font-weight:700;color:#4ade80;letter-spacing:0.06em;margin-bottom:12px;">ğŸ”’ SECURE PAYMENT</div>
      <h3 class="display" style="font-size:1.7rem;font-weight:800;color:#fff;margin-bottom:6px;line-height:1.1;" id="payModalTitle">Upgrade Your Plan</h3>
      <p style="font-size:0.83rem;color:rgba(255,255,255,0.6);" id="payModalDesc">Unlock full professional access â€” SURCON-grade tools</p>
      
      <!-- Plan Summary -->
      <div style="display:flex;justify-content:space-between;align-items:center;background:rgba(255,255,255,0.07);border:1px solid rgba(255,255,255,0.12);border-radius:14px;padding:14px 18px;margin-top:18px;">
        <div>
          <div style="font-size:0.78rem;color:rgba(255,255,255,0.5);font-weight:600;letter-spacing:0.05em;" id="payPlanName">PROFESSIONAL PLAN</div>
          <div style="font-size:0.75rem;color:rgba(255,255,255,0.4);margin-top:2px;">Monthly Â· cancel anytime</div>
        </div>
        <div style="text-align:right;">
          <div class="display" style="font-size:2rem;font-weight:800;color:#4ade80;line-height:1;" id="payAmount">â‚¦5,000</div>
          <div style="font-size:0.7rem;color:rgba(255,255,255,0.4);">/month</div>
        </div>
      </div>
    </div>

    <!-- Modal Body -->
    <div style="padding:24px 28px;">
      
      <!-- User Details -->
      <div style="margin-bottom:20px;">
        <div style="display:grid;gap:12px;">
          <div class="form-group" style="margin-bottom:0;">
            <label style="font-size:0.75rem;font-weight:700;letter-spacing:0.06em;color:var(--text2);text-transform:uppercase;">Full Name</label>
            <input type="text" id="payName" placeholder="e.g. Chukwuemeka Obi" style="border-radius:12px;padding:12px 16px;border:2px solid var(--border);font-size:0.9rem;transition:border-color .2s;" onfocus="this.style.borderColor='#16a34a'" onblur="this.style.borderColor='var(--border)'">
          </div>
          <div class="form-group" style="margin-bottom:0;">
            <label style="font-size:0.75rem;font-weight:700;letter-spacing:0.06em;color:var(--text2);text-transform:uppercase;">Email Address</label>
            <input type="email" id="payEmail" placeholder="you@email.com" style="border-radius:12px;padding:12px 16px;border:2px solid var(--border);font-size:0.9rem;transition:border-color .2s;" onfocus="this.style.borderColor='#16a34a'" onblur="this.style.borderColor='var(--border)'">
          </div>
          <div class="form-group" style="margin-bottom:0;">
            <label style="font-size:0.75rem;font-weight:700;letter-spacing:0.06em;color:var(--text2);text-transform:uppercase;">Phone (optional)</label>
            <input type="tel" id="payPhone" placeholder="+234 800 0000 0000" style="border-radius:12px;padding:12px 16px;border:2px solid var(--border);font-size:0.9rem;transition:border-color .2s;" onfocus="this.style.borderColor='#16a34a'" onblur="this.style.borderColor='var(--border)'">
          </div>
        </div>
      </div>

      <!-- Divider -->
      <div style="display:flex;align-items:center;gap:12px;margin-bottom:18px;">
        <div style="flex:1;height:1px;background:var(--border);"></div>
        <span style="font-size:0.72rem;color:var(--text3);font-weight:600;">CHOOSE PAYMENT METHOD</span>
        <div style="flex:1;height:1px;background:var(--border);"></div>
      </div>
      
      <!-- Payment Options -->
      <div style="display:grid;gap:10px;margin-bottom:18px;">
        
        <!-- Primary: Paystack -->
        <button onclick="initiatePaystack()" id="paystackBtn" style="display:flex;align-items:center;gap:14px;background:linear-gradient(135deg,#00c3f7 0%,#0084cc 100%);color:#fff;border:none;border-radius:14px;padding:16px 20px;cursor:pointer;font-family:inherit;font-weight:700;font-size:0.95rem;transition:all .2s;text-align:left;box-shadow:0 4px 20px rgba(0,132,204,0.3);" onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 8px 30px rgba(0,132,204,0.4)'" onmouseout="this.style.transform='';this.style.boxShadow='0 4px 20px rgba(0,132,204,0.3)'">
          <div style="background:rgba(255,255,255,0.2);border-radius:10px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0;">ğŸ’³</div>
          <div>
            <div>Pay with Paystack</div>
            <div style="font-size:0.75rem;font-weight:400;opacity:0.85;margin-top:2px;">Card Â· Bank Transfer Â· USSD Â· QR Code</div>
          </div>
          <div style="margin-left:auto;opacity:0.8;">â†’</div>
        </button>
        
        <!-- Opay -->
        <button onclick="payViaOpay()" style="display:flex;align-items:center;gap:14px;background:#f0fdf4;color:#15803d;border:2px solid #bbf7d0;border-radius:14px;padding:14px 20px;cursor:pointer;font-family:inherit;font-weight:700;font-size:0.88rem;transition:all .2s;text-align:left;" onmouseover="this.style.background='#dcfce7'" onmouseout="this.style.background='#f0fdf4'">
          <div style="background:#dcfce7;border-radius:10px;width:38px;height:38px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;flex-shrink:0;">ğŸ“±</div>
          <div>
            <div>Pay via Opay</div>
            <div style="font-size:0.73rem;font-weight:400;margin-top:2px;color:#16a34a;">Instant transfer Â· 8117554948</div>
          </div>
        </button>
        
        <!-- Bank Transfer -->
        <button onclick="payViaBankTransfer()" style="display:flex;align-items:center;gap:14px;background:#f8fafc;color:var(--text);border:2px solid var(--border);border-radius:14px;padding:14px 20px;cursor:pointer;font-family:inherit;font-weight:700;font-size:0.88rem;transition:all .2s;text-align:left;" onmouseover="this.style.background='#f1f5f9'" onmouseout="this.style.background='#f8fafc'">
          <div style="background:var(--border);border-radius:10px;width:38px;height:38px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;flex-shrink:0;">ğŸ¦</div>
          <div>
            <div>Bank Transfer</div>
            <div style="font-size:0.73rem;font-weight:400;margin-top:2px;color:var(--text3);">FirstBank / Opay / PalmPay</div>
          </div>
        </button>
        
        <!-- WhatsApp -->
        <button onclick="manualPayment()" style="display:flex;align-items:center;gap:14px;background:#f0fdf4;color:#166534;border:2px solid #86efac;border-radius:14px;padding:14px 20px;cursor:pointer;font-family:inherit;font-weight:700;font-size:0.88rem;transition:all .2s;text-align:left;" onmouseover="this.style.background='#dcfce7'" onmouseout="this.style.background='#f0fdf4'">
          <svg width="38" height="38" viewBox="0 0 38 38" style="flex-shrink:0;"><rect width="38" height="38" rx="10" fill="#25D366"/><path fill="#fff" d="M27.4 10.6A11.8 11.8 0 0019 7C12.9 7 7.9 12 7.9 18.1c0 2 .5 3.9 1.5 5.6L7.8 31l7.5-2A11.8 11.8 0 0019 30.2c6.1 0 11.1-5 11.1-11.1 0-3-.2-5.7-2.7-8.5zm-8.4 17.1c-1.7 0-3.4-.5-4.8-1.3l-.4-.2-3.6.9 1-3.5-.2-.4a9.8 9.8 0 01-1.5-5.2c0-5.4 4.4-9.8 9.8-9.8 2.6 0 5 1 6.9 2.9a9.7 9.7 0 012.9 6.9c0 5.4-4.4 9.7-9.8 9.7z"/></svg>
          <div>
            <div>Pay via WhatsApp</div>
            <div style="font-size:0.73rem;font-weight:400;margin-top:2px;color:#16a34a;">Send transfer screenshot for instant activation</div>
          </div>
        </button>

        <!-- Bitcoin / Crypto -->
        <button onclick="payCrypto()" style="display:flex;align-items:center;gap:14px;background:linear-gradient(135deg,#fffbeb,#fef3c7);color:#92400e;border:2px solid #fcd34d;border-radius:14px;padding:14px 20px;cursor:pointer;font-family:inherit;font-weight:700;font-size:0.88rem;transition:all .2s;text-align:left;" onmouseover="this.style.background='#fef3c7'" onmouseout="this.style.background='linear-gradient(135deg,#fffbeb,#fef3c7)'">
          <div style="background:#fcd34d;border-radius:10px;width:38px;height:38px;display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0;">â‚¿</div>
          <div>
            <div>Pay with Bitcoin (BTC)</div>
            <div style="font-size:0.73rem;font-weight:400;margin-top:2px;color:#b45309;">Crypto Â· Worldwide Â· Send then WhatsApp proof</div>
          </div>
        </button>
      </div><!-- END Payment Options grid -->
      
      <!-- Security Footer -->
      <div style="text-align:center;padding:14px;background:#f8fafc;border-radius:12px;border:1px solid var(--border);">
        <div style="font-size:0.75rem;color:var(--text3);display:flex;align-items:center;justify-content:center;gap:8px;flex-wrap:wrap;">
          <span>ğŸ”’ 256-bit SSL</span>
          <span style="opacity:0.4;">Â·</span>
          <span>ğŸ›¡ï¸ PCI DSS Compliant</span>
          <span style="opacity:0.4;">Â·</span>
          <span>âœ… Receipt via WhatsApp</span>
        </div>
        <div style="font-size:0.72rem;color:var(--text3);margin-top:6px;">Powered by <strong style="color:#00c3f7;">Paystack</strong> â€” Nigeria's most trusted payment gateway</div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     EARN MONEY / MONETIZE TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="tab-content" id="tab-monetize">

  <!-- â•â• QUICK SETUP CHECKLIST â•â• -->
  <div style="background:linear-gradient(135deg,#14532d,#166534);color:#fff;border-radius:14px;padding:22px;margin-bottom:20px;border:2px solid #4ade80;">
    <div style="font-family:var(--ff-display,'Syne',sans-serif);font-size:1.2rem;font-weight:800;margin-bottom:4px;">ğŸš€ Start Earning â€” What You Need To Do</div>
    <p style="font-size:0.8rem;opacity:0.75;margin-bottom:14px;">Complete these steps once and your platform earns money automatically.</p>
    <div style="display:flex;flex-direction:column;gap:8px;">
      <div style="background:rgba(255,255,255,0.1);border-radius:9px;padding:12px 14px;display:flex;gap:10px;">
        <span style="background:#4ade80;color:#14532d;font-weight:800;font-size:0.8rem;min-width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;">1</span>
        <div><strong>âœ… Paystack Key (ACTIVE):</strong> <span style="opacity:0.85;font-size:0.82rem;">Your live Paystack key is already configured. Users can pay you directly with card, bank transfer, USSD, or QR code. Payments go straight to your Paystack account.</span></div>
      </div>
      <div style="background:rgba(255,255,255,0.1);border-radius:9px;padding:12px 14px;display:flex;gap:10px;">
        <span style="background:#4ade80;color:#14532d;font-weight:800;font-size:0.8rem;min-width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;">2</span>
        <div><strong>Adsterra Ads (Instant Approval â€” No Wait):</strong> <span style="opacity:0.85;font-size:0.82rem;">Register at <strong>adsterra.com</strong> â†’ add your site â†’ copy their banner code â†’ paste inside the <code style="background:rgba(0,0,0,0.3);padding:1px 5px;border-radius:3px;">&lt;!-- AD SLOT --&gt;</code> areas in the HTML. Start earning CPM revenue in minutes.</span></div>
      </div>
      <div style="background:rgba(255,255,255,0.1);border-radius:9px;padding:12px 14px;display:flex;gap:10px;">
        <span style="background:#4ade80;color:#14532d;font-weight:800;font-size:0.8rem;min-width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;">3</span>
        <div><strong>Host Free on GitHub Pages:</strong> <span style="opacity:0.85;font-size:0.82rem;">Create repo at <strong>github.com</strong> â†’ upload HTML as <code style="background:rgba(0,0,0,0.3);padding:1px 5px;border-radius:3px;">index.html</code> â†’ enable Pages in Settings â†’ share your live URL. Free forever.</span></div>
      </div>
      <div style="background:rgba(255,255,255,0.1);border-radius:9px;padding:12px 14px;display:flex;gap:10px;">
        <span style="background:#4ade80;color:#14532d;font-weight:800;font-size:0.8rem;min-width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;">4</span>
        <div><strong>Share &amp; Get Traffic:</strong> <span style="opacity:0.85;font-size:0.82rem;">Post in surveyor WhatsApp groups, LinkedIn, Twitter. Each equipment booking = <strong>â‚¦3,000â€“â‚¦18,000</strong> commission (50%). Each course = <strong>â‚¦9,000â€“â‚¦22,500</strong> (50%). Each subscription = â‚¦2,000â€“â‚¦50,000/month.</span></div>
      </div>
    </div>
    <div style="margin-top:12px;background:rgba(0,0,0,0.2);border-radius:8px;padding:10px 14px;font-size:0.78rem;text-align:center;">
      ğŸ’¡ <strong>Realistic Month 1:</strong> 500 visitors â†’ â‰ˆâ‚¦3,500 ads + 2 equipment bookings â†’ â‚¦6,000 + 1 course â†’ â‚¦9,000 = <strong style="color:#4ade80;">â‰ˆâ‚¦18,500 earning potential</strong>
    </div>
  </div>

  <!-- Hero -->
  <div style="background:linear-gradient(135deg,#0f172a,#1e3a5f,#0f2a1a);color:#fff;border-radius:16px;padding:32px 28px;margin-bottom:24px;text-align:center;">
    <div style="font-size:3rem;margin-bottom:12px;">ğŸ’°</div>
    <h2 style="font-family:var(--ff-display,'Syne',sans-serif);font-size:1.8rem;font-weight:800;margin-bottom:10px;">Earn Revenue From SurveyPro Elite</h2>
    <p style="opacity:0.75;font-size:0.9rem;max-width:600px;margin:0 auto 20px;">Multiple income streams â€” no subscription required. Earn through ads, affiliate commissions, referrals, and direct ad sales. Here is your complete monetization roadmap.</p>
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;max-width:600px;margin:0 auto;">
      <div style="background:rgba(255,255,255,0.1);border-radius:10px;padding:14px 8px;text-align:center;">
        <div style="font-size:1.3rem;font-weight:800;color:#4ade80;">â‚¦5Kâ€“â‚¦50K</div>
        <div style="font-size:0.68rem;opacity:0.65;margin-top:4px;">Monthly Ad Revenue</div>
      </div>
      <div style="background:rgba(255,255,255,0.1);border-radius:10px;padding:14px 8px;text-align:center;">
        <div style="font-size:1.3rem;font-weight:800;color:#f0b429;">50%</div>
        <div style="font-size:0.68rem;opacity:0.65;margin-top:4px;">Referral Commission</div>
      </div>
      <div style="background:rgba(255,255,255,0.1);border-radius:10px;padding:14px 8px;text-align:center;">
        <div style="font-size:1.3rem;font-weight:800;color:#c084fc;">10K+</div>
        <div style="font-size:0.68rem;opacity:0.65;margin-top:4px;">Audience Reached</div>
      </div>
      <div style="background:rgba(255,255,255,0.1);border-radius:10px;padding:14px 8px;text-align:center;">
        <div style="font-size:1.3rem;font-weight:800;color:#4ade80;">3+</div>
        <div style="font-size:0.68rem;opacity:0.65;margin-top:4px;">Revenue Streams</div>
      </div>
    </div>
  </div>

  <!-- 1. Display Ads (Google AdSense) -->
  <div class="card monetize-section">
    <div class="card-header"><span class="card-icon">ğŸ“¢</span><h2>1. Display Ads â€” Pay Per Click</h2></div>

    <div class="monetize-card">
      <h4>ğŸ”µ Google AdSense <span class="income-badge blue">$0.01â€“$0.50/click</span></h4>
      <p>Google AdSense is the gold standard for website monetization. Once approved, Google automatically shows relevant ads to your visitors. You earn money every time someone clicks an ad. AdSense works best with consistent quality content and real traffic.</p>
      <p><strong>How to apply:</strong> Go to <strong>adsense.google.com</strong> â†’ Sign in with your Google account â†’ Submit your site URL â†’ Wait for review (typically 2â€“4 weeks). Your site needs a Privacy Policy and at least 10â€“15 quality pages.</p>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;">
        <a href="https://adsense.google.com" target="_blank" rel="noopener" class="btn btn-blue btn-sm">Apply for AdSense â†’</a>
        <button class="btn btn-gray btn-sm" onclick="showTab('privacy')">View Privacy Policy</button>
      </div>
      <div style="margin-top:14px;background:#f0f9ff;border:1px solid #bae6fd;border-radius:8px;padding:12px;font-size:0.8rem;color:#0369a1;">
        <strong>ğŸ“Œ Where to place ads on SurveyPro Elite:</strong> Top leaderboard (728Ã—90) Â· Below navigation Â· Between tool sections Â· Sidebar rectangle (300Ã—250) Â· Footer banner
      </div>
    </div>

    <div class="monetize-card">
      <h4>ğŸŸ  Adsterra <span class="income-badge">Instant Approval</span> <span class="income-badge gold">No Traffic Minimum</span></h4>
      <p>Adsterra accepts new websites immediately â€” no minimum traffic required. Ideal while waiting for AdSense approval. Offers pop-under ads, native banners, and direct links. Average CPM for Nigerian traffic: $0.50â€“$2.00.</p>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;">
        <a href="https://adsterra.com" target="_blank" rel="noopener" class="btn btn-orange btn-sm">Join Adsterra â†’</a>
      </div>
    </div>

    <div class="monetize-card">
      <h4>ğŸŸ£ Monetag (formerly PropellerAds) <span class="income-badge">$1â€“$3 CPM</span></h4>
      <p>Monetag specializes in push notifications, pop-unders, and in-page push ads. Excellent for Africa/Nigeria traffic. Sign up at monetag.com, get your ad code, and paste it in your site header. Payments via PayPal, Wire, or Bitcoin.</p>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;">
        <a href="https://monetag.com" target="_blank" rel="noopener" class="btn btn-primary btn-sm">Join Monetag â†’</a>
      </div>
    </div>

    <div style="background:#fefce8;border:1px solid #fde68a;border-radius:10px;padding:16px;font-size:0.82rem;color:#92400e;">
      <strong>âš ï¸ Ad Placement Guide for SurveyPro Elite:</strong> Copy your ad code from AdSense/Adsterra/Monetag and paste it inside the <code style="background:#fff;padding:2px 6px;border-radius:4px;">&lt;!-- AD SLOT --&gt;</code> comments in this HTML file. Use the browser inspect tool to verify ads load correctly.
    </div>
  </div>

  <!-- 2. Affiliate Marketing -->
  <div class="card monetize-section">
    <div class="card-header"><span class="card-icon">ğŸ¤</span><h2>2. Affiliate Marketing â€” Commission on Sales</h2></div>

    <div class="monetize-card">
      <h4>ğŸ›’ Amazon Associates <span class="income-badge">2â€“10% Commission</span></h4>
      <p>Promote survey equipment on Amazon â€” GPS receivers, total stations, measuring tapes, drones, tripods, and theodolites. Every time a visitor clicks your Amazon affiliate link and buys, you earn a commission for 24 hours.</p>
      <p><strong>Best products to promote:</strong> Leica GPS receivers Â· Trimble instruments Â· DJI survey drones Â· Garmin handhelds Â· Engineering calculators Â· Survey textbooks</p>
      <a href="https://affiliate-program.amazon.com" target="_blank" rel="noopener" class="btn btn-orange btn-sm">Join Amazon Associates â†’</a>
    </div>

    <div class="monetize-card">
      <h4>ğŸŒ Impact or ShareASale <span class="income-badge blue">$5â€“$100/sale</span></h4>
      <p>These networks connect you with software companies, GIS tool providers, cloud storage platforms, and engineering software that pay large commissions per sale. Join as a publisher and apply to promote software like AutoCAD, ArcGIS, or cloud survey platforms.</p>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;">
        <a href="https://impact.com" target="_blank" rel="noopener" class="btn btn-blue btn-sm">Join Impact â†’</a>
        <a href="https://shareasale.com" target="_blank" rel="noopener" class="btn btn-gray btn-sm">Join ShareASale â†’</a>
      </div>
    </div>

    <div class="monetize-card">
      <h4>ğŸ Smart Links & Content Lockers <span class="income-badge">$0.10â€“$2/action</span></h4>
      <p>With platforms like <strong>CPALead</strong> or <strong>MyLead</strong>, you can lock premium content behind a small action (filling a short survey or viewing an ad). The visitor completes the action, you get paid, they get the content.</p>
      <p><strong>What to lock:</strong> Premium survey report templates Â· Advanced GPS calibration guides Â· Free coordinate conversion spreadsheets Â· Survey checklists & SURCON forms</p>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;">
        <a href="https://cpalead.com" target="_blank" rel="noopener" class="btn btn-green btn-sm">Join CPALead â†’</a>
        <a href="https://mylead.global" target="_blank" rel="noopener" class="btn btn-gray btn-sm">Join MyLead â†’</a>
        <button class="btn btn-outline btn-sm" onclick="showContentLockerDemo()">ğŸ‘€ See Demo</button>
      </div>
    </div>
  </div>

  <!-- 3. Direct Ad Space -->
  <div class="card monetize-section">
    <div class="card-header"><span class="card-icon">ğŸ·ï¸</span><h2>3. Direct Ad Space â€” "Advertise Here"</h2></div>

    <p style="font-size:0.88rem;color:var(--text2);margin-bottom:16px;">Sell banner space directly to local businesses â€” no middleman, no revenue share. A flat monthly fee paid directly to you. Land lawyers, title registration firms, estate developers, and survey equipment suppliers are your ideal clients.</p>

    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;margin-bottom:16px;">
      <div class="monetize-card" style="text-align:center;border:2px dashed var(--accent);">
        <div style="font-size:1.5rem;margin-bottom:8px;">ğŸŸ¢</div>
        <div style="font-weight:800;">Header Banner</div>
        <div style="font-size:0.78rem;color:var(--text2);margin:4px 0;">728Ã—90 Â· Leaderboard</div>
        <div style="font-size:1.3rem;font-weight:800;color:var(--accent);">â‚¦15,000/mo</div>
      </div>
      <div class="monetize-card" style="text-align:center;border:2px dashed var(--accent2);">
        <div style="font-size:1.5rem;margin-bottom:8px;">ğŸ”µ</div>
        <div style="font-weight:800;">Sidebar Rectangle</div>
        <div style="font-size:0.78rem;color:var(--text2);margin:4px 0;">300Ã—250 Â· Medium Rectangle</div>
        <div style="font-size:1.3rem;font-weight:800;color:var(--accent2);">â‚¦8,000/mo</div>
      </div>
      <div class="monetize-card" style="text-align:center;border:2px dashed #b45309;">
        <div style="font-size:1.5rem;margin-bottom:8px;">ğŸŸ¡</div>
        <div style="font-weight:800;">Footer Strip</div>
        <div style="font-size:0.78rem;color:var(--text2);margin:4px 0;">Full width Â· 60px tall</div>
        <div style="font-size:1.3rem;font-weight:800;color:#b45309;">â‚¦5,000/mo</div>
      </div>
    </div>

    <div class="sponsor-slot" onclick="window.open('https://wa.me/2348117554948?text=I+want+to+advertise+on+SurveyPro+Elite','_blank')">
      <div style="font-size:2rem;margin-bottom:8px;">ğŸ“¢</div>
      <div style="font-weight:700;font-size:1rem;">YOUR BUSINESS AD HERE</div>
      <div style="font-size:0.78rem;margin-top:4px;">Click to book Â· Reach 10,000+ Nigerian land professionals</div>
    </div>

    <div style="background:#f0fdf4;border:2px solid #bbf7d0;border-radius:10px;padding:14px;font-size:0.82rem;color:#166534;">
      <strong>ğŸ’¡ Pro Tip:</strong> Add an "Advertise With Us" page to your site describing your audience (Nigerian land surveyors, estate developers, lawyers). Send WhatsApp messages to local survey equipment shops and title lawyers offering them a banner spot. Start at â‚¦5,000/month. As traffic grows, raise prices.
    </div>
  </div>

  <!-- 4. Readiness Checklist -->
  <div class="card monetize-section">
    <div class="card-header"><span class="card-icon">âœ…</span><h2>4. Monetization Readiness Checklist</h2></div>
    <p style="font-size:0.85rem;color:var(--text2);margin-bottom:16px;">Complete these steps before applying to ad networks. Incomplete sites get rejected.</p>

    <div class="checklist-item">
      <span class="checklist-icon">ğŸ“„</span>
      <div style="flex:1;">
        <div style="font-weight:700;">Privacy Policy Page</div>
        <div style="font-size:0.78rem;color:var(--text2);">Required by Google AdSense, Adsterra, and all major networks. Explains how you collect user data.</div>
      </div>
      <span class="checklist-status status-ready" onclick="showTab('privacy')" style="cursor:pointer;">âœ… VIEW â†’</span>
    </div>
    <div class="checklist-item">
      <span class="checklist-icon">ğŸ‘¤</span>
      <div style="flex:1;">
        <div style="font-weight:700;">About Us Page</div>
        <div style="font-size:0.78rem;color:var(--text2);">Ad networks verify you're a real business. Arnold's credentials and SURCON alignment make a strong case.</div>
      </div>
      <span class="checklist-status status-ready" onclick="showTab('about')" style="cursor:pointer;">âœ… VIEW â†’</span>
    </div>
    <div class="checklist-item">
      <span class="checklist-icon">ğŸ“</span>
      <div style="flex:1;">
        <div style="font-weight:700;">Original Content (10â€“15 pages)</div>
        <div style="font-size:0.78rem;color:var(--text2);">Each tool tab counts as a quality page. Survey, Coordinates, GIS, Training, Equipment, Jobs, etc. â€” you're covered.</div>
      </div>
      <span class="checklist-status status-ready">âœ… Ready</span>
    </div>
    <div class="checklist-item">
      <span class="checklist-icon">ğŸ“Š</span>
      <div style="flex:1;">
        <div style="font-weight:700;">Traffic â€” Minimum Visitors</div>
        <div style="font-size:0.78rem;color:var(--text2);">Share on LinkedIn, Twitter/X, Reddit (r/gis, r/nigeria), Facebook groups for surveyors. WhatsApp broadcast to contacts. Pin on Pinterest. Post on TikTok.</div>
      </div>
      <span class="checklist-status status-pending">â³ Get Traffic</span>
    </div>
    <div class="checklist-item">
      <span class="checklist-icon">ğŸª</span>
      <div style="flex:1;">
        <div style="font-weight:700;">Cookie Consent Banner</div>
        <div style="font-size:0.78rem;color:var(--text2);">Required for AdSense compliance. A simple banner saying "This site uses cookies" with an Accept button.</div>
      </div>
      <span class="checklist-status status-ready">âœ… Built-in</span>
    </div>
    <div class="checklist-item">
      <span class="checklist-icon">ğŸ“±</span>
      <div style="flex:1;">
        <div style="font-weight:700;">Mobile Responsive Design</div>
        <div style="font-size:0.78rem;color:var(--text2);">90%+ of Nigerian internet traffic is mobile. SurveyPro Elite is fully responsive â€” this is a huge plus for ad approval.</div>
      </div>
      <span class="checklist-status status-ready">âœ… Ready</span>
    </div>

    <div style="margin-top:20px;text-align:center;">
      <div style="font-size:1rem;font-weight:800;color:var(--text);margin-bottom:8px;">ğŸ¯ Your Site Score</div>
      <div style="background:#f0fdf4;border:2px solid #86efac;border-radius:12px;padding:16px;">
        <div style="font-size:2.5rem;font-weight:800;color:#16a34a;">5 / 6</div>
        <div style="font-size:0.82rem;color:var(--text2);">Excellent! Just drive traffic to qualify for premium ad networks.</div>
      </div>
    </div>
  </div>

  <!-- 5. Traffic Growth Tips -->
  <div class="card monetize-section">
    <div class="card-header"><span class="card-icon">ğŸš€</span><h2>5. Drive Traffic â€” Get Your First Visitors</h2></div>
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;">
      <div class="monetize-card">
        <h4>ğŸ“Œ Pinterest</h4>
        <p>Create pins showing survey coordinate calculations, land area charts, and GPS accuracy comparisons. Land and real estate pins get huge traction. Link back to SurveyPro Elite.</p>
      </div>
      <div class="monetize-card">
        <h4>ğŸ‘¾ Reddit</h4>
        <p>Post useful free content in r/gis, r/nigeria, r/landsurvey, r/realestate. Don't spam â€” share genuinely helpful coordinate tips, then mention the site naturally.</p>
      </div>
      <div class="monetize-card">
        <h4>ğŸ“˜ Facebook Groups</h4>
        <p>Join Nigerian Land Surveying groups, Real Estate Nigeria, Lagos/Abuja property groups. Share free tools and survey tips with a link to your platform.</p>
      </div>
      <div class="monetize-card">
        <h4>ğŸµ TikTok / Reels</h4>
        <p>Short videos: "How to convert GPS coordinates to UTM" or "What is a C of O?" â€” these topics go viral in Nigerian real estate communities. Show the tool in action.</p>
      </div>
      <div class="monetize-card">
        <h4>ğŸ’¼ LinkedIn</h4>
        <p>Post articles for surveyors, engineers, and real estate professionals. Your SURCON alignment and professional credentials make this audience trust you.</p>
      </div>
      <div class="monetize-card">
        <h4>ğŸ“± WhatsApp Broadcast</h4>
        <p>Send your site link to every contact. Ask surveyors and estate agents to share it in their groups. Offer to help them with coordinates for free in exchange for sharing.</p>
      </div>
    </div>
  </div>

  <!-- Earnings Calculator -->
  <div class="card">
    <div class="card-header"><span class="card-icon">ğŸ§®</span><h2>Revenue Estimator</h2></div>
    <p style="font-size:0.84rem;color:var(--text2);margin-bottom:16px;">Estimate your monthly earnings based on your traffic.</p>
    <div class="form-row">
      <div class="form-group">
        <label>Monthly Page Views</label>
        <input type="number" id="estViews" placeholder="e.g. 5000" value="5000" oninput="calcEstRevenue()">
      </div>
      <div class="form-group">
        <label>Primary Ad Network</label>
        <select id="estNetwork" onchange="calcEstRevenue()">
          <option value="adsense">Google AdSense (CTR 2%, CPC $0.05)</option>
          <option value="adsterra">Adsterra (CPM $0.80)</option>
          <option value="monetag">Monetag (CPM $1.20)</option>
          <option value="direct">Direct Ads (Fixed Fee)</option>
        </select>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label>Equipment Referrals per Month</label>
        <input type="number" id="estReferrals" placeholder="e.g. 2" value="2" oninput="calcEstRevenue()">
      </div>
      <div class="form-group">
        <label>Training Course Referrals</label>
        <input type="number" id="estTraining" placeholder="e.g. 1" value="1" oninput="calcEstRevenue()">
      </div>
    </div>
    <button class="btn btn-green" onclick="calcEstRevenue()">ğŸ’° Calculate Earnings</button>
    <div id="revenueResult" class="result-box" style="margin-top:14px;"></div>
  </div>

</div><!-- END tab-monetize -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PRIVACY POLICY TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="tab-content" id="tab-privacy">
  <div class="card">
    <div class="card-header"><span class="card-icon">ğŸ›¡ï¸</span><h2>Privacy Policy</h2></div>
    <p style="font-size:0.75rem;color:var(--text3);margin-bottom:20px;"><em>Last Updated: January 2026 Â· SurveyPro Elite Â· Arnold Opusunju</em></p>

    <div style="font-size:0.88rem;color:var(--text2);line-height:1.8;display:flex;flex-direction:column;gap:20px;">

      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:8px;">1. Introduction</h3>
        <p>SurveyPro Elite ("we", "our", or "us"), operated by Arnold Opusunju, is committed to protecting your privacy. This Privacy Policy explains how we collect, use, and safeguard your personal information when you use our professional land surveying platform available at techenite.github.io/surveyorpro.</p>
        <p>By using SurveyPro Elite, you agree to the terms described in this policy. If you disagree with any part, please discontinue use of the platform.</p>
      </div>

      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:8px;">2. Information We Collect</h3>
        <p><strong>Information you provide directly:</strong> When you create a survey, fill in client details (name, phone, email, NIN), subscribe to a plan, or contact us, we collect that information. This data is stored locally on your device using browser localStorage and is never automatically transmitted to our servers unless you explicitly share it.</p>
        <p><strong>Survey & GPS Data:</strong> GPS coordinates, survey points, traverse calculations, and reports generated on this platform are stored locally on your device. We do not collect or store your GPS location on our servers.</p>
        <p><strong>Usage Data:</strong> We may collect anonymised analytics about how you use the platform (pages visited, features used, session duration) through third-party services like Google Analytics to improve the platform.</p>
        <p><strong>Cookies:</strong> We use cookies and similar tracking technologies to save your preferences (dark mode, language, etc.) and to display relevant advertisements through our advertising partners.</p>
      </div>

      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:8px;">3. How We Use Your Information</h3>
        <p>We use your information to: provide and improve our professional surveying tools; process payments via Paystack, Opay, or bank transfer; communicate with you about your subscription or service requests; generate survey reports and certificates; display relevant advertisements to support our free services; and comply with applicable Nigerian laws and regulations.</p>
      </div>

      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:8px;">4. Advertising Partners</h3>
        <p>SurveyPro Elite displays advertisements through third-party ad networks including Google AdSense, Adsterra, and/or Monetag. These services may use cookies to serve ads based on your prior visits to this website or other websites. You can opt out of personalised advertising by visiting the Google Ads Settings page or the NAI opt-out page at optout.networkadvertising.org.</p>
        <p>Our advertising partners may collect information about your visits to this and other websites. This information is used to provide advertisements about goods and services likely to be of interest to you.</p>
      </div>

      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:8px;">5. Affiliate Links</h3>
        <p>This platform may contain affiliate links to products on Amazon, Impact, ShareASale, CPALead, and other platforms. If you click on an affiliate link and make a purchase, we may receive a small commission at no extra cost to you. We only recommend products we believe are genuinely useful to land surveyors and real estate professionals.</p>
      </div>

      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:8px;">6. Data Security</h3>
        <p>We take reasonable precautions to protect your personal information. However, no method of transmission over the internet or method of electronic storage is 100% secure. All sensitive survey data is stored locally on your device and is not transmitted to external servers without your explicit action.</p>
      </div>

      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:8px;">7. Your Rights (NDPR Compliance)</h3>
        <p>Under Nigeria's Data Protection Regulation (NDPR), you have the right to access, correct, delete, or object to the processing of your personal data. To exercise these rights, contact us at <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="99f6e9eceaf8ebf7f6f5fdd9fef4f8f0f5b7faf6f4">[email&#160;protected]</a> or +234-811-755-4948.</p>
      </div>

      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:8px;">8. Children's Privacy</h3>
        <p>SurveyPro Elite is a professional platform intended for adults (18+), specifically licensed surveyors, land owners, and real estate professionals. We do not knowingly collect personal information from children under 13.</p>
      </div>

      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:8px;">9. Changes to This Policy</h3>
        <p>We may update this Privacy Policy from time to time. Changes will be posted on this page with an updated date. Your continued use of the platform after changes constitutes your acceptance of the new terms.</p>
      </div>

      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:8px;">10. Contact Us</h3>
        <p>For privacy questions or concerns:<br>
        ğŸ“§ Email: <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="315e41444250435f5e5d5571565c50585d1f525e5c">[email&#160;protected]</a><br>
        ğŸ“ Phone: +234-811-755-4948<br>
        ğŸ’¬ WhatsApp: 08117554948<br>
        ğŸ¢ Arnold Opusunju Â· SurveyPro Elite Â· Nigeria</p>
      </div>
    </div>
  </div>
</div><!-- END tab-privacy -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ABOUT US TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="tab-content" id="tab-about">
  <div class="card">
    <div class="card-header"><span class="card-icon">ğŸ‘¤</span><h2>About SurveyPro Elite</h2></div>

    <div style="background:linear-gradient(135deg,#1a2332,#1e3a5f);color:#fff;border-radius:12px;padding:28px;margin-bottom:20px;text-align:center;">
      <div style="font-size:3rem;margin-bottom:12px;">ğŸ¯</div>
      <h3 style="font-family:var(--ff-display,'Syne',sans-serif);font-size:1.6rem;font-weight:800;margin-bottom:8px;">SurveyPro Elite</h3>
      <p style="opacity:0.75;font-size:0.88rem;">Nigeria's #1 Professional Land Surveying Platform</p>
      <div style="display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:16px;">
        <span style="background:rgba(74,222,128,0.2);color:#4ade80;padding:4px 12px;border-radius:20px;font-size:0.72rem;font-weight:700;">ğŸ‡³ğŸ‡¬ Nigerian-Built</span>
        <span style="background:rgba(74,222,128,0.2);color:#4ade80;padding:4px 12px;border-radius:20px;font-size:0.72rem;font-weight:700;">SURCON Aligned</span>
        <span style="background:rgba(74,222,128,0.2);color:#4ade80;padding:4px 12px;border-radius:20px;font-size:0.72rem;font-weight:700;">WGS84 Â· UTM 31â€“33N</span>
        <span style="background:rgba(74,222,128,0.2);color:#4ade80;padding:4px 12px;border-radius:20px;font-size:0.72rem;font-weight:700;">ğŸŒ¿ Eco-Certified</span>
      </div>
    </div>

    <div style="font-size:0.9rem;color:var(--text2);line-height:1.8;display:flex;flex-direction:column;gap:20px;">
      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:8px;">Our Mission</h3>
        <p>SurveyPro Elite was founded with a clear mission: to make professional land surveying tools accessible to every licensed surveyor, land owner, and real estate professional across all 36 states of Nigeria â€” without the need for expensive desktop software or paper-based processes.</p>
        <p>We are Nigeria's first fully paperless, SURCON-aligned, ISO 14001-compliant professional surveying platform. Every survey conducted through our platform reduces paper waste, saves time, and delivers results with commercial-grade precision.</p>
      </div>

      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:8px;">Meet the Founder</h3>
        <div style="background:#f8fafc;border:2px solid var(--border);border-radius:12px;padding:20px;display:flex;gap:16px;align-items:flex-start;">
          <div style="width:60px;height:60px;background:linear-gradient(135deg,#1a6b3c,#1e40af);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.8rem;flex-shrink:0;">ğŸ‘·</div>
          <div>
            <div style="font-weight:800;font-size:1rem;color:var(--text);">Arnold Opusunju</div>
            <div style="font-size:0.78rem;color:var(--text3);margin-bottom:8px;">Founder & Lead Surveyor Â· SurveyPro Elite</div>
            <p style="font-size:0.84rem;color:var(--text2);">A professional land surveyor with deep expertise in GPS surveying, GIS analysis, coordinate systems (WGS84, UTM, NNO), and Nigerian land administration. Arnold created SurveyPro Elite to bring cutting-edge survey technology to Nigerian professionals â€” built for local conditions, Nigerian datums, and all 36 states.</p>
            <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;">
              <a href="https://wa.me/2348117554948" target="_blank" rel="noopener" class="btn btn-green btn-sm">ğŸ’¬ WhatsApp</a>
              <a href="/cdn-cgi/l/email-protection#2649565355475448494a4266414b474f4a0845494b" class="btn btn-gray btn-sm">ğŸ“§ Email</a>
              <a href="tel:+2348117554948" class="btn btn-gray btn-sm">ğŸ“ Call</a>
            </div>
          </div>
        </div>
      </div>

      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:12px;">Platform Features</h3>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:10px;">
          <div style="background:#f0fdf4;border-radius:8px;padding:12px;font-size:0.82rem;"><strong>ğŸ“¡ GPS Surveying</strong><br>Real-time GPS capture with WGS84 precision</div>
          <div style="background:#eff6ff;border-radius:8px;padding:12px;font-size:0.82rem;"><strong>ğŸŒ Coordinate Conversion</strong><br>Lat/Lon â†” UTM, NNO, multiple datums</div>
          <div style="background:#fef3c7;border-radius:8px;padding:12px;font-size:0.82rem;"><strong>ğŸ“ Plot Layout</strong><br>Canvas-based area calculations & diagrams</div>
          <div style="background:#f0fdf4;border-radius:8px;padding:12px;font-size:0.82rem;"><strong>ğŸ”’ C of O Verification</strong><br>Instant certificate of occupancy checking</div>
          <div style="background:#eff6ff;border-radius:8px;padding:12px;font-size:0.82rem;"><strong>ğŸ—ºï¸ GIS Tools</strong><br>Satellite analysis, photogrammetry, urban planning</div>
          <div style="background:#fef3c7;border-radius:8px;padding:12px;font-size:0.82rem;"><strong>âš™ï¸ Equipment Rental</strong><br>GPS, total stations, drones from â‚¦3,000/day</div>
          <div style="background:#f0fdf4;border-radius:8px;padding:12px;font-size:0.82rem;"><strong>ğŸ“ Training</strong><br>Online & field courses for Nigerian surveyors</div>
          <div style="background:#eff6ff;border-radius:8px;padding:12px;font-size:0.82rem;"><strong>ğŸ’¼ Job Board</strong><br>Survey jobs across all 36 Nigerian states</div>
        </div>
      </div>

      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:8px;">Certifications & Compliance</h3>
        <p>SurveyPro Elite adheres to international and national standards: WGS84 global datum, UTM Zone 31â€“33N, Nigerian NNO/Minna datum, SURCON (Surveyors Council of Nigeria) professional standards, ISO 14001 environmental management, and Nigeria Data Protection Regulation (NDPR) for user privacy.</p>
      </div>

      <div>
        <h3 style="font-weight:800;color:var(--text);margin-bottom:8px;">Advertise With Us</h3>
        <p>Reach 10,000+ Nigerian land surveyors, estate developers, lawyers, and property owners every month. Our audience is highly targeted â€” decision makers in the Nigerian land and real estate sector. Contact us for advertising rates and availability.</p>
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;">
          <a href="https://wa.me/2348117554948?text=I+want+to+advertise+on+SurveyPro+Elite" target="_blank" rel="noopener" class="btn btn-green">ğŸ“¢ Advertise Here</a>
          <button class="btn btn-gray" onclick="showTab('monetize')">ğŸ’° See Rates</button>
        </div>
      </div>

      <div style="background:#1a2332;color:#fff;border-radius:12px;padding:20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;text-align:center;">
        <div><div style="font-size:1.5rem;font-weight:800;color:#4ade80;">10K+</div><div style="font-size:0.68rem;opacity:0.6;">Surveys Done</div></div>
        <div><div style="font-size:1.5rem;font-weight:800;color:#4ade80;">36</div><div style="font-size:0.68rem;opacity:0.6;">States Covered</div></div>
        <div><div style="font-size:1.5rem;font-weight:800;color:#4ade80;">Â±8mm</div><div style="font-size:0.68rem;opacity:0.6;">RTK Accuracy</div></div>
        <div><div style="font-size:1.5rem;font-weight:800;color:#f0b429;">Since 2024</div><div style="font-size:0.68rem;opacity:0.6;">Established</div></div>
        <div><div style="font-size:1.5rem;font-weight:800;color:#4ade80;">100%</div><div style="font-size:0.68rem;opacity:0.6;">Paperless</div></div>
      </div>
    </div>
  </div>
</div><!-- END tab-about -->

</main>

<!-- â•â•â• AD POP-UP MODAL (Content Locker Style) â•â•â• -->
<div class="ad-modal-bg" id="adModalBg">
  <div class="ad-modal-box">
    <button class="ad-modal-close" id="adModalCloseBtn" onclick="closeAdModal()">âœ•</button>
    <div id="adModalContent"></div>
    <div class="ad-countdown" id="adCountdownText"></div>
  </div>
</div>
  <div class="footer-inner">
    <div class="footer-grid">
      <div class="footer-brand">
        <h3 class="display" style="font-size:1.3rem;">ğŸ¯ SurveyPro <span style="color:#4ade80;">Elite</span></h3>
        <p>Nigeria's premier eco-certified professional land surveying platform. WGS84, UTM 31â€“33N, NNO/Minna datum compliant. SURCON aligned. 100% paperless &amp; carbon-neutral. Trusted by surveyors across all 36 states.</p>
        <div style="margin-top:14px;display:flex;gap:8px;flex-wrap:wrap;">
          <span class="badge badge-green">ğŸŒ¿ Eco-Certified</span>
          <span class="badge badge-green">â™»ï¸ ISO 14001</span>
          <span class="badge badge-blue">WGS84</span>
          <span class="badge badge-gold">SURCON Aligned</span>
          <span class="badge badge-green">ğŸ“± PWA Ready</span>
        </div>
      </div>
      <div class="footer-links">
        <h4>Platform</h4>
        <ul>
          <li>GPS Survey Tool</li><li>Coordinate Conversion</li>
          <li>Plot Layout Generator</li><li>GIS Services</li>
          <li>C of O Verification</li><li>Reports Generator</li>
        </ul>
      </div>
      <div class="footer-links">
        <h4>Commercial</h4>
        <ul>
          <li>Equipment Rental (50% cut)</li><li>Training Courses (50% cut)</li>
          <li>GIS Referrals (50% cut)</li><li>Pro Subscription</li>
          <li>Enterprise Plans</li><li>Contact Arnold</li>
        </ul>
      </div>
      <div class="footer-contact">
        <h4>Contact</h4>
        <p>ğŸ“ +234-811-755-4948</p>
        <p>ğŸ“§ <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e48b94919785968a8b8880a48389858d88ca878b89">[email&#160;protected]</a></p>
        <p>ğŸ’³ Opay: 8117554948</p>
        <p>ğŸ’¬ WhatsApp: 08117554948</p>
        <p style="margin-top:10px;font-size:0.78rem;opacity:0.5;">Monâ€“Sat Â· 8AMâ€“6PM WAT</p>
      </div>
    </div>
    <div class="footer-bottom">
      Â© 2026 SurveyPro Elite Â· Arnold Opusunju Â· All Rights Reserved Â· 50% Commission Model Â· WGS84 Â· UTM 31â€“33N Â· NNO<br>
      ğŸŒ¿ Eco-Certified Â· â™»ï¸ ISO 14001 Â· ğŸŒ± Carbon-Neutral Platform Â· ğŸ“„ 100% Paperless Â· ğŸ‡³ğŸ‡¬ Nigeria's #1 Professional Surveying Platform
    </div>
    <!-- LEGAL + MONETIZE FOOTER LINKS -->
    <div class="footer-legal">
      <a href="#" onclick="showTab('privacy');return false;">ğŸ›¡ï¸ Privacy Policy</a>
      <a href="#" onclick="showTab('about');return false;">ğŸ‘¤ About Us</a>
      <a href="#" onclick="showTab('contact');return false;">ğŸ“© Contact</a>
      <a href="#" onclick="showTab('monetize');return false;">ğŸ’° Earn Money</a>
      <a href="https://wa.me/2348117554948?text=I+want+to+advertise+on+SurveyPro+Elite" target="_blank" rel="noopener" class="advertise-link">ğŸ“¢ Advertise Here</a>
      <a href="#" onclick="showTab('pricing');return false;">ğŸ’ Plans & Pricing</a>
    </div>
  </div>
</footer>

<!-- â•â•â• OFFLINE INDICATOR â•â•â• -->
<div id="offlineBar" style="display:none;position:fixed;top:0;left:0;right:0;background:#dc2626;color:#fff;text-align:center;padding:8px;font-size:0.82rem;font-weight:600;z-index:9999;">
  ğŸ“µ Offline â€” Surveys & GPS data saved locally. All tools still work.
</div>
<div style="position:fixed;bottom:90px;right:18px;z-index:3000;display:flex;flex-direction:column;gap:10px;align-items:flex-end;">
  <!-- WhatsApp Float -->
  <a href="https://wa.me/2348117554948?text=Hello%20SurveyPro%20Elite%2C%20I%20need%20professional%20surveying%20services." target="_blank" rel="noopener" 
     style="display:flex;align-items:center;gap:8px;background:#25D366;color:#fff;padding:12px 18px;border-radius:50px;font-weight:700;font-size:0.85rem;text-decoration:none;box-shadow:0 4px 20px rgba(37,211,102,0.45);transition:all .2s;"
     onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="white"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
    WhatsApp Us
  </a>
  <!-- Call Float -->
  <a href="tel:+2348117554948"
     style="display:flex;align-items:center;gap:8px;background:linear-gradient(135deg,#16a34a,#15803d);color:#fff;padding:12px 18px;border-radius:50px;font-weight:700;font-size:0.85rem;text-decoration:none;box-shadow:0 4px 20px rgba(22,163,74,0.4);transition:all .2s;"
     onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
    ğŸ“ Call Now
  </a>
</div>

<!-- â•â•â• PWA INSTALL BAR â•â•â• -->
<div id="installBar" style="display:none;position:fixed;bottom:0;left:0;right:0;background:linear-gradient(135deg,#0f172a,#064e3b);color:#fff;padding:12px 20px;z-index:2000;box-shadow:0 -4px 20px rgba(0,0,0,0.3);">
  <div style="max-width:1280px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;">
    <div style="display:flex;align-items:center;gap:10px;">
      <span style="font-size:1.5rem;">ğŸ¯</span>
      <div><div style="font-weight:700;font-size:0.88rem;">Install SurveyPro Elite</div><div style="font-size:0.72rem;opacity:0.7;">Works offline Â· GPS surveys Â· No app store needed</div></div>
    </div>
    <div style="display:flex;gap:8px;">
      <button onclick="installApp()" style="background:#16a34a;color:#fff;border:none;padding:9px 18px;border-radius:8px;font-weight:700;cursor:pointer;font-family:inherit;">ğŸ“² Install Free</button>
      <button onclick="dismissInstall()" style="background:rgba(255,255,255,0.15);color:#fff;border:none;padding:9px 14px;border-radius:8px;cursor:pointer;">âœ•</button>
    </div>
  </div>
</div>


<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>

'use strict';

// â”€â”€ CLEAR OLD SERVICE WORKERS & CACHES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.getRegistrations().then(regs => {
    regs.forEach(reg => reg.unregister());
  });
}
if ('caches' in window) {
  caches.keys().then(keys => keys.forEach(key => caches.delete(key)));
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CONFIGURATION â€” Update these with your real details
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CFG = {
  phone: '2348117554948',
  opay: '8117554948',
  email: 'opusarnold@gmail.com',
  name: 'Rogers Opus',
  business: 'SurveyPro Elite',
  whatsapp: 'https://wa.me/2348117554948',
  commission: 0.50,
  // â”€â”€ PARTNER SITES â€” 50% goes to partner, 50% to you (Opay: 8117554948) â”€â”€
  gisPartner: 'https://www.esri.com/en-us/industries/surveying/overview',
  gisPartner2: 'https://geosystems.com.ng',
  equipPartner: 'https://www.teknet.com.ng',
  equipPartner2: 'https://jiji.ng/surveying-equipment',
  trainPartner: 'https://www.coursera.org/search?query=GIS+land+surveying',
  trainPartnerAlt: 'https://www.udemy.com/courses/search/?q=land+surveying',
  trainPartnerFree: 'https://qgis.org/en/site/forusers/trainingmaterial/',
  jobsBoard: 'https://www.jobberman.com/jobs/land-surveyor',
  jobsBoard2: 'https://ng.indeed.com/jobs?q=land+surveyor',
  // ğŸ”‘ PAYSTACK PUBLIC KEY â€” Replace with your new key from Paystack dashboard
  // ğŸ”‘ PAYSTACK PUBLIC KEY
  // â–¶ To activate: go to dashboard.paystack.com â†’ Settings â†’ API Keys
  // â–¶ Copy your LIVE Public Key (starts with pk_live_...)
  // â–¶ Replace the value below. Test key = pk_test_... for testing.
  paystack_key: 'pk_live_6815cb7746b6ff047a844437f409cfaabe80252e',
  bankName: 'Opay',
  bankAccount: '8117554948',
  bankAccountName: 'Rogers Opus',
  btc_address: 'bc1qj55vp6rr020z2kwlhdtheg3mkpy48tzdddrmzy'
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let gpsPos = null, watchId = null;
let surveyPts = [];
let surveys = [];
let plotPts = [];
let darkMode = false;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// COURSE & EQUIPMENT DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const COURSES = [
  {id:'gis',name:'Advanced GIS Mapping',price:25000,dur:'12 hrs',level:'Beginner',desc:'Master QGIS and ArcGIS for professional surveying workflows. Map projections, attribute tables, spatial analysis.',platform:'QGIS Academy'},
  {id:'drone',name:'Drone Surveying & Photogrammetry',price:45000,dur:'16 hrs',level:'Intermediate',desc:'Aerial mapping, LiDAR techniques, 3D point cloud processing, orthophoto generation with Pix4D.',platform:'Pix4D Academy'},
  {id:'ai',name:'AI in Land Surveying',price:35000,dur:'10 hrs',level:'Advanced',desc:'Machine learning for automated feature extraction, classification, predictive land analysis.',platform:'Coursera'},
  {id:'rtk',name:'RTK/GNSS Fundamentals',price:20000,dur:'8 hrs',level:'Beginner',desc:'High-precision GPS techniques for cadastral and engineering surveys. Network RTK, CORS stations.',platform:'Trimble Academy'},
  {id:'autocad',name:'AutoCAD Civil 3D for Surveyors',price:30000,dur:'14 hrs',level:'Intermediate',desc:'Drawing, annotation, surface modelling, corridors, alignments and professional survey deliverables.',platform:'Autodesk'},
  {id:'total',name:'Total Station Operations',price:18000,dur:'6 hrs',level:'Beginner',desc:'Field setup, traversing, stakeout, EDM ranging, and digital data management with Leica.',platform:'Leica Academy'},
  {id:'cofo',name:'C of O Processing & Land Law',price:40000,dur:'10 hrs',level:'Intermediate',desc:'Land Use Act, state land laws, C of O application process, due diligence, title verification.',platform:'NIESV'},
  {id:'remote',name:'Remote Sensing Fundamentals',price:22000,dur:'9 hrs',level:'Beginner',desc:'NDVI, SAR, multispectral analysis, Sentinel/Landsat data processing, land cover mapping.',platform:'ESA EO Campus'}
];

const EQUIPMENT = [
  {icon:'ğŸ¯',name:'Total Station',model:'Leica TS16 / TS06',price:20000,desc:'High-precision 2" electronic theodolite with integrated EDM, Bluetooth and onboard memory storage.',features:['2" angular accuracy','3km EDM range','Bluetooth data transfer','Includes tripod & prism set'],link:'https://leica-geosystems.com'},
  {icon:'ğŸ“¡',name:'RTK GNSS Receiver',model:'Trimble R10 / R12i',price:20000,desc:'Multi-constellation RTK GNSS with centimetre-level accuracy, integrated UHF modem and cloud sync.',features:['8mm RTK accuracy','All-constellation GNSS','UHF radio integrated','Real-time cloud sync'],link:'https://trimble.com'},
  {icon:'ğŸš',name:'Survey Drone',model:'DJI Phantom 4 RTK',price:25000,desc:'Professional aerial mapping drone with RTK, 20MP camera, and Pix4D photogrammetry suite.',features:['RTK cm-level accuracy','20MP sensor','Includes Pix4D licence','45-min flight time'],link:'https://dji.com'},
  {icon:'ğŸ“',name:'Digital Level',model:'Leica DNA03',price:8000,desc:'High-precision digital auto-level for precise elevation and height difference measurements.',features:['0.3mm/km accuracy','Auto bar-code reading','2000-point internal memory','With invar staff included'],link:'https://leica-geosystems.com'},
  {icon:'âš¡',name:'3D Laser Scanner',model:'Leica RTC360',price:30000,desc:'Ultra-fast 3D reality capture scanner for BIM, heritage documentation, and infrastructure surveys.',features:['2M points/sec','360Â° full-sphere capture','HDR panoramic imaging','Auto-register in field'],link:'https://leica-geosystems.com'},
  {icon:'ğŸ”­',name:'Electronic Theodolite',model:'Topcon DT-209L',price:6000,desc:'Professional 9" electronic theodolite with dual-axis compensation and digital display readout.',features:['9" angular accuracy','Dual-axis compensation','Backlit digital display','IP54 waterproof'],link:'https://topcon.com'},
  {icon:'ğŸŒ',name:'Handheld GPS',model:'Garmin GPSMAP 66st',price:3000,desc:'Rugged multi-constellation handheld GPS for field navigation, waypoint collection, and area estimation.',features:['3â€“5m accuracy','All-weather IPX7','100,000-point capacity','Topo maps pre-loaded'],link:'https://garmin.com'},
  {icon:'ğŸ“Œ',name:'Ground Penetrating Radar',model:'GSSI SIR 4000',price:50000,desc:'Professional GPR for subsurface utility mapping, void detection, rebar location, and buried pipe surveys.',features:['Multi-frequency antennas','Real-time 3D display','GPS integration','IQBS target ID'],link:'https://geophysical.com'}
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('DOMContentLoaded', () => {
  loadSurveys();
  buildEquipment();
  filterEquipment(); // initialize with default (all) filter
  buildCourses();
  updateHistory();
  updateReportDropdown();
  initPlotCanvas();
  AUTH.init();
  initJobBoard();
  initDirectory();
  // Check for thanks param (Formspree redirect)
  const urlP = new URLSearchParams(window.location.search);
  if(urlP.get('thanks')==='1') showBanner('âœ… Message sent! We\'ll reply within 24 hours.');
  // Restore dark mode
  try { if(localStorage.getItem('sp_dark')==='1'){darkMode=true;document.body.classList.add('dark');if(g('darkBtn'))g('darkBtn').textContent='â˜€ï¸ Light';} } catch(e){}
  // PWA install prompt
  setTimeout(()=>{
    const ib=document.getElementById('installBar');
    if(ib&&deferredInstallPrompt) ib.style.display='flex';
  }, 4000);

  // â”€â”€ ECO WELCOME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  setTimeout(() => {
    toast('ğŸŒ¿ Welcome! SurveyPro Elite â€” 100% paperless & carbon-neutral.','success');
  }, 1800);
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// COORDINATE MODE TOGGLES (Northing/Easting â†” Lat/Lon)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var _manMode = 'ne';
function setManualMode(mode) {
  _manMode = mode;
  var isNE = mode==='ne';
  var l1=document.getElementById('manField1Lbl');
  var l2=document.getElementById('manField2Lbl');
  var f1=document.getElementById('manualN');
  var f2=document.getElementById('manualE');
  var b1=document.getElementById('manModeNE');
  var b2=document.getElementById('manModeLL');
  if(!l1||!l2||!f1||!f2) return;
  if(isNE){
    l1.textContent='Northing (m)'; l2.textContent='Easting (m)';
    f1.placeholder='857881.968'; f2.placeholder='707032.831';
    f1.step='0.001'; f2.step='0.001';
    if(b1){b1.style.background='var(--accent)';b1.style.color='#fff';}
    if(b2){b2.style.background='var(--border)';b2.style.color='var(--text)';}
  } else {
    l1.textContent='Latitude (Â°)'; l2.textContent='Longitude (Â°)';
    f1.placeholder='7.7577114'; f2.placeholder='4.5388769';
    f1.step='0.0000001'; f2.step='0.0000001';
    if(b1){b1.style.background='var(--border)';b1.style.color='var(--text)';}
    if(b2){b2.style.background='var(--accent)';b2.style.color='#fff';}
  }
  f1.value=''; f2.value='';
}
var _plotMode = 'latlon';
function setPlotMode(mode) {
  _plotMode = mode;
  var isNE = mode==='ne';
  var l1=document.getElementById('plotField1Lbl');
  var l2=document.getElementById('plotField2Lbl');
  var f1=document.getElementById('plotLat');
  var f2=document.getElementById('plotLon');
  var b1=document.getElementById('plotModeLatLon');
  var b2=document.getElementById('plotModeNE');
  if(!l1||!l2||!f1||!f2) return;
  if(isNE){
    l1.textContent='Start Northing (m)'; l2.textContent='Start Easting (m)';
    f1.placeholder='857881.968'; f2.placeholder='707032.831';
    f1.step='0.001'; f2.step='0.001';
    if(b1){b1.style.background='var(--border)';b1.style.color='var(--text)';}
    if(b2){b2.style.background='var(--accent)';b2.style.color='#fff';}
  } else {
    l1.textContent='Start Latitude (Â°)'; l2.textContent='Start Longitude (Â°)';
    f1.placeholder='7.75771146'; f2.placeholder='4.53887695';
    f1.step='0.0000001'; f2.step='0.0000001';
    if(b1){b1.style.background='var(--accent)';b1.style.color='#fff';}
    if(b2){b2.style.background='var(--border)';b2.style.color='var(--text)';}
  }
  f1.value=''; f2.value='';
}
// UTM N/E â†’ Lat/Lon (Nigeria zones 31-33)
function neToLatLon(northing, easting, zone) {
  zone = zone||32;
  var k0=0.9996,a=6378137,e2=0.00669438;
  var x=easting-500000,y=northing;
  var M=y/k0;
  var e1=(1-Math.sqrt(1-e2))/(1+Math.sqrt(1-e2));
  var mu=M/(a*(1-e2/4-3*e2*e2/64-5*e2*e2*e2/256));
  var phi1=mu+(3*e1/2-27*e1*e1*e1/32)*Math.sin(2*mu)+(21*e1*e1/16)*Math.sin(4*mu);
  var N1=a/Math.sqrt(1-e2*Math.pow(Math.sin(phi1),2));
  var T1=Math.pow(Math.tan(phi1),2);
  var C1=e2/(1-e2)*Math.pow(Math.cos(phi1),2);
  var R1=a*(1-e2)/Math.pow(1-e2*Math.pow(Math.sin(phi1),2),1.5);
  var D=x/(N1*k0);
  var lat=phi1-(N1*Math.tan(phi1)/R1)*(D*D/2-(5+3*T1+10*C1)*D*D*D*D/24);
  var lon0=((zone-1)*6-180+3)*Math.PI/180;
  var lon=lon0+(D-(1+2*T1+C1)*D*D*D/6)/Math.cos(phi1);
  return {lat:lat*180/Math.PI, lon:lon*180/Math.PI};
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TABS â€” fully open, no login wall
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const PUBLIC_TABS = ['home','pricing','contact','coords','equipment','training','jobs','directory','verify','tools','survey','plot','gis','history','reports','payments'];
function showTab(t) {
  // All tabs are publicly accessible â€” no login required
  document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
  const tc = document.getElementById('tab-' + t);
  if(tc) tc.classList.add('active');
  const nb = document.getElementById('nb-' + t);
  if(nb) nb.classList.add('active');
  if(t === 'plot') setTimeout(initPlotCanvas, 100);
  if(t === 'history') updateHistory();
  if(t === 'reports') updateReportDropdown();
  window.scrollTo({top:0,behavior:'smooth'});
  try { history.replaceState(null,'','?tab='+t); } catch(e) {}
}

function showCoord(c) {
  document.querySelectorAll('.coord-pane').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.sub-tab').forEach(el => el.classList.remove('active'));
  const cp = document.getElementById('cp-' + c);
  if(cp) cp.classList.add('active');
  const ct = document.getElementById('ct-' + c);
  if(ct) ct.classList.add('active');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GPS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function enableGPS() {
  if(!navigator.geolocation){toast('GPS not supported by this browser','error');return;}
  const box = g('gpsInfoBox');
  box.innerHTML = '<p style="color:var(--accent2);">ğŸ”„ Acquiring GPS signal... Please wait and remain outdoors with clear sky.</p>';
  watchId = navigator.geolocation.watchPosition(pos => {
    gpsPos = pos.coords;
    const acc = pos.coords.accuracy;
    const accClass = acc < 5 ? 'color:#16a34a' : acc < 15 ? 'color:#d97706' : 'color:#dc2626';
    const accTxt = acc < 5 ? 'ğŸŸ¢ High' : acc < 15 ? 'ğŸŸ¡ Medium' : 'ğŸ”´ Low';
    box.innerHTML = `<p style="font-weight:700;color:var(--accent);margin-bottom:8px;">âœ… GPS Active â€” ${accTxt} Accuracy</p>`;
    g('gpsInfoGrid').style.display = 'grid';
    g('gpsInfoGrid').innerHTML = `
      <div class="gps-info-item"><div class="label">LATITUDE</div><div class="val">${pos.coords.latitude.toFixed(7)}Â°</div></div>
      <div class="gps-info-item"><div class="label">LONGITUDE</div><div class="val">${pos.coords.longitude.toFixed(7)}Â°</div></div>
      <div class="gps-info-item"><div class="label">ACCURACY</div><div class="val" style="${accClass}">Â±${acc.toFixed(1)} m</div></div>
      <div class="gps-info-item"><div class="label">ALTITUDE</div><div class="val">${(pos.coords.altitude||0).toFixed(1)} m</div></div>
      <div class="gps-info-item"><div class="label">SPEED</div><div class="val">${(pos.coords.speed||0).toFixed(2)} m/s</div></div>
      <div class="gps-info-item"><div class="label">HEADING</div><div class="val">${pos.coords.heading ? pos.coords.heading.toFixed(1)+'Â°' : 'N/A'}</div></div>`;
    g('gpsDot').className = 'gps-dot active';
    g('gpsLabel').textContent = `GPS Â±${acc.toFixed(0)}m`;
  }, err => {
    toast('GPS error: ' + err.message, 'error');
    g('gpsDot').className = 'gps-dot';
    g('gpsLabel').textContent = 'GPS Error';
    box.innerHTML = `<p style="color:var(--danger);">âŒ GPS Error: ${err.message}. Check permissions.</p>`;
  }, {enableHighAccuracy:true, maximumAge:500, timeout:15000});
}

function stopGPS() {
  if(watchId !== null){navigator.geolocation.clearWatch(watchId);watchId=null;}
  g('gpsDot').className = 'gps-dot';
  g('gpsLabel').textContent = 'GPS Off';
  g('gpsInfoGrid').style.display = 'none';
  g('gpsInfoBox').innerHTML = '<p style="color:var(--text2);font-size:0.85rem;">GPS stopped. Click Enable GPS to restart.</p>';
  toast('GPS stopped','info');
}

function getCurrentLocationInfo() {
  if(!navigator.geolocation){
    openModal(`<div style="text-align:center;padding:20px;">
      <div style="font-size:3rem;margin-bottom:12px;">ğŸ“µ</div>
      <h3 style="font-weight:800;margin-bottom:8px;">GPS Not Available</h3>
      <p style="font-size:0.85rem;color:var(--text2);">Your browser or device does not support GPS/Geolocation. Try using Chrome or Firefox on a mobile device.</p>
      <button class="btn btn-primary btn-full" style="margin-top:16px;" onclick="closeModal()">OK</button>
    </div>`);
    return;
  }
  // Show loading state
  openModal(`<div style="text-align:center;padding:30px 20px;">
    <div style="font-size:3rem;margin-bottom:16px;">ğŸ›°ï¸</div>
    <h3 style="font-weight:700;margin-bottom:8px;">Getting Your Location...</h3>
    <p style="font-size:0.82rem;color:var(--text2);">Please wait. Allow location access if prompted.</p>
    <div style="margin-top:16px;height:4px;background:#e2e8f0;border-radius:2px;overflow:hidden;">
      <div style="height:100%;width:60%;background:var(--accent);border-radius:2px;animation:progress 2s infinite;"></div>
    </div>
  </div>`);

  navigator.geolocation.getCurrentPosition(
    pos => {
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;
      const acc = pos.coords.accuracy;
      const alt = pos.coords.altitude || 0;
      const utm = latLonToUTM(lat, lon);
      const accColor = acc<10 ? '#16a34a' : acc<30 ? '#d97706' : '#dc2626';
      const accLabel = acc<10 ? 'ğŸŸ¢ High Precision' : acc<30 ? 'ğŸŸ¡ Medium' : 'ğŸ”´ Low â€” move outdoors';

      openModal(`<div>
        <h3 style="font-weight:800;font-size:1.1rem;margin-bottom:16px;text-align:center;">ğŸ“ Your Current Location</h3>

        <div style="display:grid;gap:10px;font-size:0.84rem;margin-bottom:16px;">
          <div style="background:#f0fdf4;border:2px solid #86efac;border-radius:10px;padding:14px;">
            <div style="font-size:0.7rem;font-weight:800;color:var(--text3);letter-spacing:1px;margin-bottom:6px;">LATITUDE / LONGITUDE (WGS84)</div>
            <div class="mono" style="font-size:1rem;font-weight:700;">${lat.toFixed(7)}Â°N &nbsp; ${lon.toFixed(7)}Â°E</div>
          </div>
          <div style="background:#eff6ff;border:2px solid #bfdbfe;border-radius:10px;padding:14px;">
            <div style="font-size:0.7rem;font-weight:800;color:var(--text3);letter-spacing:1px;margin-bottom:6px;">UTM ZONE ${utm.zone}N (NORTHING / EASTING)</div>
            <div class="mono" style="font-size:1rem;font-weight:700;">N: ${utm.northing.toFixed(3)} &nbsp;|&nbsp; E: ${utm.easting.toFixed(3)}</div>
          </div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
            <div style="background:#f8fafc;border-radius:8px;padding:10px;text-align:center;">
              <div style="font-size:0.7rem;color:var(--text3);margin-bottom:3px;">ACCURACY</div>
              <div style="font-weight:700;color:${accColor};">Â±${acc.toFixed(1)}m</div>
              <div style="font-size:0.72rem;color:${accColor};">${accLabel}</div>
            </div>
            <div style="background:#f8fafc;border-radius:8px;padding:10px;text-align:center;">
              <div style="font-size:0.7rem;color:var(--text3);margin-bottom:3px;">ALTITUDE</div>
              <div style="font-weight:700;">${alt.toFixed(1)}m</div>
            </div>
          </div>
        </div>

        <p style="font-size:0.78rem;color:var(--text2);margin-bottom:10px;font-weight:600;">Use this location in:</p>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:8px;">
          <button class="btn btn-green" onclick="
            const utm=latLonToUTM(${lat},${lon});
            const manN=document.getElementById('manualN');
            const manE=document.getElementById('manualE');
            if(manN){manN.value=utm.northing.toFixed(3);}
            if(manE){manE.value=utm.easting.toFixed(3);}
            const manElev=document.getElementById('manualElev');
            if(manElev){manElev.value='${alt.toFixed(3)}';}
            closeModal();
            showTab('survey');
            toast('Location loaded into Manual Point â†’ Northing &amp; Easting filled!','success');
          ">ğŸ“¡ Survey Tool<br><small>Fills N/E</small></button>
          <button class="btn btn-blue" onclick="
            const pl=document.getElementById('plotLat');
            const plo=document.getElementById('plotLon');
            if(pl){pl.value='${lat}';}
            if(plo){plo.value='${lon}';}
            closeModal();
            showTab('plot');
            toast('Location loaded into Plot Layout!','success');
          ">ğŸ“ Plot Layout<br><small>Fills Lat/Lon</small></button>
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
          <button class="btn btn-primary" onclick="
            const coords='${lat.toFixed(7)}, ${lon.toFixed(7)}';
            if(navigator.clipboard){navigator.clipboard.writeText(coords).then(()=>toast('Lat/Lon copied to clipboard!','success'));}
            closeModal();
          ">ğŸ“‹ Copy Lat/Lon</button>
          <button class="btn btn-gray" onclick="closeModal()">Close</button>
        </div>
      </div>`);
    },
    err => {
      let hint = '';
      if(err.code===1) hint='Go to your browser Settings â†’ Site permissions â†’ Location â†’ Allow this site.';
      else if(err.code===2) hint='Move to an open area or enable Wi-Fi to help locate your position.';
      else hint='The request timed out. Tap "My Location" again.';
      openModal(`<div style="text-align:center;padding:10px;">
        <div style="font-size:3rem;margin-bottom:12px;">âš ï¸</div>
        <h3 style="font-weight:800;color:var(--danger);margin-bottom:8px;">Location Error</h3>
        <p style="font-size:0.85rem;color:var(--text2);margin-bottom:8px;">${err.message}</p>
        <p style="font-size:0.82rem;color:var(--accent2);background:#eff6ff;padding:10px;border-radius:8px;text-align:left;">${hint}</p>
        <button class="btn btn-primary btn-full" style="margin-top:14px;" onclick="closeModal()">OK</button>
      </div>`);
    },
    {enableHighAccuracy:true, timeout:20000, maximumAge:0}
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SURVEY POINTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function addGPSPoint() {
  if(!gpsPos){toast('Enable GPS first','warning');return;}
  const utm = latLonToUTM(gpsPos.latitude, gpsPos.longitude);
  surveyPts.push({
    id:surveyPts.length+1, lat:gpsPos.latitude, lon:gpsPos.longitude,
    n:utm.northing, e:utm.easting, elev:gpsPos.altitude||0,
    acc:gpsPos.accuracy, src:'GPS',
    desc:'GPS Point '+(surveyPts.length+1), ts:new Date().toISOString()
  });
  updateSurveyDisplay();
  toast(`GPS Point ${surveyPts.length} added (Â±${gpsPos.accuracy.toFixed(1)}m)`,'success');
}

function addManualPointToggle() {
  g('manualBox').classList.toggle('open');
}

function confirmManualPoint() {
  const val1=parseFloat(g('manualN').value), val2=parseFloat(g('manualE').value);
  const elev=parseFloat(g('manualElev').value)||0;
  const desc=g('manualDesc').value.trim()||('Point '+(surveyPts.length+1));
  if(isNaN(val1)||isNaN(val2)){
    toast('Enter valid coordinates in both fields','warning');
    g('manualN').focus();
    return;
  }
  var n, e, lat=0, lon=0;
  if(typeof _manMode !=='undefined' && _manMode==='latlon'){
    // Lat/Lon mode â€” convert to UTM
    lat=val1; lon=val2;
    if(lat<3||lat>14||lon<2||lon>15){toast('Coordinates look outside Nigeria. Check values.','warning');return;}
    const utm=latLonToUTM(lat,lon);
    n=utm.northing; e=utm.easting;
  } else {
    // Northing/Easting mode (default)
    n=val1; e=val2;
    if(n<500000||n>1500000){toast('Northing looks unusual for Nigeria. Expected ~800,000â€“1,200,000m','warning');}
    if(e<100000||e>900000){toast('Easting looks unusual. Expected ~200,000â€“700,000m','warning');}
  }
  surveyPts.push({id:surveyPts.length+1,n,e,elev,lat,lon,src:'Manual',desc,ts:new Date().toISOString()});
  g('manualN').value=''; g('manualE').value=''; g('manualElev').value=''; g('manualDesc').value='';
  g('manualBox').classList.remove('open');
  updateSurveyDisplay();
  toast(`âœ… Manual Point ${surveyPts.length} added (${typeof _manMode!=='undefined'&&_manMode==='latlon'?'Lat/Lon converted to N/E':'Northing/Easting'})`,'success');
}

function undoPoint() {
  if(surveyPts.length===0){toast('No points to undo','warning');return;}
  const removed=surveyPts.pop();
  updateSurveyDisplay();
  toast(`Point ${removed.id} removed`,'info');
}

function clearSurvey() {
  if(surveyPts.length===0)return;
  if(!confirm('Clear all survey points? This cannot be undone.'))return;
  surveyPts=[];
  updateSurveyDisplay();
  toast('Survey cleared','info');
}

function importCSVPoints() {
  const input=document.createElement('input');
  input.type='file';input.accept='.csv,.txt';
  input.onchange=e=>{
    const file=e.target.files[0];
    if(!file)return;
    const reader=new FileReader();
    reader.onload=ev=>{
      const lines=ev.target.result.split('\n').filter(l=>l.trim());
      let added=0;
      lines.forEach(line=>{
        const parts=line.split(/[,\t]/);
        if(parts.length>=2){
          const n=parseFloat(parts[0]),e=parseFloat(parts[1]),el=parseFloat(parts[2])||0;
          const desc=parts[3]?parts[3].trim():`CSV-${surveyPts.length+1}`;
          if(!isNaN(n)&&!isNaN(e)){
            surveyPts.push({id:surveyPts.length+1,n,e,elev:el,lat:0,lon:0,src:'CSV',desc,ts:new Date().toISOString()});
            added++;
          }
        }
      });
      updateSurveyDisplay();
      toast(`${added} points imported from CSV`,'success');
    };
    reader.readAsText(file);
  };
  input.click();
}

function updateSurveyDisplay() {
  const n=surveyPts.length;
  g('ptCount').textContent=n;
  let ha=0,ac=0,perim=0,sqm=0;
  if(n>=3){sqm=shoelace(surveyPts);ha=sqm/10000;ac=ha*2.47105;perim=calcPerimeter(surveyPts);}
  g('areaHa').textContent=ha.toFixed(4);
  g('areaAc').textContent=ac.toFixed(4);
  g('areaSqm').textContent=sqm.toFixed(0);
  g('plotsCount').textContent=(ha*10000/1500).toFixed(1);
  g('perim').textContent=perim.toFixed(2);
  if(n>=2){
    const p1=surveyPts[n-2],p2=surveyPts[n-1];
    const dn=p2.n-p1.n,de=p2.e-p1.e;
    const dist=Math.sqrt(dn*dn+de*de);
    const bear=((Math.atan2(de,dn)*180/Math.PI)+360)%360;
    g('bearingInfo').textContent=`Bearing: ${bear.toFixed(4)}Â° Â· Dist: ${dist.toFixed(3)}m`;
  } else {g('bearingInfo').textContent='â€”';}
  if(n===0){g('pointsTableWrap').innerHTML='';return;}
  let html=`<table class="data-table"><thead><tr><th>Pt</th><th>Description</th><th>Northing (m)</th><th>Easting (m)</th><th>Elevation (m)</th><th>Src</th><th>Acc</th></tr></thead><tbody>`;
  surveyPts.forEach(p=>{
    html+=`<tr><td style="text-align:center;font-weight:700;">${p.id}</td><td>${p.desc||''}</td><td class="mono">${p.n.toFixed(3)}</td><td class="mono">${p.e.toFixed(3)}</td><td class="mono">${p.elev.toFixed(3)}</td><td style="text-align:center;">${p.src}</td><td style="text-align:center;">${p.acc?'Â±'+p.acc.toFixed(1)+'m':'â€”'}</td></tr>`;
  });
  html+='</tbody></table>';
  g('pointsTableWrap').innerHTML=html;
}

function completeSurvey() {
  const cN=v('clientName'),cP=v('clientPhone'),pN=v('projectName'),loc=v('location');
  if(!cN||!cP||!pN||!loc){toast('Fill all required client fields (*)','warning');return;}
  if(surveyPts.length<3){toast('Need at least 3 survey points','warning');return;}
  const sqm=shoelace(surveyPts),ha=sqm/10000,ac=ha*2.47105,perim=calcPerimeter(surveyPts);
  const code='NGS-'+Math.random().toString(36).substr(2,8).toUpperCase();
  const survey={
    id:Date.now(),clientName:cN,clientPhone:cP,clientEmail:v('clientEmail'),
    clientNIN:v('clientNIN'),projectName:pN,location:loc,fileNumber:v('fileNumber'),
    surveyType:v('surveyType'),hectares:ha,acres:ac,sqm,perimeter:perim,
    plots:ha*10000/1500,points:surveyPts.length,verificationCode:code,
    savedAt:new Date().toISOString(),coordSystem:v('coordSys'),
    hDatum:v('hDatum'),vDatum:v('vDatum'),notes:v('surveyNotes'),
    pts:JSON.parse(JSON.stringify(surveyPts)),surveyor:CFG.name
  };
  surveys.push(survey);
  saveSurveys();
  updateHistory();
  updateReportDropdown();
  openModal(`<div style="text-align:center;">
    <div style="font-size:4rem;margin-bottom:10px;">âœ…</div>
    <h3 style="font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:1.4rem;font-weight:800;color:var(--accent);margin-bottom:16px;">Survey Complete!</h3>
    <div style="background:#f0fdf4;border:2px dashed var(--accent);border-radius:12px;padding:20px;margin-bottom:18px;">
      <div style="font-size:0.75rem;color:var(--text3);margin-bottom:4px;">VERIFICATION CODE</div>
      <div style="font-family:var(--ff-mono,'JetBrains Mono','Courier New',monospace);font-size:1.6rem;font-weight:700;color:var(--accent);letter-spacing:0.1em;">${code}</div>
      <div style="font-size:0.72rem;color:var(--text3);margin-top:4px;">${v('coordSys')}</div>
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px;">
      <div style="background:#f0fdf4;border-radius:10px;padding:12px;"><div style="font-size:0.72rem;color:var(--text3);">Hectares</div><div style="font-size:1.4rem;font-weight:800;color:var(--accent);">${ha.toFixed(4)}</div></div>
      <div style="background:#eff6ff;border-radius:10px;padding:12px;"><div style="font-size:0.72rem;color:var(--text3);">Acres</div><div style="font-size:1.4rem;font-weight:800;color:var(--accent2);">${ac.toFixed(4)}</div></div>
      <div style="background:#f8fafc;border-radius:10px;padding:12px;"><div style="font-size:0.72rem;color:var(--text3);">Sq Metres</div><div style="font-size:1.2rem;font-weight:800;">${sqm.toFixed(2)}</div></div>
      <div style="background:#fffbeb;border-radius:10px;padding:12px;"><div style="font-size:0.72rem;color:var(--text3);">Perimeter (m)</div><div style="font-size:1.2rem;font-weight:800;">${perim.toFixed(2)}</div></div>
    </div>
    <div style="background:#f8fafc;border-radius:10px;padding:12px;text-align:left;font-size:0.82rem;margin-bottom:16px;">
      <div><strong>Client:</strong> ${cN} Â· ${cP}</div>
      <div><strong>Project:</strong> ${pN} Â· ${loc}</div>
      <div><strong>Points:</strong> ${surveyPts.length} Â· Type: ${v('surveyType')}</div>
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
      <button class="btn btn-green" onclick="closeModal()">Done âœ“</button>
      <button class="btn btn-blue" onclick="closeModal();showTab('history')">View History</button>
    </div>
  </div>`);
  surveyPts=[];
  updateSurveyDisplay();
}

function emailSurvey() {
  const email=v('clientEmail');
  if(!email){toast('Enter client email first','warning');return;}
  const body=`SURVEY REPORT\n\nProject: ${v('projectName')}\nLocation: ${v('location')}\nClient: ${v('clientName')}\nPhone: ${v('clientPhone')}\n\nPoints: ${surveyPts.length}\nSurveyor: ${CFG.name}\nContact: ${CFG.email} Â· +234-811-755-4948\n\nâ€” SurveyPro Elite`;
  window.location.href=`mailto:${email}?subject=Survey Report - ${v('projectName')}&body=${encodeURIComponent(body)}`;
}

function whatsappSurvey() {
  const n=surveyPts.length;
  let ha=0,ac=0;
  if(n>=3){const sqm=shoelace(surveyPts);ha=sqm/10000;ac=ha*2.47105;}
  const msg=`ğŸ“Š *SURVEY REPORT â€” SurveyPro Elite*\n\n*Project:* ${v('projectName')||'N/A'}\n*Client:* ${v('clientName')||'N/A'}\n*Location:* ${v('location')||'N/A'}\n*Points:* ${n}\n*Area:* ${ha.toFixed(4)} ha / ${ac.toFixed(4)} acres\n\n*Surveyor:* ${CFG.name}\nğŸ“§ ${CFG.email}\nğŸ“ +234-811-755-4948`;
  window.open(`${CFG.whatsapp}?text=${encodeURIComponent(msg)}`,'_blank');
}

function printSurvey() {
  const pN=v('projectName')||'Survey Project';
  const n=surveyPts.length;
  let ha=0,ac=0,sqm=0,perim=0;
  if(n>=3){sqm=shoelace(surveyPts);ha=sqm/10000;ac=ha*2.47105;perim=calcPerimeter(surveyPts);}
  let tableRows=surveyPts.map(p=>`<tr><td>${p.id}</td><td>${p.desc||''}</td><td>${p.n.toFixed(3)}</td><td>${p.e.toFixed(3)}</td><td>${p.elev.toFixed(3)}</td><td>${p.src}</td></tr>`).join('');
  const html=`<!DOCTYPE html><html><head><title>Survey Report â€” ${pN}</title><style>
/* === ANTI-BLANK-SCREEN: Force body visible at all times === */
html{opacity:1!important;visibility:visible!important;}
body{opacity:1!important;visibility:visible!important;display:block!important;font-family:'Segoe UI',system-ui,sans-serif;}body{font-family:Arial,sans-serif;max-width:800px;margin:30px auto;padding:20px;color:#111;}h1{font-size:1.4rem;text-align:center;}table{width:100%;border-collapse:collapse;margin-top:14px;}th,td{border:1px solid #ccc;padding:6px 10px;font-size:0.82rem;}th{background:#0f172a;color:#fff;}.grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:14px 0;}.stat{background:#f8fafc;border:1px solid #e2e8f0;padding:10px;border-radius:6px;text-align:center;}.sl{font-size:0.72rem;color:#666;}.sv{font-weight:700;font-size:1.2rem;}header{text-align:center;border-bottom:2px solid #0f172a;padding-bottom:14px;margin-bottom:18px;}</style></head><body>
  <header><h1>SURVEY REPORT</h1><p>SurveyPro Elite | ${CFG.name} | ${new Date().toLocaleDateString('en-NG')}</p></header>
  <p><strong>Project:</strong> ${pN} | <strong>Location:</strong> ${v('location')}</p>
  <p><strong>Client:</strong> ${v('clientName')} | <strong>Phone:</strong> ${v('clientPhone')} | <strong>Type:</strong> ${v('surveyType')}</p>
  <p><strong>System:</strong> ${v('coordSys')} | <strong>Datum:</strong> ${v('hDatum')}</p>
  <div class="grid">
    <div class="stat"><div class="sl">HECTARES</div><div class="sv">${ha.toFixed(4)}</div></div>
    <div class="stat"><div class="sl">ACRES</div><div class="sv">${ac.toFixed(4)}</div></div>
    <div class="stat"><div class="sl">SQ METRES</div><div class="sv">${sqm.toFixed(2)}</div></div>
    <div class="stat"><div class="sl">PERIMETER (m)</div><div class="sv">${perim.toFixed(2)}</div></div>
  </div>
  <table><thead><tr><th>Pt</th><th>Description</th><th>Northing (m)</th><th>Easting (m)</th><th>Elevation (m)</th><th>Source</th></tr></thead><tbody>${tableRows}</tbody></table>
  <p style="margin-top:20px;font-size:0.75rem;color:#888;">Generated by SurveyPro Elite Â· ${CFG.email} Â· +234-811-755-4948 Â· Eco-Certified Digital Platform</p>
  <script>window.print();<\/script></body></html>`;
  const w=window.open('','_blank');
  if(w){w.document.write(html);w.document.close();}
}

function exportSurveyJSON() {
  const data={surveyPts,clientName:v('clientName'),projectName:v('projectName'),location:v('location'),exportedAt:new Date().toISOString(),platform:'SurveyPro Elite v2.0'};
  const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
  const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=`survey-${Date.now()}.json`;a.click();
  toast('Survey exported as JSON','success');
}

function generateQR() {
  const n=surveyPts.length;
  if(n<3){toast('Complete survey first (need 3+ points)','warning');return;}
  const ha=(shoelace(surveyPts)/10000).toFixed(4);
  const text=`SurveyPro Elite\nProject: ${v('projectName')}\nClient: ${v('clientName')}\nArea: ${ha} ha\nDate: ${new Date().toLocaleDateString('en-NG')}`;
  openModal(`<div style="text-align:center;">
    <h3 style="font-weight:700;margin-bottom:14px;">ğŸ“± Survey QR Code</h3>
    <div id="qrMod" style="display:inline-block;"></div>
    <p style="font-size:0.8rem;color:var(--text2);margin-top:12px;">Scan to view survey summary</p>
    <button class="btn btn-gray btn-full" style="margin-top:14px;" onclick="closeModal()">Close</button>
  </div>`);
  setTimeout(()=>{
    if(window.QRCode) new QRCode(document.getElementById('qrMod'),{text,width:200,height:200});
    else document.getElementById('qrMod').textContent='QR library loading...';
  },200);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// COORDINATE CONVERSIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function latLonToUTM(lat, lon, forceZone) {
  const zone=forceZone||(Math.floor((lon+180)/6)+1);
  const k0=0.9996,a=6378137.0,e=0.081819191;
  const latR=lat*Math.PI/180;
  const lonO=(zone-1)*6-180+3;
  const lonR=(lon-lonO)*Math.PI/180;
  const N=a/Math.sqrt(1-e*e*Math.sin(latR)**2);
  const T=Math.tan(latR)**2;
  const C=(e*e/(1-e*e))*Math.cos(latR)**2;
  const A=lonR*Math.cos(latR);
  const M=a*((1-e*e/4-3*e**4/64)*latR-(3*e*e/8+3*e**4/32)*Math.sin(2*latR)+(15*e**4/256)*Math.sin(4*latR));
  const easting=k0*N*(A+(1-T+C)*A**3/6+(5-18*T+T*T+72*C)*A**5/120)+500000;
  const northing=k0*(M+N*Math.tan(latR)*(A*A/2+(5-T+9*C+4*C*C)*A**4/24+(61-58*T+T*T)*A**6/720));
  return {zone,easting,northing};
}

// â”€â”€ PROJECTION INFO HELPER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateConvProjectionInfo() {
  const p = document.getElementById('conv-projection')?.value || 'UTM32N';
  const nameEl = document.getElementById('conv-datum-name');
  const detailEl = document.getElementById('conv-datum-detail');
  const zoneEl = document.getElementById('conv-zone-info');
  const D = {
    'UTM31N': ['WGS 84 (EPSG:4326)','GRS80 Â· a=6,378,137m Â· 1/f=298.257 Â· kâ‚€=0.9996','ğŸ“ Zone 31N West Belt: Lagos Â· Ogun Â· Oyo Â· Kebbi Â· Sokoto Â· Niger Â· Zamfara (3Â°Eâ€“9Â°E)'],
    'UTM32N': ['WGS 84 (EPSG:4326)','GRS80 Â· a=6,378,137m Â· 1/f=298.257 Â· kâ‚€=0.9996','ğŸ“ Zone 32N Mid Belt: FCT Â· Rivers Â· Delta Â· Kano Â· Kaduna Â· Benue Â· Plateau (9Â°Eâ€“15Â°E)'],
    'UTM33N': ['WGS 84 (EPSG:4326)','GRS80 Â· a=6,378,137m Â· 1/f=298.257 Â· kâ‚€=0.9996','ğŸ“ Zone 33N East Belt: Borno Â· Yobe Â· Adamawa Â· Taraba Â· Gombe (15Â°Eâ€“21Â°E)'],
    'UTM31S': ['WGS 84 (EPSG:4326)','GRS80 Â· Southern Hemisphere Â· False Northing=10,000,000m','ğŸ“ Zone 31S Southern (0Â°Sâ€“6Â°S, 3Â°Eâ€“9Â°E area) â€” rare for Nigeria'],
    'UTM32S': ['WGS 84 (EPSG:4326)','GRS80 Â· Southern Hemisphere Â· False Northing=10,000,000m','ğŸ“ Zone 32S Southern (0Â°Sâ€“6Â°S, 9Â°Eâ€“15Â°E area) â€” rare for Nigeria'],
    'NNO31N': ['Minna 1987 / Clarke 1880 NNO','Clarke 1880 Â· a=6,378,249.145m Â· 1/f=293.465 Â· Î” to WGS84: Tx=-92m Ty=-93m Tz=+122m','ğŸ“ NNO West Belt (Nigeria National Origin): Lagos Â· Ogun Â· Oyo Â· Kebbi Â· Sokoto'],
    'NNO32N': ['Minna 1987 / Clarke 1880 NNO','Clarke 1880 Â· a=6,378,249.145m Â· 1/f=293.465 Â· Î” to WGS84: Tx=-92m Ty=-93m Tz=+122m','ğŸ“ NNO Mid Belt: FCT Â· Rivers Â· Delta Â· Kano Â· Benue (standard cadastral datum)'],
    'GEO_DD': ['WGS 84 Geographic (EPSG:4326)','Decimal Degrees Â· No projection Â· Lat/Lon angular output','ğŸ“ Pure geographic coordinates â€” suitable for GPS export and GIS software input'],
    'WEBMERC': ['Web Mercator / Pseudo-Mercator (EPSG:3857)','Spherical WGS84 Â· Scale distortion increases toward poles','âš ï¸ Used for web maps (Google, Bing, OSM) only â€” NOT suitable for professional surveying or measurement'],
  };
  const d = D[p] || D['UTM32N'];
  if(nameEl) nameEl.textContent = d[0];
  if(detailEl) detailEl.textContent = d[1];
  if(zoneEl) zoneEl.innerHTML = d[2];
}

function updateDatumFromCRS() {
  const crs = document.getElementById('coordSys')?.value || '';
  const hDat = document.getElementById('hDatum');
  if(!hDat) return;
  if(crs.includes('NNO')) hDat.value = 'NNO_MINNA';
  else hDat.value = 'WGS84';
}

function convLatToUTM() {
  const lat = parseFloat(g('ll-lat').value), lon = parseFloat(g('ll-lon').value);
  const forceZone = parseInt(g('ll-zone').value) || null;
  const proj = document.getElementById('conv-projection')?.value || 'UTM32N';
  if(isNaN(lat)||isNaN(lon)){toast('Enter valid lat/lon values','warning');return;}
  if(Math.abs(lat)>90||Math.abs(lon)>180){toast('Lat/Lon out of valid range','error');return;}

  // Web Mercator
  if(proj === 'WEBMERC') {
    const x = lon * 20037508.34 / 180;
    const y = Math.log(Math.tan((90+lat)*Math.PI/360)) / Math.PI * 20037508.34;
    showResult('res-lltoutm',[
      ['Projection','Web Mercator (EPSG:3857)'],['Datum','WGS84 Spherical'],
      ['X Easting',x.toFixed(3)+' m'],['Y Northing',y.toFixed(3)+' m'],
      ['Lat input',lat.toFixed(7)+'Â°'],['Lon input',lon.toFixed(7)+'Â°'],
      ['âš ï¸ Note','Web Mercator for visual maps ONLY â€” not for professional survey measurement']
    ]);
    toast('Web Mercator done â€” visual maps only','warning'); return;
  }

  // Geographic DD output only
  if(proj === 'GEO_DD') {
    showResult('res-lltoutm',[
      ['Projection','Geographic WGS84 (EPSG:4326)'],['Datum','WGS84 / GRS80'],
      ['Latitude (DD)',lat.toFixed(7)+'Â°'],['Longitude (DD)',lon.toFixed(7)+'Â°'],
      ['Latitude (DMS)',decToDMS(lat,true)],['Longitude (DMS)',decToDMS(lon,false)],
      ['DDM Lat',`${Math.floor(Math.abs(lat))}Â° ${((Math.abs(lat)%1)*60).toFixed(5)}â€² ${lat>=0?'N':'S'}`],
      ['DDM Lon',`${Math.floor(Math.abs(lon))}Â° ${((Math.abs(lon)%1)*60).toFixed(5)}â€² ${lon>=0?'E':'W'}`],
    ]);
    toast('Geographic coordinates ready','success'); return;
  }

  // NNO / Minna datum â€” apply Helmert 3-param shift WGS84â†’Minna
  // Official NNO parameters: Tx=+92, Ty=+93, Tz=-122 (WGS84 to Minna)
  let wLat = lat, wLon = lon;
  let datumLabel = 'WGS 84 / GRS80';
  if(proj === 'NNO31N' || proj === 'NNO32N') {
    datumLabel = 'Minna 1987 / Clarke 1880 (NNO)';
    const aWGS = 6378137.0, aMinna = 6378249.145;
    const eWGS = 0.081819191, eMinna = 0.082483400;
    const latR = lat*Math.PI/180, lonR = lon*Math.PI/180;
    const sinLat = Math.sin(latR), cosLat = Math.cos(latR);
    const cosLon = Math.cos(lonR), sinLon = Math.sin(lonR);
    const NWGS = aWGS / Math.sqrt(1 - eWGS*eWGS*sinLat*sinLat);
    const X = NWGS*cosLat*cosLon, Y = NWGS*cosLat*sinLon, Z = NWGS*(1-eWGS*eWGS)*sinLat;
    // WGS84 â†’ Minna shift (+92, +93, -122)
    const Xm = X+92, Ym = Y+93, Zm = Z-122;
    const p2 = Math.sqrt(Xm*Xm+Ym*Ym);
    const theta = Math.atan2(Zm*aMinna, p2*aMinna*(1-eMinna*eMinna));
    const latM = Math.atan2(Zm + (eMinna*eMinna*aMinna/Math.sqrt(1-eMinna*eMinna))*Math.pow(Math.sin(theta),3),
                            p2 - eWGS*eWGS*aWGS*Math.pow(Math.cos(theta),3));
    wLat = latM*180/Math.PI;
    wLon = Math.atan2(Ym,Xm)*180/Math.PI;
  }

  const isSouth = proj==='UTM31S' || proj==='UTM32S';
  let autoZone = null;
  if(proj==='UTM31N'||proj==='NNO31N'||proj==='UTM31S') autoZone=31;
  else if(proj==='UTM33N') autoZone=33;
  else if(proj==='UTM32N'||proj==='NNO32N'||proj==='UTM32S') autoZone=32;

  const utm = latLonToUTM(wLat, wLon, forceZone || autoZone);
  const northingOut = isSouth ? utm.northing+10000000 : utm.northing;
  const hemisphere = isSouth ? 'S' : 'N';
  const beltName = utm.zone<=31 ? 'West Belt' : utm.zone===32 ? 'Mid Belt' : utm.zone===33 ? 'East Belt' : 'Zone '+utm.zone;

  showResult('res-lltoutm',[
    ['Projection / CRS', `UTM Zone ${utm.zone}${hemisphere} Â· ${beltName}`],
    ['Datum', datumLabel],
    ['Easting (m)', utm.easting.toFixed(3)+' m'],
    ['Northing (m)', northingOut.toFixed(3)+' m'],
    ['UTM Zone', `${utm.zone}${hemisphere}`],
    ['Scale Factor kâ‚€', '0.9996'],
    ['False Easting', '500,000 m'],
    ['False Northing', isSouth ? '10,000,000 m (S hemisphere)' : '0 m (N hemisphere)'],
    ['Lat input (WGS84)', lat.toFixed(7)+'Â°'],
    ['Lon input (WGS84)', lon.toFixed(7)+'Â°'],
    ['DMS Latitude', decToDMS(lat,true)],
    ['DMS Longitude', decToDMS(lon,false)],
  ],'â• Add to Survey',()=>{
    surveyPts.push({id:surveyPts.length+1,n:northingOut,e:utm.easting,elev:0,lat,lon,src:'Converted',desc:'Conv Pt',ts:new Date().toISOString()});
    updateSurveyDisplay(); showTab('survey'); toast('Point added to survey','success');
  });
  toast('âœ… Converted! Zone '+utm.zone+hemisphere+' Â· '+beltName,'success');
}

function convUTMToLat() {
  const zone=parseFloat(g('utm-zone').value), e=parseFloat(g('utm-e').value), n=parseFloat(g('utm-n').value);
  const south = g('utm-hemi').value==='S';
  const proj = document.getElementById('conv-projection')?.value || 'UTM32N';
  if(isNaN(zone)||isNaN(e)||isNaN(n)){toast('Enter all UTM values','warning');return;}
  const k0=0.9996, a=6378137.0, ec=0.081819191;
  let N = n; if(south) N -= 10000000;
  const x = e - 500000;
  const M = N / k0;
  const mu = M / (a*(1 - ec*ec/4 - 3*ec**4/64));
  const e1 = (1-Math.sqrt(1-ec*ec)) / (1+Math.sqrt(1-ec*ec));
  const phi1 = mu + (3*e1/2-27*e1**3/32)*Math.sin(2*mu) + (21*e1*e1/16)*Math.sin(4*mu);
  const N1 = a / Math.sqrt(1-ec*ec*Math.sin(phi1)**2);
  const T1 = Math.tan(phi1)**2;
  const R1 = a*(1-ec*ec) / Math.pow(1-ec*ec*Math.sin(phi1)**2, 1.5);
  const D = x / (N1*k0);
  const lat = (phi1 - (N1*Math.tan(phi1)/R1)*(D*D/2-(5+3*T1)*D**4/24)) * 180/Math.PI;
  const lonO = (zone-1)*6-180+3;
  const lon = lonO + (D-(1+2*T1)*D**3/6)/Math.cos(phi1) * 180/Math.PI;
  const isNNO = proj==='NNO31N'||proj==='NNO32N';
  const datumLabel = isNNO ? 'Minna 1987 / Clarke 1880 (NNO)' : 'WGS 84 / GRS80';
  const beltLabel = zone<=31 ? 'West Belt' : zone===32 ? 'Mid Belt' : zone===33 ? 'East Belt' : 'Zone '+zone;
  showResult('res-utmtoll',[
    ['Projection / CRS', `UTM Zone ${zone}${south?'S':'N'} Â· ${beltLabel}`],
    ['Datum', datumLabel],
    ['Latitude (DD)', lat.toFixed(7)+'Â°'],
    ['Longitude (DD)', lon.toFixed(7)+'Â°'],
    ['DMS Latitude', decToDMS(lat,true)],
    ['DMS Longitude', decToDMS(lon,false)],
    ['DDM Latitude', `${Math.floor(Math.abs(lat))}Â° ${((Math.abs(lat)%1)*60).toFixed(5)}â€² ${lat>=0?'N':'S'}`],
    ['DDM Longitude', `${Math.floor(Math.abs(lon))}Â° ${((Math.abs(lon)%1)*60).toFixed(5)}â€² ${lon>=0?'E':'W'}`],
    ['UTM Easting', e.toFixed(3)+' m'],
    ['UTM Northing', n.toFixed(3)+' m'],
    ['Scale Factor kâ‚€','0.9996'],
    ['Hemisphere', south?'Southern (S)':'Northern (N)'],
  ]);
  toast('âœ… UTM â†’ Lat/Lon done! Zone '+zone+(south?'S':'N'),'success');
}

function decToDMS(v,isLat) {
  const d=Math.floor(Math.abs(v)),m=Math.floor((Math.abs(v)-d)*60),s=((Math.abs(v)-d-m/60)*3600).toFixed(3);
  return `${d}Â° ${m}' ${s}" ${isLat?(v>=0?'N':'S'):(v>=0?'E':'W')}`;
}

function calcBearingDist() {
  const sN=parseFloat(g('bd-n').value),sE=parseFloat(g('bd-e').value);
  const bear=parseFloat(g('bd-bearing').value),dist=parseFloat(g('bd-dist').value);
  if([sN,sE,bear,dist].some(isNaN)){toast('Enter all fields','warning');return;}
  const bR=bear*Math.PI/180;
  const newN=sN+dist*Math.cos(bR),newE=sE+dist*Math.sin(bR);
  const va=parseFloat(g('bd-va').value)||0;
  const slopeDist=va!==0?dist/Math.cos(va*Math.PI/180):dist;
  showResult('bd-result',[
    ['New Northing',newN.toFixed(3)+' m'],['New Easting',newE.toFixed(3)+' m'],
    ['Bearing',bear.toFixed(4)+'Â°'],['Horizontal Dist',dist.toFixed(3)+' m'],
    ['Slope Dist',slopeDist.toFixed(3)+' m']
  ],'â• Add to Survey',()=>{
    surveyPts.push({id:surveyPts.length+1,n:newN,e:newE,elev:0,src:'Calc',desc:`Bearing-${bear.toFixed(0)}Â°`,ts:new Date().toISOString()});
    updateSurveyDisplay();showTab('survey');toast('Point added','success');
  });
  toast('Point calculated!','success');
}

function convertMultiFormat() {
  let lat=0,lon=0;
  const fmt=g('mf-format').value;
  const latIn=g('mf-lat').value.trim(),lonIn=g('mf-lon').value.trim();
  if(fmt==='dd'){lat=parseFloat(latIn);lon=parseFloat(lonIn);}
  else if(fmt==='dms'){
    const parseDMS=s=>{const p=s.match(/(\d+)[Â°\s]+(\d+)['\s]+(\d+\.?\d*)/);return p?(parseFloat(p[1])+parseFloat(p[2])/60+parseFloat(p[3])/3600):NaN;};
    lat=parseDMS(latIn);lon=parseDMS(lonIn);
  } else {
    const parseDDM=s=>{const p=s.match(/(\d+)[Â°\s]+(\d+\.?\d*)/);return p?(parseFloat(p[1])+parseFloat(p[2])/60):NaN;};
    lat=parseDDM(latIn);lon=parseDDM(lonIn);
  }
  if(isNaN(lat)||isNaN(lon)){toast('Enter valid coordinates','warning');return;}
  const utm=latLonToUTM(lat,lon);
  const ddm=(vl,isLat)=>`${Math.floor(Math.abs(vl))}Â° ${((Math.abs(vl)-Math.floor(Math.abs(vl)))*60).toFixed(5)}'${isLat?(vl>=0?' N':' S'):(vl>=0?' E':' W')}`;
  g('mf-results').innerHTML=[
    ['Decimal Degrees',`${lat.toFixed(7)}Â°N, ${lon.toFixed(7)}Â°E`],
    ['DMS',`${decToDMS(lat,true)}, ${decToDMS(lon,false)}`],
    ['DDM',`${ddm(lat,true)}, ${ddm(lon,false)}`],
    ['UTM WGS84',`Zone ${utm.zone}N | E: ${utm.easting.toFixed(3)} | N: ${utm.northing.toFixed(3)}`],
    ['MGRS-style',`${utm.zone}N ${utm.easting.toFixed(0)} ${utm.northing.toFixed(0)}`],
    ['GeoJSON',`[${lon.toFixed(7)}, ${lat.toFixed(7)}]`]
  ].map(([k,vl])=>`<div class="result-row"><span class="rk">${k}</span><span class="mono" style="font-size:0.8rem;">${vl}</span></div>`).join('');
  toast('All formats converted!','success');
}

// Traverse
function addTravLeg() {
  const idx=g('trav-legs').children.length;
  const div=document.createElement('div');
  div.style='display:grid;grid-template-columns:1fr 1fr 1fr auto;gap:8px;align-items:end;';
  div.id='leg-'+idx;
  div.innerHTML=`
    <div><label style="font-size:0.75rem;font-weight:600;">Bearing (Â°)</label><input type="number" step="0.0001" id="lb${idx}" placeholder="90.0000" class="mono" style="margin-top:4px;"></div>
    <div><label style="font-size:0.75rem;font-weight:600;">Distance (m)</label><input type="number" step="0.001" id="ld${idx}" placeholder="100.000" class="mono" style="margin-top:4px;"></div>
    <div><label style="font-size:0.75rem;font-weight:600;">Description</label><input type="text" id="ldesc${idx}" placeholder="Leg ${idx+1}" style="margin-top:4px;"></div>
    <button onclick="g('leg-${idx}').remove()" class="btn btn-red btn-sm" style="align-self:flex-end;">âœ•</button>`;
  g('trav-legs').appendChild(div);
}

function clearTraverse(){g('trav-legs').innerHTML='';g('trav-result').classList.remove('show');}

function computeTraverse() {
  const n0=parseFloat(g('trav-n0').value)||1000,e0=parseFloat(g('trav-e0').value)||1000;
  const legs=[];let n=n0,e=e0;
  document.querySelectorAll('[id^="lb"]').forEach((el,i)=>{
    const d=document.querySelectorAll('[id^="ld"]')[i];
    const b=parseFloat(el.value),dist=parseFloat(d?.value);
    if(!isNaN(b)&&!isNaN(dist))legs.push({b,d:dist});
  });
  if(legs.length<1){toast('Add at least one leg','warning');return;}
  let rows='<tr><th>Leg</th><th>Bearing</th><th>Distance</th><th>Î”N</th><th>Î”E</th><th>Northing</th><th>Easting</th></tr>';
  legs.forEach((l,i)=>{
    const bR=l.b*Math.PI/180,dn=l.d*Math.cos(bR),de=l.d*Math.sin(bR);
    n+=dn;e+=de;
    rows+=`<tr><td>${i+1}</td><td class="mono">${l.b.toFixed(4)}Â°</td><td class="mono">${l.d.toFixed(3)}m</td><td class="mono">${dn>0?'+':''}${dn.toFixed(3)}</td><td class="mono">${de>0?'+':''}${de.toFixed(3)}</td><td class="mono">${n.toFixed(3)}</td><td class="mono">${e.toFixed(3)}</td></tr>`;
  });
  const closeN=n0-n,closeE=e0-e,totalDist=legs.reduce((s,l)=>s+l.d,0);
  const err=Math.sqrt(closeN**2+closeE**2),ratio=err>0?Math.round(totalDist/err):0;
  const quality=ratio>10000?'ğŸŸ¢ Excellent':ratio>5000?'ğŸŸ¡ Good':ratio>1000?'ğŸŸ  Acceptable':'ğŸ”´ Poor';
  g('trav-result').innerHTML=`
    <div style="overflow-x:auto;"><table class="data-table">${rows}</table></div>
    <div style="margin-top:12px;background:#f0fdfa;border:1px solid #99f6e4;border-radius:8px;padding:12px;font-size:0.82rem;">
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
        <div><strong>Closure N:</strong> <span class="mono">${closeN.toFixed(4)} m</span></div>
        <div><strong>Closure E:</strong> <span class="mono">${closeE.toFixed(4)} m</span></div>
        <div><strong>Linear Error:</strong> <span class="mono">${err.toFixed(4)} m</span></div>
        <div><strong>Precision Ratio:</strong> <span class="mono">1:${ratio.toLocaleString()}</span></div>
        <div><strong>Total Distance:</strong> <span class="mono">${totalDist.toFixed(3)} m</span></div>
        <div><strong>Quality:</strong> ${quality}</div>
      </div>
    </div>`;
  g('trav-result').classList.add('show');
  toast('Traverse computed!','success');
}

function calcAreaFromCoords() {
  const ns=g('area-n').value.trim().split('\n').map(parseFloat).filter(v=>!isNaN(v));
  const es=g('area-e').value.trim().split('\n').map(parseFloat).filter(v=>!isNaN(v));
  if(ns.length<3||ns.length!==es.length){toast('Need matching N and E values (min 3)','warning');return;}
  const pts=ns.map((n,i)=>({n,e:es[i]}));
  const sqm=shoelace(pts),ha=sqm/10000,ac=ha*2.47105,perim=calcPerimeter(pts);
  showResult('area-result',[
    ['Points',ns.length],['Sq Metres',sqm.toFixed(3)+' mÂ²'],['Hectares',ha.toFixed(4)+' ha'],
    ['Acres',ac.toFixed(4)+' ac'],['Perimeter',perim.toFixed(3)+' m'],['Plots (50Ã—100)',(ha*10000/1500).toFixed(2)]
  ]);
  toast('Area calculated!','success');
}

function calcInverse() {
  const n1=parseFloat(g('inv-n1').value),e1=parseFloat(g('inv-e1').value);
  const n2=parseFloat(g('inv-n2').value),e2=parseFloat(g('inv-e2').value);
  if([n1,e1,n2,e2].some(isNaN)){toast('Enter all coordinates','warning');return;}
  const dn=n2-n1,de=e2-e1;
  const dist=Math.sqrt(dn*dn+de*de);
  const bear=((Math.atan2(de,dn)*180/Math.PI)+360)%360;
  const backBear=(bear+180)%360;
  showResult('inv-result',[
    ['Distance',dist.toFixed(3)+' m'],['Forward Bearing',bear.toFixed(4)+'Â°'],
    ['Back Bearing',backBear.toFixed(4)+'Â°'],['Î”N',(dn>0?'+':'')+dn.toFixed(3)+' m'],
    ['Î”E',(de>0?'+':'')+de.toFixed(3)+' m'],['Gradient (%)','N/A (elevation required)']
  ]);
  toast('Inverse calculated!','success');
}

function showResult(id, rows, btnLabel, btnFn) {
  const el=g(id);if(!el)return;
  let html=rows.map(([k,vl])=>`<div class="result-row"><span class="rk">${k}</span><span class="mono" style="font-size:0.82rem;">${vl}</span></div>`).join('');
  if(btnLabel&&btnFn){
    const fnId='rfn_'+Math.random().toString(36).substr(2,6);
    window[fnId]=btnFn;
    html+=`<button class="btn btn-green btn-full btn-sm" style="margin-top:10px;" onclick="window['${fnId}']()">${btnLabel}</button>`;
  }
  el.innerHTML=html;el.classList.add('show');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PLOT CANVAS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let plotCanvas,plotCtx;
function initPlotCanvas() {
  plotCanvas=g('plotCanvas');if(!plotCanvas)return;
  plotCtx=plotCanvas.getContext('2d');
  drawGrid();
}

function drawGrid() {
  if(!plotCtx||!plotCanvas)return;
  plotCtx.fillStyle='#f9fafb';plotCtx.fillRect(0,0,plotCanvas.width,plotCanvas.height);
  plotCtx.strokeStyle='#e5e7eb';plotCtx.lineWidth=0.5;
  for(let i=0;i<=plotCanvas.width;i+=50){plotCtx.beginPath();plotCtx.moveTo(i,0);plotCtx.lineTo(i,plotCanvas.height);plotCtx.stroke();}
  for(let i=0;i<=plotCanvas.height;i+=50){plotCtx.beginPath();plotCtx.moveTo(0,i);plotCtx.lineTo(plotCanvas.width,i);plotCtx.stroke();}
  plotCtx.font='bold 14px Arial';plotCtx.fillStyle='#0f172a';plotCtx.textAlign='center';
  plotCtx.fillText('N â†‘',plotCanvas.width-30,25);
}

function generatePlot() {
  const owner=v('plotOwner'),addr=v('plotAddress');
  var rawA=parseFloat(v('plotLat')),rawB=parseFloat(v('plotLon'));
  const w=parseFloat(v('plotWidth'))||15,d=parseFloat(v('plotDepth'))||30;
  const orient=(parseFloat(v('plotOrient'))||0)*Math.PI/180;
  if(!owner||!addr){toast('Enter Plot Owner name and Plot Address','warning');return;}
  if(isNaN(rawA)||isNaN(rawB)){toast('Enter valid start coordinates (latitude/longitude or northing/easting)','warning');return;}
  // Convert N/E to lat/lon if in northing/easting mode
  var lat, lon;
  if(typeof _plotMode!=='undefined' && _plotMode==='ne'){
    const ll=neToLatLon(rawA,rawB,32);
    lat=ll.lat; lon=ll.lon;
    if(isNaN(lat)||isNaN(lon)){toast('Could not convert Northing/Easting to coordinates. Check values.','error');return;}
  } else {
    lat=rawA; lon=rawB;
  }
  const utm=latLonToUTM(lat,lon);
  const cos=Math.cos(orient),sin=Math.sin(orient);
  plotPts=[
    {id:1,n:utm.northing,e:utm.easting},
    {id:2,n:utm.northing+w*sin,e:utm.easting+w*cos},
    {id:3,n:utm.northing+w*sin-d*cos,e:utm.easting+w*cos+d*sin},
    {id:4,n:utm.northing-d*cos,e:utm.easting+d*sin}
  ];
  redrawPlot(owner,addr,w,d,utm);
  toast('Plot layout generated!','success');
}

function redrawPlot(owner,addr,w,d,utm) {
  drawGrid();if(plotPts.length<2)return;
  const margin=80,pw=plotCanvas.width-2*margin,ph=plotCanvas.height-2*margin;
  const ns=plotPts.map(p=>p.n),es=plotPts.map(p=>p.e);
  const minN=Math.min(...ns),maxN=Math.max(...ns),minE=Math.min(...es),maxE=Math.max(...es);
  const rangeN=maxN-minN||1,rangeE=maxE-minE||1;
  const sx=p=>margin+((p.e-minE)/rangeE)*pw;
  const sy=p=>plotCanvas.height-margin-((p.n-minN)/rangeN)*ph;
  plotCtx.beginPath();
  plotPts.forEach((p,i)=>i===0?plotCtx.moveTo(sx(p),sy(p)):plotCtx.lineTo(sx(p),sy(p)));
  plotCtx.closePath();
  plotCtx.fillStyle='rgba(22,163,74,0.08)';plotCtx.fill();
  plotCtx.strokeStyle='#16a34a';plotCtx.lineWidth=3;plotCtx.stroke();
  plotPts.forEach(p=>{
    plotCtx.fillStyle='#0f172a';plotCtx.beginPath();plotCtx.arc(sx(p),sy(p),6,0,2*Math.PI);plotCtx.fill();
    plotCtx.fillStyle='#ffffff';plotCtx.beginPath();plotCtx.arc(sx(p),sy(p),3,0,2*Math.PI);plotCtx.fill();
    plotCtx.fillStyle='#0f172a';plotCtx.font='bold 10px JetBrains Mono,monospace';plotCtx.textAlign='left';
    plotCtx.fillText(`P${p.id} (N:${p.n.toFixed(0)} E:${p.e.toFixed(0)})`,sx(p)+9,sy(p)-6);
  });
  plotCtx.font='11px Arial';plotCtx.fillStyle='#1d4ed8';plotCtx.textAlign='center';
  const midTop={x:(sx(plotPts[0])+sx(plotPts[1]))/2,y:(sy(plotPts[0])+sy(plotPts[1]))/2};
  const midRight={x:(sx(plotPts[1])+sx(plotPts[2]))/2,y:(sy(plotPts[1])+sy(plotPts[2]))/2};
  plotCtx.fillText(`${w}m`,midTop.x,midTop.y-8);
  plotCtx.fillText(`${d}m`,midRight.x+20,midRight.y);
  plotCtx.fillStyle='#0f172a';plotCtx.font='bold 13px Arial';plotCtx.textAlign='center';
  plotCtx.fillText(`ğŸ“ ${owner}`,plotCanvas.width/2,24);
  plotCtx.font='11px Arial';plotCtx.fillStyle='#64748b';
  plotCtx.fillText(addr,plotCanvas.width/2,40);
  plotCtx.fillText(`Zone ${utm?.zone||31}N Â· Width:${w}m Â· Depth:${d}m Â· Area:${(w*d).toFixed(0)}mÂ²`,plotCanvas.width/2,plotCanvas.height-10);
  plotCtx.font='10px Arial';plotCtx.fillStyle='rgba(0,0,0,0.12)';plotCtx.textAlign='center';
  plotCtx.fillText('SurveyPro Elite Â· opusarnold@gmail.com',plotCanvas.width/2,plotCanvas.height/2+40);
}

function clearPlotCanvas(){plotPts=[];drawGrid();toast('Canvas cleared','info');}
function exportPlot(){const a=document.createElement('a');a.download=`plot-${Date.now()}.png`;a.href=plotCanvas.toDataURL('image/png',0.9);a.click();toast('Plot exported!','success');}
function calcCanvasArea(){
  if(plotPts.length<3){toast('Need at least 3 plot points','warning');return;}
  const sqm=shoelace(plotPts),ha=sqm/10000,ac=ha*2.47105,perim=calcPerimeter(plotPts);
  showResult('plotAreaResult',[
    ['Sq Metres',sqm.toFixed(2)+' mÂ²'],['Hectares',ha.toFixed(4)+' ha'],
    ['Acres',ac.toFixed(4)+' ac'],['Perimeter',perim.toFixed(2)+' m'],
    ['Plots (50Ã—100)',(ha*10000/1500).toFixed(2)]
  ]);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GIS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function requestGIS(service, price) {
  const you=Math.round(parseFloat(price)*CFG.commission);
  const partner=parseFloat(price)-you;
  const partnerSite = CFG.gisPartner;
  openModal(`<div>
    <h3 style="font-weight:800;margin-bottom:14px;">ğŸ—ºï¸ ${service}</h3>
    <div style="background:linear-gradient(135deg,#0f172a,#1e3a5f);color:#fff;border-radius:12px;padding:16px;margin-bottom:14px;">
      <div style="font-size:0.8rem;text-align:center;opacity:0.7;margin-bottom:10px;">ğŸ’° 50/50 REVENUE SPLIT â€” AUTOMATIC</div>
      <div style="display:flex;justify-content:space-around;text-align:center;">
        <div><div style="font-size:1.8rem;font-weight:800;color:#4ade80;">â‚¦${you.toLocaleString()}</div><div style="font-size:0.72rem;opacity:0.8;">YOUR 50%</div><div style="font-size:0.65rem;opacity:0.6;">Opay: ${CFG.opay}</div></div>
        <div style="display:flex;align-items:center;opacity:0.4;font-size:1.5rem;">|</div>
        <div><div style="font-size:1.8rem;font-weight:800;color:#60a5fa;">â‚¦${partner.toLocaleString()}</div><div style="font-size:0.72rem;opacity:0.8;">PARTNER 50%</div><div style="font-size:0.65rem;opacity:0.6;">GIS Service Provider</div></div>
      </div>
    </div>
    <div class="form-group"><label>Your Name</label><input id="gisName" placeholder="Full name" type="text"></div>
    <div class="form-group"><label>Email Address</label><input id="gisEmail" placeholder="email@example.com" type="email"></div>
    <div class="form-group"><label>Phone</label><input id="gisPhone" placeholder="080XXXXXXXX" type="tel"></div>
    <div style="background:#f0fdf4;border:1px solid #86efac;border-radius:8px;padding:10px;font-size:0.78rem;color:#166534;margin-bottom:12px;">
      âœ… After payment: you receive â‚¦${you.toLocaleString()} on your Opay Â· Client is sent to our licensed GIS partner for service delivery
    </div>
    <div style="display:grid;gap:8px;">
      <button class="btn btn-green btn-full" onclick="payGISService('${service}',${parseFloat(price)},${you})">ğŸ’³ Pay â‚¦${parseFloat(price).toLocaleString()} via Paystack</button>
      <button class="btn btn-blue btn-full" onclick="window.open('${partnerSite}','_blank')">ğŸ”— View GIS Partner Site First</button>
      <button class="btn btn-gray btn-full" onclick="closeModal()">Cancel</button>
    </div>
  </div>`);
}

function payGISService(service, price, you) {
  const name = document.getElementById('gisName')?.value.trim();
  const email = document.getElementById('gisEmail')?.value.trim();
  const phone = document.getElementById('gisPhone')?.value.trim();
  if(!name){toast('Enter your name','warning');document.getElementById('gisName').focus();return;}
  if(!email||!email.includes('@')){toast('Enter a valid email','warning');document.getElementById('gisEmail').focus();return;}
  const PAYSTACK_PK = CFG.paystack_key;
  const handler = PaystackPop.setup({
    key: PAYSTACK_PK,
    email: email,
    amount: price * 100,
    currency: 'NGN',
    ref: 'GIS_' + Date.now(),
    metadata: { name, phone, service, platform: 'SurveyPro Elite GIS' },
    callback: function(response) {
      closeModal();
      showBanner(`âœ… GIS Payment confirmed! â‚¦${you.toLocaleString()} â†’ Opay ${CFG.opay} Â· Client redirected to GIS partner.`);
      toast('Payment successful! Opening GIS partner site...','success');
      // Redirect client directly to the GIS partner â€” NO WhatsApp
      setTimeout(()=>window.open(CFG.gisPartner,'_blank'), 800);
    },
    onClose: function() { toast('Payment cancelled','warning'); }
  });
  handler.openIframe();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// C of O VERIFICATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function verifySurveyCode() {
  const code=g('verifyInput').value.trim().toUpperCase();
  if(!code){toast('Enter a verification code','warning');return;}
  const s=surveys.find(x=>x.verificationCode===code);
  const out=g('verifyResult');
  if(s){
    out.innerHTML=`<div class="verify-success">
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:14px;">
        <span style="font-size:2.5rem;">âœ…</span>
        <div><div style="font-weight:800;font-size:1.1rem;color:var(--accent);">Survey Verified</div><div style="font-size:0.78rem;color:var(--text2);">Authentic SurveyPro Elite Record</div></div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:0.85rem;">
        <div><strong>Code:</strong> <span class="mono">${s.verificationCode}</span></div>
        <div><strong>Date:</strong> ${new Date(s.savedAt).toLocaleDateString('en-NG')}</div>
        <div><strong>Project:</strong> ${s.projectName}</div>
        <div><strong>Client:</strong> ${s.clientName}</div>
        <div><strong>Location:</strong> ${s.location}</div>
        <div><strong>Type:</strong> ${s.surveyType}</div>
        <div><strong>Area:</strong> <span style="color:var(--accent);font-weight:700;">${s.hectares.toFixed(4)} ha / ${s.acres.toFixed(4)} acres</span></div>
        <div><strong>Points:</strong> ${s.points}</div>
      </div>
    </div>`;
    g('qrSection').style.display='block';
    g('qrContainer').innerHTML='';
    if(window.QRCode) new QRCode(g('qrContainer'),{text:`SurveyPro Elite\nVerified: ${code}\nProject: ${s.projectName}\nArea: ${s.hectares.toFixed(4)} ha`,width:160,height:160});
  } else {
    out.innerHTML=`<div class="verify-fail">
      <div style="font-size:3rem;margin-bottom:8px;">âŒ</div>
      <h3 style="font-weight:800;color:var(--danger);">Code Not Found</h3>
      <p style="font-size:0.85rem;color:var(--text2);margin-top:6px;">The code <strong>${code}</strong> was not found. Ensure the code was generated on this device. Contact Arnold for official verification.</p>
    </div>`;
    g('qrSection').style.display='none';
  }
}

function requestCofO(){window.open(`${CFG.whatsapp}?text=${encodeURIComponent('ğŸ”’ C of O Service Request\n\nI need professional Certificate of Occupancy assistance.\nPlease contact me with your process and pricing.')}`,'_blank');}
function emailCofO(){window.location.href=`mailto:${CFG.email}?subject=C of O Assistance Request&body=Hello,%0A%0AI need professional C of O assistance.%0APlease contact me with details.`;}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EQUIPMENT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildEquipment() {
  const grid=g('equipGrid');if(!grid)return;
  grid.innerHTML=EQUIPMENT.map(eq=>{
    const you=Math.round(eq.price*CFG.commission);
    return `<div class="equip-card">
      <div class="equip-top"><span class="equip-icon">${eq.icon}</span>
        <div><h4 style="font-weight:800;font-size:1rem;color:var(--accent2);">${eq.name}</h4><p style="font-size:0.75rem;color:var(--text3);">${eq.model}</p></div>
      </div>
      <p style="font-size:0.82rem;color:var(--text2);margin-bottom:10px;">${eq.desc}</p>
      <div class="equip-price">â‚¦${eq.price.toLocaleString()} <span style="font-size:0.75rem;color:var(--text2);font-weight:400;">/day</span></div>
      <div class="equip-earn">âœ… You earn: â‚¦${you.toLocaleString()} (50% of booking)</div>
      <ul class="equip-features">${eq.features.map(f=>`<li>âœ… ${f}</li>`).join('')}</ul>
      <button class="btn btn-green btn-full" style="margin-top:10px;" onclick="bookEquipment('${eq.name}',${eq.price},'${eq.link}')">ğŸ›’ Book â€” Earn â‚¦${you.toLocaleString()}</button>
    </div>`;
  }).join('');
}

function bookEquipment(name, price, link) {
  const you=Math.round(price*CFG.commission),partner=price-you;
  openModal(`<div>
    <h3 style="font-weight:800;font-size:1.1rem;margin-bottom:14px;">âš™ï¸ ${name}</h3>
    <div style="background:linear-gradient(135deg,#0f172a,#1e3a5f);color:#fff;border-radius:12px;padding:18px;margin-bottom:16px;">
      <h4 style="text-align:center;margin-bottom:12px;font-size:0.9rem;">ğŸ’° Payment Split</h4>
      <div style="display:flex;justify-content:space-between;background:rgba(255,255,255,0.1);border-radius:8px;padding:12px;margin-bottom:8px;">
        <div style="font-size:0.82rem;">Your Commission (Opay: ${CFG.opay})</div>
        <div style="font-family:Syne','Arial Black',sans-serif;font-size:1.8rem;font-weight:800;color:#4ade80;">â‚¦${you.toLocaleString()}</div>
      </div>
      <div style="display:flex;justify-content:space-between;background:rgba(255,255,255,0.1);border-radius:8px;padding:12px;">
        <div style="font-size:0.82rem;">Equipment Partner</div>
        <div style="font-family:Syne','Arial Black',sans-serif;font-size:1.8rem;font-weight:800;color:#60a5fa;">â‚¦${partner.toLocaleString()}</div>
      </div>
    </div>
    <div class="form-group"><label>Your Full Name</label><input id="bName" placeholder="Full name" type="text"></div>
    <div class="form-group"><label>Phone Number</label><input id="bPhone" placeholder="080XXXXXXXX" type="tel"></div>
    <div class="form-row">
      <div class="form-group"><label>Rental Date</label><input id="bDate" type="date"></div>
      <div class="form-group"><label>Days Required</label><input id="bDays" type="number" min="1" placeholder="1" value="1"></div>
    </div>
    <div class="btn-grid">
      <button class="btn btn-green" onclick="confirmEquipBooking('${name}',${price},${you},'${link}')">âœ… Confirm Booking</button>
      <button class="btn btn-gray" onclick="closeModal()">Cancel</button>
    </div>
  </div>`);
}

function confirmEquipBooking(name, price, you, link) {
  const bN=v('bName'),bP=v('bPhone'),bD=v('bDate'),bDays=v('bDays');
  if(!bN){toast('Enter customer name','warning');document.getElementById('bName').focus();return;}
  if(!bP){toast('Enter phone number','warning');document.getElementById('bPhone').focus();return;}
  if(!bD){toast('Select rental date','warning');document.getElementById('bDate').focus();return;}
  if(!bDays||parseInt(bDays)<1){toast('Enter number of days (minimum 1)','warning');return;}
  const days=parseInt(bDays);
  const totalPrice=price*days,totalYou=you*days,totalPartner=(price-you)*days;
  // Use Paystack if configured, otherwise collect via bank
  const PAYSTACK_PK = CFG.paystack_key;
  if(PAYSTACK_PK && PAYSTACK_PK !== 'pk_live_YOUR_NEW_KEY_HERE') {
    const handler = PaystackPop.setup({
      key: PAYSTACK_PK,
      email: bP+'@surveypro.ng', // use phone as fallback email seed
      amount: totalPrice * 100,
      currency: 'NGN',
      ref: 'EQ_' + Date.now(),
      metadata: { name:bN, phone:bP, equipment:name, days, date:bD },
      callback: function(response) {
        closeModal();
        showBanner(`âœ… Booking confirmed! â‚¦${totalYou.toLocaleString()} â†’ your Opay ${CFG.opay} Â· Customer redirected to equipment partner.`);
        toast('Payment done! Opening equipment partner...','success');
        // Redirect customer to real equipment rental partner â€” NOT WhatsApp
        setTimeout(()=>window.open(link||CFG.equipPartner,'_blank'), 800);
      },
      onClose: function() { toast('Payment cancelled','warning'); }
    });
    handler.openIframe();
  } else {
    // Fallback: show bank details modal
    closeModal();
    showBanner(`âœ… Booking received! â‚¦${totalYou.toLocaleString()} â†’ Opay ${CFG.opay} Â· Customer directed to ${name} partner.`);
    openModal(`<div>
      <h3 style="font-weight:800;margin-bottom:12px;">âš™ï¸ Complete Payment</h3>
      <p style="font-size:0.85rem;margin-bottom:12px;">Transfer <strong>â‚¦${totalPrice.toLocaleString()}</strong> to:</p>
      <div style="background:#f0fdf4;border:2px solid #86efac;border-radius:10px;padding:14px;margin-bottom:14px;">
        <div><strong>Bank:</strong> Opay</div>
        <div><strong>Account:</strong> ${CFG.opay}</div>
        <div><strong>Name:</strong> ${CFG.bankAccountName}</div>
        <div style="margin-top:8px;color:#166534;font-weight:700;">Your 50%: â‚¦${totalYou.toLocaleString()} Â· Partner 50%: â‚¦${totalPartner.toLocaleString()}</div>
      </div>
      <button class="btn btn-green btn-full" onclick="closeModal();window.open('${link||CFG.equipPartner}','_blank')">ğŸ”— Go to Equipment Partner Site</button>
    </div>`);
    setTimeout(()=>window.open(link||CFG.equipPartner,'_blank'), 1200);
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TRAINING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildCourses() {
  const grid=g('coursesGrid');if(!grid)return;
  const levelClass={Beginner:'level-beg',Intermediate:'level-int',Advanced:'level-adv'};
  grid.innerHTML=COURSES.map(c=>{
    const you=Math.round(c.price*CFG.commission);
    return `<div class="course-card">
      <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px;">
        <h4 style="font-weight:700;color:var(--accent2);font-size:0.95rem;">${c.name}</h4>
        <span class="course-level ${levelClass[c.level]||'level-beg'}">${c.level}</span>
      </div>
      <p style="font-size:0.82rem;color:var(--text2);margin-bottom:10px;">${c.desc}</p>
      <div style="display:flex;gap:12px;font-size:0.75rem;color:var(--text3);margin-bottom:12px;">
        <span>â±ï¸ ${c.dur}</span><span>ğŸ›ï¸ ${c.platform}</span>
      </div>
      <div class="course-price">â‚¦${c.price.toLocaleString()}</div>
      <div class="course-earn" style="margin:6px 0 12px;">You earn: â‚¦${you.toLocaleString()} (50% of booking)</div>
      <button class="btn btn-primary btn-full btn-sm" onclick="enrollCourse('${c.id}','${c.name}',${c.price},'${c.platform}')">ğŸ“ Enroll â€” Earn â‚¦${you.toLocaleString()}</button>
    </div>`;
  }).join('');
}

function enrollCourse(id, name, price, platform) {
  const you=Math.round(price*CFG.commission);
  openModal(`<div>
    <h3 style="font-weight:800;margin-bottom:14px;">ğŸ“ ${name}</h3>
    <div style="background:#f0fdf4;border:2px solid #86efac;border-radius:10px;padding:14px;margin-bottom:14px;font-size:0.85rem;">
      <div><strong>Platform:</strong> ${platform}</div>
      <div><strong>Price:</strong> â‚¦${price.toLocaleString()}</div>
      <div><strong>Your cut (50%):</strong> <span style="color:var(--accent);font-weight:700;">â‚¦${you.toLocaleString()}</span> â†’ Opay ${CFG.opay}</div>
    </div>
    <div class="form-group"><label>Student Name</label><input id="sName" placeholder="Full name" type="text"></div>
    <div class="form-group"><label>Student Email</label><input id="sEmail" placeholder="email@example.com" type="email"></div>
    <div class="form-group"><label>Phone</label><input id="sPhone" placeholder="080XXXXXXXX" type="tel"></div>
    <div class="btn-grid">
      <button class="btn btn-green" onclick="confirmEnroll('${name}',${price},${you},'${platform}')">âœ… Enroll Now</button>
      <button class="btn btn-gray" onclick="closeModal()">Cancel</button>
    </div>
  </div>`);
}

function confirmEnroll(name, price, you, platform) {
  const sN=v('sName'),sE=v('sEmail'),sP=v('sPhone');
  if(!sN){toast('Enter student name','warning');document.getElementById('sName').focus();return;}
  if(!sE||!sE.includes('@')){toast('Enter a valid email address','warning');document.getElementById('sEmail').focus();return;}
  const partner=price-you;
  // Map platform name to real URL
  const platformURLs = {
    'QGIS Academy': 'https://www.udemy.com/courses/search/?q=QGIS+surveying',
    'Pix4D Academy': 'https://www.pix4d.com/training',
    'Coursera': 'https://www.coursera.org/search?query=GIS+land+surveying',
    'Trimble Academy': 'https://www.trimble.com/en/education',
    'Autodesk': 'https://www.autodesk.com/certification/learn',
    'Leica Academy': 'https://leica-geosystems.com/services-and-support/training',
    'NIESV': 'https://www.niesv.org.ng',
    'ESA EO Campus': 'https://eo-college.org'
  };
  const courseURL = platformURLs[platform] || CFG.trainPartner;
  const PAYSTACK_PK = CFG.paystack_key;
  if(PAYSTACK_PK && PAYSTACK_PK !== 'pk_live_YOUR_NEW_KEY_HERE') {
    const handler = PaystackPop.setup({
      key: PAYSTACK_PK,
      email: sE,
      amount: price * 100,
      currency: 'NGN',
      ref: 'TRN_' + Date.now(),
      metadata: { name:sN, phone:sP, course:name, platform },
      callback: function(response) {
        closeModal();
        showBanner(`âœ… Enrolled in ${name}! â‚¦${you.toLocaleString()} â†’ Opay ${CFG.opay} Â· Student sent to ${platform}.`);
        toast('Payment successful! Opening course platform...','success');
        // Redirect student directly to the real course platform â€” NO WhatsApp
        setTimeout(()=>window.open(courseURL,'_blank'), 800);
      },
      onClose: function() { toast('Payment cancelled','warning'); }
    });
    handler.openIframe();
  } else {
    // Fallback bank transfer
    closeModal();
    showBanner(`âœ… Enrolled in ${name}! â‚¦${you.toLocaleString()} â†’ Opay ${CFG.opay} Â· Student directed to ${platform}.`);
    openModal(`<div>
      <h3 style="font-weight:800;margin-bottom:12px;">ğŸ“ Complete Enrollment Payment</h3>
      <p style="font-size:0.85rem;margin-bottom:12px;">Transfer <strong>â‚¦${price.toLocaleString()}</strong> to:</p>
      <div style="background:#f0fdf4;border:2px solid #86efac;border-radius:10px;padding:14px;margin-bottom:14px;">
        <div><strong>Bank:</strong> Opay</div>
        <div><strong>Account:</strong> ${CFG.opay}</div>
        <div><strong>Name:</strong> ${CFG.bankAccountName}</div>
        <div style="margin-top:8px;color:#166534;font-weight:700;">Your 50%: â‚¦${you.toLocaleString()} Â· Goes to: ${platform} (â‚¦${partner.toLocaleString()})</div>
      </div>
      <button class="btn btn-primary btn-full" onclick="closeModal();window.open('${courseURL}','_blank')">ğŸ“ Start Learning on ${platform} â†’</button>
    </div>`);
    setTimeout(()=>window.open(courseURL,'_blank'), 1200);
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HISTORY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateHistory() {
  const cont=g('historyContent');if(!cont)return;
  if(surveys.length===0){
    cont.innerHTML='<div style="text-align:center;padding:60px 20px;color:var(--text3);"><div style="font-size:3rem;margin-bottom:12px;">ğŸ“‚</div><p style="font-size:1.1rem;font-weight:600;">No saved surveys yet</p><p style="font-size:0.85rem;margin-top:6px;">Complete and save surveys to see them here</p></div>';
    return;
  }
  cont.innerHTML=surveys.slice().reverse().map((s,i)=>{
    const realIdx=surveys.length-1-i;
    return `<div class="hist-card">
      <div class="hist-header">
        <div><h3 style="font-weight:800;font-size:1rem;color:var(--accent2);">${s.projectName}</h3><p style="font-size:0.82rem;color:var(--text2);">${s.location} Â· ${s.surveyType}</p></div>
        <span class="hist-code">${s.verificationCode}</span>
      </div>
      <div class="hist-stats">
        <div class="hist-stat"><div class="hk">Hectares</div><div class="hv" style="color:var(--accent);">${s.hectares.toFixed(4)}</div></div>
        <div class="hist-stat"><div class="hk">Acres</div><div class="hv" style="color:var(--accent2);">${s.acres.toFixed(4)}</div></div>
        <div class="hist-stat"><div class="hk">Points</div><div class="hv">${s.points}</div></div>
        <div class="hist-stat"><div class="hk">Plots</div><div class="hv" style="color:var(--warning);">${s.plots.toFixed(1)}</div></div>
      </div>
      <div style="font-size:0.78rem;color:var(--text3);margin-bottom:10px;">${s.clientName} Â· ${s.clientPhone} Â· ${new Date(s.savedAt).toLocaleDateString('en-NG')}</div>
      <div style="display:flex;gap:8px;flex-wrap:wrap;">
        <button class="btn btn-blue btn-sm" onclick="shareSurvey(${realIdx})">ğŸ“± Share</button>
        <button class="btn btn-gray btn-sm" onclick="viewSurveyDetail(${realIdx})">ğŸ‘ View</button>
        <button class="btn btn-green btn-sm" onclick="generateQRForSurvey(${realIdx})">ğŸ“± QR</button>
        <button class="btn btn-red btn-sm" onclick="deleteSurvey(${realIdx})">ğŸ—‘ï¸</button>
      </div>
    </div>`;
  }).join('');
}

function viewSurveyDetail(i) {
  const s=surveys[i];
  openModal(`<div>
    <h3 style="font-weight:800;margin-bottom:14px;">ğŸ“Š ${s.projectName}</h3>
    <div style="font-size:0.82rem;display:grid;gap:6px;margin-bottom:14px;">
      <div><strong>Code:</strong> <span class="mono">${s.verificationCode}</span></div>
      <div><strong>Client:</strong> ${s.clientName} Â· ${s.clientPhone}</div>
      <div><strong>Location:</strong> ${s.location}</div>
      <div><strong>File No:</strong> ${s.fileNumber||'N/A'}</div>
      <div><strong>Type:</strong> ${s.surveyType}</div>
      <div><strong>System:</strong> ${s.coordSystem}</div>
      <div><strong>Area:</strong> ${s.hectares.toFixed(4)} ha / ${s.acres.toFixed(4)} acres</div>
      <div><strong>Perimeter:</strong> ${s.perimeter?.toFixed(2)||'N/A'} m</div>
      <div><strong>Points:</strong> ${s.points}</div>
      <div><strong>Surveyor:</strong> ${s.surveyor||CFG.name}</div>
      <div><strong>Date:</strong> ${new Date(s.savedAt).toLocaleDateString('en-NG')}</div>
      ${s.notes?`<div><strong>Notes:</strong> ${s.notes}</div>`:''}
    </div>
    <button class="btn btn-gray btn-full" onclick="closeModal()">Close</button>
  </div>`);
}

function generateQRForSurvey(i) {
  const s=surveys[i];
  openModal(`<div style="text-align:center;">
    <h3 style="font-weight:700;margin-bottom:14px;">ğŸ“± Survey QR Code</h3>
    <div id="histQR" style="display:inline-block;"></div>
    <p class="mono" style="font-size:0.8rem;margin-top:10px;color:var(--text2);">${s.verificationCode}</p>
    <button class="btn btn-gray btn-full" style="margin-top:12px;" onclick="closeModal()">Close</button>
  </div>`);
  setTimeout(()=>{if(window.QRCode)new QRCode(document.getElementById('histQR'),{text:`SurveyPro Elite\nCode: ${s.verificationCode}\nProject: ${s.projectName}\nClient: ${s.clientName}\nArea: ${s.hectares.toFixed(4)} ha`,width:180,height:180});},200);
}

function shareSurvey(i) {
  const s=surveys[i];
  const txt=`ğŸ“Š SURVEY REPORT â€” SurveyPro Elite\n\nProject: ${s.projectName}\nLocation: ${s.location}\nClient: ${s.clientName}\nArea: ${s.hectares.toFixed(4)} ha / ${s.acres.toFixed(4)} acres\nPerimeter: ${s.perimeter?.toFixed(2)||'N/A'} m\nVerification: ${s.verificationCode}\nDate: ${new Date(s.savedAt).toLocaleDateString('en-NG')}\n\nSurveyPro Elite Â· ${CFG.email} Â· +234-811-755-4948`;
  if(navigator.share){navigator.share({title:`Survey â€” ${s.projectName}`,text:txt});}
  else if(navigator.clipboard){navigator.clipboard.writeText(txt);toast('Survey details copied!','success');}
  else{window.open(`${CFG.whatsapp}?text=${encodeURIComponent(txt)}`,'_blank');}
}

function deleteSurvey(i){if(!confirm('Delete this survey? Cannot be undone.'))return;surveys.splice(i,1);saveSurveys();updateHistory();updateReportDropdown();toast('Survey deleted','info');}
function clearAllHistory(){if(!confirm('Delete ALL surveys? Cannot be undone.'))return;surveys=[];saveSurveys();updateHistory();updateReportDropdown();toast('All history cleared','info');}
function exportAllSurveysJSON(){
  const blob=new Blob([JSON.stringify({surveys,exportedAt:new Date().toISOString(),platform:'SurveyPro Elite'},null,2)],{type:'application/json'});
  const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=`all-surveys-${Date.now()}.json`;a.click();
  toast('All surveys exported','success');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// REPORTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateReportDropdown() {
  const sel=g('reportSurveySelect');if(!sel)return;
  sel.innerHTML='<option value="">â€” Select a saved survey â€”</option>'+surveys.map((s,i)=>`<option value="${i}">${s.projectName} (${s.verificationCode})</option>`).join('');
}

function generateReport() {
  const idx=g('reportSurveySelect').value;
  if(idx===''){toast('Select a survey first','warning');return;}
  const s=surveys[parseInt(idx)];
  const rType=v('reportType'),rSurv=v('rptSurveyor'),rLic=v('rptLicense'),rFoot=v('rptFooter');
  const html=`<div style="background:#fff;border:2px solid var(--border);border-radius:12px;padding:24px;font-size:0.85rem;">
    <div style="text-align:center;border-bottom:3px solid #0f172a;padding-bottom:16px;margin-bottom:16px;">
      <div style="font-size:1.5rem;margin-bottom:4px;">ğŸ¯</div>
      <h2 style="font-size:1.3rem;font-weight:800;">SURVEY REPORT</h2>
      <p style="font-size:0.8rem;color:var(--text2);">SurveyPro Elite Â· WGS84 Â· ${rType}</p>
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;">
      <div><strong>Project:</strong> ${s.projectName}</div>
      <div><strong>Date:</strong> ${new Date(s.savedAt).toLocaleDateString('en-NG')}</div>
      <div><strong>Client:</strong> ${s.clientName}</div>
      <div><strong>Phone:</strong> ${s.clientPhone}</div>
      <div><strong>Location:</strong> ${s.location}</div>
      <div><strong>File No:</strong> ${s.fileNumber||'N/A'}</div>
      <div><strong>Survey Type:</strong> ${s.surveyType}</div>
      <div><strong>Coord System:</strong> ${s.coordSystem}</div>
    </div>
    <div style="background:#f0fdf4;border-radius:10px;padding:14px;margin-bottom:14px;display:grid;grid-template-columns:repeat(4,1fr);gap:10px;text-align:center;">
      <div><div style="font-size:0.72rem;color:var(--text3);">HECTARES</div><div style="font-weight:800;color:var(--accent);">${s.hectares.toFixed(4)}</div></div>
      <div><div style="font-size:0.72rem;color:var(--text3);">ACRES</div><div style="font-weight:800;color:var(--accent2);">${s.acres.toFixed(4)}</div></div>
      <div><div style="font-size:0.72rem;color:var(--text3);">PERIMETER</div><div style="font-weight:800;">${s.perimeter?.toFixed(2)||'N/A'} m</div></div>
      <div><div style="font-size:0.72rem;color:var(--text3);">PLOTS</div><div style="font-weight:800;">${s.plots?.toFixed(1)||'N/A'}</div></div>
    </div>
    <div style="margin-bottom:14px;">
      <div style="font-weight:700;margin-bottom:6px;">Verification Code</div>
      <div class="mono" style="font-size:1.3rem;font-weight:700;color:var(--accent);letter-spacing:0.1em;">${s.verificationCode}</div>
    </div>
    <div style="border-top:1px solid var(--border);padding-top:14px;font-size:0.78rem;color:var(--text2);">
      <p><strong>Surveyor:</strong> ${rSurv||CFG.name} ${rLic?'Â· Lic: '+rLic:''}</p>
      ${rFoot?`<p style="margin-top:6px;">${rFoot}</p>`:''}
      <p style="margin-top:6px;">Generated by SurveyPro Elite Â· ${CFG.email} Â· +234-811-755-4948</p>
    </div>
  </div>`;
  g('reportPreview').innerHTML=html;
  toast('Report generated','success');
}

function printReport(){
  const prev=g('reportPreview').innerHTML;
  if(!prev){toast('Generate report first','warning');return;}
  const w=window.open('','_blank');
  if(w){w.document.write(`<!DOCTYPE html><html><head><title>Survey Report</title><style>
/* === ANTI-BLANK-SCREEN: Force body visible at all times === */
html{opacity:1!important;visibility:visible!important;}
body{opacity:1!important;visibility:visible!important;display:block!important;font-family:'Segoe UI',system-ui,sans-serif;}body{font-family:Arial,sans-serif;margin:30px;}.mono{font-family:monospace;}</style></head><body>${prev}<script>window.print();<\/script></body></html>`);w.document.close();}
}

function emailReport(){
  const idx=g('reportSurveySelect').value;
  if(idx===''){toast('Select a survey first','warning');return;}
  const s=surveys[parseInt(idx)];
  if(!s.clientEmail){toast('No client email for this survey','warning');return;}
  window.location.href=`mailto:${s.clientEmail}?subject=Survey Report â€” ${s.projectName}&body=Dear ${s.clientName},%0A%0APlease find your survey report details:%0A%0AProject: ${s.projectName}%0AVerification: ${s.verificationCode}%0AArea: ${s.hectares.toFixed(4)} ha%0A%0ASurveyPro Elite%0A${CFG.email}`;
}

function previewReport(){generateReport();document.getElementById('reportPreview').scrollIntoView({behavior:'smooth'});}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PRICING ACTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function subscribePro(){
  const msg='ğŸ’ Professional Subscription Request\n\nI would like to subscribe to SurveyPro Elite Professional plan (â‚¦5,000/month).\n\nPlease send payment details and activate my account.';
  window.open(`${CFG.whatsapp}?text=${encodeURIComponent(msg)}`,'_blank');
}
function contactEnterprise(){
  const msg='ğŸ¢ Enterprise Plan Inquiry\n\nI am interested in the SurveyPro Elite Enterprise plan for my organization.\n\nPlease contact me with details, pricing, and SLA terms.';
  window.open(`${CFG.whatsapp}?text=${encodeURIComponent(msg)}`,'_blank');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CONTACT FORM (Formspree handler)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function handleContactSubmit(event) {
  // Let Formspree handle the POST, but show feedback
  const btn=g('contactSubmitBtn');
  const msg=document.getElementById('contactFormMsg');
  if(btn){btn.textContent='â³ Sending...';btn.disabled=true;}
  // Fallback: if Formspree is not set up, use WhatsApp/email
  const formData=new FormData(event.target);
  const name=formData.get('name')||'';
  const email=formData.get('email')||'';
  const service=formData.get('service')||'General Inquiry';
  const message=formData.get('message')||'';
  // Only intercept if Formspree ID is placeholder
  if(event.target.action.includes('YOUR_FORMSPREE_ID')){
    event.preventDefault();
    const waMsg=`ğŸ“© *New Inquiry â€” SurveyPro Elite*\n\nName: ${name}\nEmail: ${email}\nService: ${service}\n\nMessage:\n${message}`;
    if(msg){msg.style.display='block';msg.textContent='âœ… Redirecting to WhatsApp (Formspree not configured yet)...';}
    setTimeout(()=>{window.open(`${CFG.whatsapp}?text=${encodeURIComponent(waMsg)}`,'_blank');if(btn){btn.textContent='ğŸ“© Send Message';btn.disabled=false;}},1000);
  }
  // Otherwise let the form submit normally to Formspree
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LANGUAGE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setLang(l) {
  const langs={en:'English',ha:'Hausa',yo:'Yoruba',ig:'Igbo',fr:'French'};
  toast(`Language: ${langs[l]||l} â€” Full multilingual UI coming in v2.0`,'info');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DARK MODE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleDark() {
  darkMode=!darkMode;
  document.body.classList.toggle('dark',darkMode);
  g('darkBtn').textContent=darkMode?'â˜€ï¸ Light':'ğŸŒ™ Dark';
  try{localStorage.setItem('sp_dark',darkMode?'1':'0');}catch(e){}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MODAL & TOAST & BANNER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openModal(html) {g('modalContent').innerHTML=html;g('modalBg').classList.add('open');}
function closeModal() {g('modalBg').classList.remove('open');}

function toast(msg, type='info') {
  const icons={success:'âœ…',warning:'âš ï¸',error:'âŒ',info:'ğŸ’¡'};
  const el=document.createElement('div');
  el.className=`toast t-${type}`;
  el.textContent=`${icons[type]||'ğŸ“‹'} ${msg}`;
  g('toastWrap').appendChild(el);
  requestAnimationFrame(()=>el.classList.add('show'));
  setTimeout(()=>{el.classList.remove('show');setTimeout(()=>el.remove(),400);},3500);
}

function showBanner(msg) {
  g('bannerMsg').textContent=msg;
  g('topBanner').classList.add('show');
  setTimeout(closeBanner,7000);
}
function closeBanner(){g('topBanner').classList.remove('show');}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MATH UTILITIES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function shoelace(pts){
  let a=0;
  for(let i=0;i<pts.length;i++){const j=(i+1)%pts.length;a+=pts[i].e*pts[j].n-pts[j].e*pts[i].n;}
  return Math.abs(a/2);
}
function calcPerimeter(pts){
  let p=0;
  for(let i=0;i<pts.length;i++){const j=(i+1)%pts.length;p+=Math.sqrt((pts[j].n-pts[i].n)**2+(pts[j].e-pts[i].e)**2);}
  return p;
}
function v(id){const el=document.getElementById(id);return el?el.value.trim():'';}
function g(id){return document.getElementById(id);}
function saveSurveys(){try{localStorage.setItem('sp_elite_v3_surveys',JSON.stringify(surveys));}catch(e){console.warn('Storage error',e);}}
function loadSurveys(){try{const d=localStorage.getItem('sp_elite_v3_surveys');if(d)surveys=JSON.parse(d);}catch(e){console.warn('Load error',e);}}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PWA â€” Progressive Web App
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let deferredInstallPrompt=null;
window.addEventListener('beforeinstallprompt',(e)=>{
  e.preventDefault();
  deferredInstallPrompt=e;
});

function installApp() {
  if(deferredInstallPrompt){
    deferredInstallPrompt.prompt();
    deferredInstallPrompt.userChoice.then(r=>{
      if(r.outcome==='accepted')toast('SurveyPro Elite installed! ğŸ‰','success');
      document.getElementById('installBar').style.display='none';
      deferredInstallPrompt=null;
    });
  } else {
    toast('To install: browser menu â†’ "Add to Home Screen"','info');
  }
}

function dismissInstall(){document.getElementById('installBar').style.display='none';}


// â”€â”€ NIGERIA 36 STATES + FCT GPS COORDINATE MAP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const NIG_STATE_COORDS = {
  'Abia':        {lat:5.4527,  lng:7.5248,  city:'Umuahia'},
  'Adamawa':     {lat:9.3265,  lng:12.3984, city:'Yola'},
  'Akwa Ibom':   {lat:5.0079,  lng:7.8497,  city:'Uyo'},
  'Anambra':     {lat:6.2100,  lng:7.0670,  city:'Awka'},
  'Bauchi':      {lat:10.3158, lng:9.8442,  city:'Bauchi'},
  'Bayelsa':     {lat:4.7719,  lng:6.0699,  city:'Yenagoa'},
  'Benue':       {lat:7.7340,  lng:8.5227,  city:'Makurdi'},
  'Borno':       {lat:11.8333, lng:13.1500, city:'Maiduguri'},
  'Cross River': {lat:5.8702,  lng:8.5988,  city:'Calabar'},
  'Delta':       {lat:5.8904,  lng:5.6800,  city:'Asaba'},
  'Ebonyi':      {lat:6.2649,  lng:8.0137,  city:'Abakaliki'},
  'Edo':         {lat:6.3350,  lng:5.6037,  city:'Benin City'},
  'Ekiti':       {lat:7.7190,  lng:5.3110,  city:'Ado Ekiti'},
  'Enugu':       {lat:6.4584,  lng:7.5464,  city:'Enugu'},
  'FCT - Abuja': {lat:9.0580,  lng:7.4891,  city:'Abuja'},
  'Gombe':       {lat:10.2897, lng:11.1673, city:'Gombe'},
  'Imo':         {lat:5.4727,  lng:7.0256,  city:'Owerri'},
  'Jigawa':      {lat:12.2280, lng:9.5616,  city:'Dutse'},
  'Kaduna':      {lat:10.5264, lng:7.4388,  city:'Kaduna'},
  'Kano':        {lat:12.0022, lng:8.5920,  city:'Kano'},
  'Katsina':     {lat:12.9889, lng:7.6006,  city:'Katsina'},
  'Kebbi':       {lat:12.4539, lng:4.1975,  city:'Birnin Kebbi'},
  'Kogi':        {lat:7.7337,  lng:6.6906,  city:'Lokoja'},
  'Kwara':       {lat:8.9669,  lng:4.5874,  city:'Ilorin'},
  'Lagos':       {lat:6.5244,  lng:3.3792,  city:'Lagos'},
  'Nasarawa':    {lat:8.5378,  lng:8.3256,  city:'Lafia'},
  'Niger':       {lat:9.9309,  lng:5.5983,  city:'Minna'},
  'Ogun':        {lat:7.1608,  lng:3.3481,  city:'Abeokuta'},
  'Ondo':        {lat:7.2508,  lng:5.2103,  city:'Akure'},
  'Osun':        {lat:7.5629,  lng:4.5200,  city:'Osogbo'},
  'Oyo':         {lat:7.8500,  lng:3.9333,  city:'Ibadan'},
  'Plateau':     {lat:9.2182,  lng:9.5179,  city:'Jos'},
  'Rivers':      {lat:4.8394,  lng:6.9112,  city:'Port Harcourt'},
  'Sokoto':      {lat:13.0059, lng:5.2476,  city:'Sokoto'},
  'Taraba':      {lat:7.9994,  lng:10.7744, city:'Jalingo'},
  'Yobe':        {lat:12.2939, lng:11.7483, city:'Damaturu'},
  'Zamfara':     {lat:12.1222, lng:6.2236,  city:'Gusau'}
};

// Detect user state from GPS coordinates
function getStateFromCoords(lat, lng) {
  let closest = null, minDist = Infinity;
  for (const [state, coord] of Object.entries(NIG_STATE_COORDS)) {
    const d = Math.sqrt(Math.pow(lat - coord.lat, 2) + Math.pow(lng - coord.lng, 2));
    if (d < minDist) { minDist = d; closest = state; }
  }
  return closest;
}

// â”€â”€ JOBS NEAR ME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function detectLocationForJobs() {
  if (!navigator.geolocation) { toast('GPS not supported by this browser', 'error'); return; }
  const banner = document.getElementById('jobLocationBanner');
  const txt = document.getElementById('jobLocationText');
  if (banner) { banner.style.display = 'flex'; }
  if (txt) txt.textContent = 'ğŸ“¡ Detecting your location...';
  toast('Detecting your location...', 'info');
  navigator.geolocation.getCurrentPosition(
    pos => {
      const state = getStateFromCoords(pos.coords.latitude, pos.coords.longitude);
      if (state) {
        const sel = document.getElementById('jobStateFilter');
        if (sel) sel.value = state;
        if (txt) txt.textContent = 'ğŸ“ Showing jobs in ' + state + ' â€” ' + NIG_STATE_COORDS[state].city;
        filterJobs();
        toast('âœ… Showing jobs in ' + state, 'success');
      }
    },
    err => {
      if (txt) txt.textContent = 'âš ï¸ Could not detect location. Please select state manually.';
      toast('Location denied â€” please select your state manually', 'warning');
    },
    { timeout: 10000, enableHighAccuracy: false }
  );
}

function clearJobLocation() {
  const sel = document.getElementById('jobStateFilter');
  if (sel) sel.value = '';
  const banner = document.getElementById('jobLocationBanner');
  if (banner) banner.style.display = 'none';
  filterJobs();
  toast('Location filter cleared', 'info');
}

function filterJobs() {
  const state = document.getElementById('jobStateFilter')?.value;
  const cat = document.getElementById('jobCatFilter')?.value;
  const urg = document.getElementById('jobUrgFilter')?.value;
  let jobs = JSON.parse(localStorage.getItem('spe_jobs') || JSON.stringify(SAMPLE_JOBS));
  if (state) jobs = jobs.filter(j => j.state === state);
  if (cat) jobs = jobs.filter(j => j.category === cat);
  if (urg) jobs = jobs.filter(j => j.urgency === urg);
  renderJobBoard(jobs);
}



// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BAAS-POWERED BACKEND FEATURES
// Formspree (Forms) Â· Paystack (Payments) Â· localStorage (Data)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â”€â”€ AUTH SYSTEM (localStorage-based with JWT-ready structure) â”€â”€â”€â”€â”€â”€â”€â”€
const AUTH = {
  user: null,
  token: null,
  
  init() {
    try {
      const stored = localStorage.getItem('spe_auth');
      if (stored) {
        const data = JSON.parse(stored);
        this.user = data.user;
        this.token = data.token;
        this.updateUI();
      }
      // No forced login modal â€” all features available without account
    } catch(e) {}
  },
  
  save(user, token) {
    this.user = user;
    this.token = token;
    localStorage.setItem('spe_auth', JSON.stringify({ user, token, savedAt: new Date().toISOString() }));
    this.updateUI();
  },
  
  logout() {
    this.user = null;
    this.token = null;
    localStorage.removeItem('spe_auth');
    this.updateUI();
    toast('Signed out. See you again! ğŸ‘‹', 'info');
    // Return to home
    setTimeout(() => {
      document.querySelectorAll('.tab-content').forEach(el=>el.classList.remove('active'));
      document.querySelectorAll('.nav-btn').forEach(el=>el.classList.remove('active'));
      const homeTab=document.getElementById('tab-home');
      const homeBtn=document.getElementById('nb-home');
      if(homeTab) homeTab.classList.add('active');
      if(homeBtn) homeBtn.classList.add('active');
    }, 600);
  },
  
  isLoggedIn() { return !!this.user; },
  
  updateUI() {
    const loginBtn = document.getElementById('loginBtn');
    const userMenu = document.getElementById('userMenu');
    const userName = document.getElementById('userName');
    const userPlan = document.getElementById('userPlan');
    
    if (this.user) {
      if (loginBtn) loginBtn.style.display = 'none';
      if (userMenu) userMenu.style.display = 'flex';
      if (userName) userName.textContent = this.user.firstName || this.user.name || 'User';
      const plan = this.user.subscription?.plan || 'free';
      if (userPlan) {
        userPlan.className = `plan-badge plan-${plan}`;
        userPlan.textContent = plan.toUpperCase();
      }
    } else {
      if (loginBtn) loginBtn.style.display = 'flex';
      if (userMenu) userMenu.style.display = 'none';
    }
  }
};

function openAuthModal(tab) {
  tab = tab || 'login';
  const modal = document.getElementById('authModal');
  if (modal) { modal.style.display='flex'; switchAuth(tab); }
}
function closeAuthModal() {
  const modal = document.getElementById('authModal');
  if (modal) modal.style.display='none';
}
function switchAuth(tab) {
  document.querySelectorAll('.auth-pane').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
  const pane = document.getElementById('auth-' + tab);
  const tabs = document.querySelectorAll('.auth-tab');
  if (pane) pane.classList.add('active');
  const idx = tab === 'login' ? 0 : 1;
  if (tabs[idx]) tabs[idx].classList.add('active');
}

function doLogin() {
  const email = (document.getElementById('loginEmail')?.value||'').trim();
  const pwd = document.getElementById('loginPwd')?.value||'';
  if (!email||!pwd) { toast('Please enter your email and password','warning'); return; }
  if (!email.includes('@')) { toast('Enter a valid email address','warning'); return; }

  const users = JSON.parse(localStorage.getItem('spe_users')||'[]');
  const user = users.find(u=>u.email===email);

  if (user && user.pwdHash===btoa(pwd)) {
    AUTH.save(user,'local_'+Date.now());
    document.getElementById('authModal').style.display='none';
    toast(`Welcome back, ${user.firstName}! ğŸ‰`,'success');
    showBanner(`âœ… Signed in as ${user.firstName} ${user.lastName}`);
    // Force navigation to survey tool after login
    setTimeout(()=>showTab('survey'),300);
  } else if (user) {
    toast('Incorrect password. Please try again.','error');
    document.getElementById('loginPwd').value='';
    document.getElementById('loginPwd').focus();
  } else {
    toast('No account found for this email. Please create an account first.','warning');
    switchAuth('register');
  }
}

function doRegister() {
  const first = (document.getElementById('regFirst')?.value||'').trim();
  const last = (document.getElementById('regLast')?.value||'').trim();
  const email = (document.getElementById('regEmail')?.value||'').trim();
  const phone = (document.getElementById('regPhone')?.value||'').trim();
  const pwd = document.getElementById('regPwd')?.value||'';
  const role = document.getElementById('regRole')?.value||'client';
  const license = (document.getElementById('regLicense')?.value||'').trim();

  // Validate
  if (!first) { toast('Please enter your first name','warning'); document.getElementById('regFirst').focus(); return; }
  if (!last)  { toast('Please enter your last name','warning'); document.getElementById('regLast').focus(); return; }
  if (!email||!email.includes('@')) { toast('Enter a valid email address','warning'); document.getElementById('regEmail').focus(); return; }
  if (!pwd||pwd.length<8) { toast('Password must be at least 8 characters','warning'); document.getElementById('regPwd').focus(); return; }

  const users = JSON.parse(localStorage.getItem('spe_users')||'[]');
  if (users.find(u=>u.email===email)) {
    toast('This email is already registered. Please sign in.','error');
    switchAuth('login');
    document.getElementById('loginEmail').value=email;
    return;
  }

  const newUser = {
    id:'u_'+Date.now(), firstName:first, lastName:last,
    email, phone, role, licenseNumber:license,
    pwdHash:btoa(pwd),
    subscription:{plan:'free',status:'active'},
    jobsCompleted:0, totalEarnings:0,
    createdAt:new Date().toISOString()
  };
  users.push(newUser);
  localStorage.setItem('spe_users',JSON.stringify(users));
  AUTH.save(newUser,'local_'+Date.now());
  document.getElementById('authModal').style.display='none';
  toast(`ğŸ‰ Welcome to SurveyPro Elite, ${first}! Your account is ready.`,'success');
  showBanner(`âœ… Account created! Welcome, ${first} ${last} â€” you now have full access.`);
  setTimeout(()=>showTab('survey'),300);
}

function googleAuth() {
  // Google OAuth would need a real OAuth flow - simulate for now
  toast('Google sign-in requires backend setup. Use email/password or WhatsApp for now.', 'info');
}

function showForgotPwd() {
  const email = prompt('Enter your registered email address:');
  if (email) {
    toast(`Password reset link would be sent to ${email}. Contact us on WhatsApp for immediate help.`, 'info');
    window.open(`${CFG.whatsapp}?text=${encodeURIComponent(`ğŸ”‘ Password Reset Request\nEmail: ${email}\nPlease help me reset my SurveyPro Elite password.`)}`, '_blank');
  }
}

function logoutUser() {
  if (confirm('Sign out of SurveyPro Elite?')) AUTH.logout();
}

// â”€â”€ PAYSTACK PAYMENT INTEGRATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const PLANS_DATA = {
  basic:        { name: 'Basic',        price: 5000,  priceKobo: 500000  },
  professional: { name: 'Professional', price: 15000, priceKobo: 1500000 },
  enterprise:   { name: 'Enterprise',   price: 35000, priceKobo: 3500000 }
};

let currentPayPlan = 'professional';

function openPaymentModal(plan = 'professional') {
  currentPayPlan = plan;
  const p = PLANS_DATA[plan] || PLANS_DATA.professional;
  document.getElementById('payModalTitle').textContent = `ğŸ’³ Subscribe to ${p.name}`;
  document.getElementById('payPlanName').textContent = `${p.name} Plan`;
  document.getElementById('payAmount').textContent = `â‚¦${p.price.toLocaleString()}/mo`;
  
  const email = AUTH.user?.email || '';
  const name = AUTH.user ? `${AUTH.user.firstName} ${AUTH.user.lastName}` : '';
  if (document.getElementById('payEmail')) document.getElementById('payEmail').value = email;
  if (document.getElementById('payName')) document.getElementById('payName').value = name;
  
  document.getElementById('paymentModal').classList.add('open');
}
function closePaymentModal() {
  document.getElementById('paymentModal').classList.remove('open');
}

function initiatePaystack() {
  const email = document.getElementById('payEmail')?.value.trim();
  const name = document.getElementById('payName')?.value.trim();
  const phone = document.getElementById('payPhone')?.value.trim() || '';
  
  if (!name) { toast('Please enter your full name', 'warning'); document.getElementById('payName')?.focus(); return; }
  if (!email || !email.includes('@')) { toast('Please enter a valid email address', 'warning'); document.getElementById('payEmail')?.focus(); return; }
  
  const plan = PLANS_DATA[currentPayPlan];
  const PAYSTACK_PK = CFG.paystack_key;
  
  // Guard: if key not configured, fall back to WhatsApp/manual payment
  if (!PAYSTACK_PK || PAYSTACK_PK === 'pk_live_YOUR_NEW_KEY_HERE') {
    toast('âš™ï¸ Paystack key not yet set â€” routing to WhatsApp payment', 'warning');
    manualPayment();
    return;
  }
  
  const handler = {
    key: PAYSTACK_PK,
    email: email,
    amount: plan.priceKobo,
    currency: 'NGN',
    ref: 'SPE_' + Date.now() + '_' + Math.random().toString(36).substr(2,8).toUpperCase(),
    metadata: {
      name, phone, plan: currentPayPlan, platform: 'SurveyPro Elite',
      custom_fields: [
        { display_name: 'Customer Name', variable_name: 'customer_name', value: name },
        { display_name: 'Phone', variable_name: 'phone', value: phone || 'N/A' },
        { display_name: 'Plan', variable_name: 'plan', value: plan.name }
      ]
    },
    label: 'SurveyPro Elite â€” ' + plan.name + ' | Rogers Opus',
    callback: function(response) {
      closePaymentModal();
      toast('âœ… Payment confirmed! Ref: ' + response.reference, 'success');
      if (AUTH.user) {
        AUTH.user.subscription = { plan: currentPayPlan, status: 'active', startDate: new Date().toISOString(), reference: response.reference };
        AUTH.save(AUTH.user, AUTH.token);
        showBanner('ğŸ‰ ' + plan.name + ' plan activated! All features unlocked.');
      }
      const msg = 'âœ… *PAYMENT CONFIRMED â€” SurveyPro Elite*\n\nPlan: *' + plan.name + '*\nAmount: â‚¦' + plan.price.toLocaleString() + '\nRef: ' + response.reference + '\nName: ' + name + '\nEmail: ' + email + '\n\nThank you! Your subscription is now active. ğŸ‰';
      setTimeout(() => window.open(CFG.whatsapp + '?text=' + encodeURIComponent(msg), '_blank'), 800);
    },
    onClose: function() { toast('Payment window closed', 'info'); }
  };
  
  if (window.PaystackPop) {
    const popup = window.PaystackPop.setup(handler);
    popup.openIframe();
  } else {
    const msg = 'ğŸ’³ *SUBSCRIPTION PAYMENT â€” SurveyPro Elite*\n\nPlan: *' + plan.name + '*\nAmount: â‚¦' + plan.price.toLocaleString() + '/month\nName: ' + name + '\nEmail: ' + email + '\n\n*Payment Options:*\n1ï¸âƒ£ Bank: ' + CFG.bankName + ' â€” ' + CFG.bankAccountName + ' â€” ' + CFG.bankAccount + '\n2ï¸âƒ£ Opay: ' + CFG.opay + '\n3ï¸âƒ£ PalmPay: ' + CFG.phone + '\n\nAfter payment, send proof screenshot to activate your plan immediately.';
    closePaymentModal();
    window.open(CFG.whatsapp + '?text=' + encodeURIComponent(msg), '_blank');
  }
}

function payViaOpay() {
  const plan = PLANS_DATA[currentPayPlan] || PLANS_DATA.professional;
  const name = document.getElementById('payName')?.value.trim() || 'Customer';
  const email = document.getElementById('payEmail')?.value.trim() || '';
  const msg = `ğŸ’³ *PAYMENT â€” SurveyPro Elite*

Plan: ${plan.name}
Amount: â‚¦${plan.price.toLocaleString()}
Name: ${name}
Email: ${email}

Send â‚¦${plan.price.toLocaleString()} to:
ğŸ“± Opay: *8117554948* (Rogers Opus)

After payment, send screenshot to confirm.`;
  closePaymentModal();
  openModal(`<div style="text-align:center;padding:10px;">
    <div style="font-size:3rem;margin-bottom:10px;">ğŸ“±</div>
    <h3 style="font-weight:800;margin-bottom:10px;">Pay via Opay</h3>
    <div style="background:#f0fdf4;border:2px solid #86efac;border-radius:12px;padding:18px;margin-bottom:14px;text-align:left;">
      <div style="font-size:0.78rem;color:var(--text3);margin-bottom:6px;font-weight:700;">SEND PAYMENT TO:</div>
      <div style="font-size:1.8rem;font-weight:800;color:var(--accent);font-family:monospace;text-align:center;letter-spacing:2px;margin:10px 0;">8117554948</div>
      <div style="text-align:center;font-size:0.85rem;color:var(--text2);">Rogers Opus Â· Opay</div>
      <div style="text-align:center;font-size:1.2rem;font-weight:800;margin-top:10px;color:var(--accent);">Amount: â‚¦${plan.price.toLocaleString()}</div>
      <div style="font-size:0.75rem;color:var(--text3);text-align:center;margin-top:6px;">Plan: ${plan.name}</div>
    </div>
    <div style="display:grid;gap:8px;">
      <button class="btn btn-green btn-full" onclick="window.open(CFG.whatsapp+'?text='+encodeURIComponent('${encodeURIComponent(msg)}'),'_blank');closeModal();toast('Send your payment screenshot on WhatsApp!','success');">ğŸ“± Confirm via WhatsApp</button>
      <button class="btn btn-gray btn-full" onclick="closeModal()">Done</button>
    </div>
  </div>`);
}

function payViaBankTransfer() {
  const plan = PLANS_DATA[currentPayPlan] || PLANS_DATA.professional;
  closePaymentModal();
  openModal(`<div style="text-align:left;padding:10px;">
    <h3 style="font-weight:800;margin-bottom:14px;text-align:center;">ğŸ¦ Bank Transfer Details</h3>
    <div style="display:grid;gap:10px;margin-bottom:16px;">
      <div style="background:#eff6ff;border:2px solid #bfdbfe;border-radius:10px;padding:14px;">
        <div style="font-size:0.7rem;color:var(--text3);font-weight:700;margin-bottom:4px;">BANK</div>
        <div style="font-weight:800;font-size:1.1rem;">${CFG.bankName}</div>
      </div>
      <div style="background:#f0fdf4;border:2px solid #86efac;border-radius:10px;padding:14px;">
        <div style="font-size:0.7rem;color:var(--text3);font-weight:700;margin-bottom:4px;">ACCOUNT NUMBER</div>
        <div style="font-weight:800;font-size:1.5rem;font-family:monospace;letter-spacing:2px;color:var(--accent);">${CFG.bankAccount}</div>
      </div>
      <div style="background:#f8fafc;border-radius:10px;padding:14px;">
        <div style="font-size:0.7rem;color:var(--text3);font-weight:700;margin-bottom:4px;">ACCOUNT NAME</div>
        <div style="font-weight:700;">${CFG.bankAccountName}</div>
      </div>
      <div style="background:linear-gradient(135deg,#0f172a,#1e3a5f);color:#fff;border-radius:10px;padding:14px;text-align:center;">
        <div style="font-size:0.75rem;opacity:0.7;margin-bottom:4px;">AMOUNT TO TRANSFER</div>
        <div style="font-size:2rem;font-weight:800;color:#4ade80;">â‚¦${plan.price.toLocaleString()}</div>
        <div style="font-size:0.75rem;opacity:0.7;">${plan.name} Plan</div>
      </div>
    </div>
    <p style="font-size:0.78rem;color:var(--text2);margin-bottom:12px;">âš ï¸ After transfer, send proof of payment (screenshot) via WhatsApp to activate your plan immediately.</p>
    <div style="display:grid;gap:8px;">
      <button class="btn btn-green btn-full" onclick="window.open(CFG.whatsapp+'?text='+encodeURIComponent('ğŸ’³ Bank Transfer Payment â€” SurveyPro Elite\nPlan: ${plan.name}\nAmount: â‚¦${plan.price.toLocaleString()}\nI have transferred the amount. Please activate my account.'),'_blank');closeModal();">ğŸ“± Send Proof via WhatsApp</button>
      <button class="btn btn-gray btn-full" onclick="closeModal()">Close</button>
    </div>
  </div>`);
}


function manualPayment() {
  const email = document.getElementById('payEmail')?.value.trim() || '';
  const name = document.getElementById('payName')?.value.trim() || '';
  const plan = PLANS_DATA[currentPayPlan];
  
  const msg = `ğŸ’³ *SUBSCRIPTION REQUEST â€” SurveyPro Elite*\n\nName: ${name}\nEmail: ${email}\nPlan: *${plan.name}*\nAmount: â‚¦${plan.price.toLocaleString()}/month\n\nPlease send payment details and bank account info.`;
  closePaymentModal();
  window.open(`${CFG.whatsapp}?text=${encodeURIComponent(msg)}`, '_blank');
}

function payCrypto() {
  const plan = PLANS_DATA[currentPayPlan];
  const name = document.getElementById('payName')?.value.trim() || '';
  const email = document.getElementById('payEmail')?.value.trim() || '';
  const BTC_ADDRESS = CFG.btc_address;
  closePaymentModal();
  openModal(`
    <div style="text-align:center;padding:8px;">
      <div style="font-size:2.5rem;margin-bottom:8px;">â‚¿</div>
      <h3 style="font-weight:800;font-size:1.1rem;margin-bottom:4px;">Pay with Bitcoin (BTC)</h3>
      <p style="font-size:0.82rem;color:var(--text2);margin-bottom:16px;">Send the exact BTC equivalent of <strong>â‚¦${plan.price.toLocaleString()}</strong> (${plan.name} Plan) to the address below, then send your transaction screenshot on WhatsApp.</p>
      <div style="background:#fffbeb;border:2px solid #fcd34d;border-radius:12px;padding:16px;margin-bottom:14px;">
        <div style="font-size:0.7rem;font-weight:700;color:#92400e;text-transform:uppercase;letter-spacing:0.08em;margin-bottom:8px;">â‚¿ Bitcoin (BTC) Address</div>
        <div style="font-family:'JetBrains Mono','Courier New',monospace;font-size:0.78rem;font-weight:700;color:#1a2332;word-break:break-all;background:#fff;border:1px solid #fcd34d;border-radius:8px;padding:10px 12px;margin-bottom:10px;cursor:pointer;user-select:all;" onclick="navigator.clipboard?.writeText('${BTC_ADDRESS}').then(()=>toast('âœ… BTC address copied!','success'))">
          ${BTC_ADDRESS}
        </div>
        <button onclick="navigator.clipboard?.writeText('${BTC_ADDRESS}').then(()=>toast('âœ… BTC address copied!','success'))" style="background:#f59e0b;color:#fff;border:none;border-radius:8px;padding:8px 18px;font-weight:700;font-size:0.82rem;cursor:pointer;font-family:inherit;width:100%;">ğŸ“‹ Copy BTC Address</button>
      </div>
      <div style="background:#f0f9ff;border:1px solid #bae6fd;border-radius:10px;padding:12px;font-size:0.78rem;color:#0369a1;margin-bottom:14px;text-align:left;">
        <strong>Steps:</strong><br>
        1. Open your crypto wallet (Binance, Coinbase, Trust Wallet, etc.)<br>
        2. Send BTC to the address above<br>
        3. Calculate amount: check current BTC/NGN rate for â‚¦${plan.price.toLocaleString()}<br>
        4. After sending, click the WhatsApp button below and send your transaction hash/screenshot<br>
        5. Account activated within 30 minutes âœ…
      </div>
      <button onclick="closeModal();window.open('${CFG.whatsapp}?text='+encodeURIComponent('â‚¿ BTC PAYMENT â€” SurveyPro Elite\\nName: ${name}\\nEmail: ${email}\\nPlan: ${plan.name}\\nAmount: â‚¦${plan.price.toLocaleString()}\\nBTC Address used: ${BTC_ADDRESS}\\n\\nPlease see my transaction screenshot attached.'),'_blank')" style="background:#25D366;color:#fff;border:none;border-radius:10px;padding:12px 20px;font-weight:700;font-size:0.88rem;cursor:pointer;font-family:inherit;width:100%;margin-bottom:8px;">ğŸ“± Send Transaction Proof via WhatsApp</button>
      <button onclick="closeModal()" style="background:var(--border);color:var(--text2);border:none;border-radius:10px;padding:10px;font-weight:600;font-size:0.82rem;cursor:pointer;font-family:inherit;width:100%;">Cancel</button>
    </div>
  `);
  toast('â‚¿ BTC address shown â€” copy and send payment','info');
}

// â”€â”€ PAY SERVICES TAB â€” State & Functions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let svcSelectedAmount = 100000;
let svcSelectedPurpose = 'Boundary Survey ğŸ“';

function selectPayPurpose(tag, purpose) {
  document.querySelectorAll('.pay-purpose-tag').forEach(t => t.classList.remove('active'));
  tag.classList.add('active');
  svcSelectedPurpose = purpose;
  document.getElementById('svcDisplayPurpose').textContent = purpose;
}

function selectSvcAmount(btn, amount) {
  document.querySelectorAll('.svc-amt-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  if (amount === 0) {
    document.getElementById('svcCustomWrap').style.display = 'block';
    svcSelectedAmount = 0;
    document.getElementById('svcDisplayAmount').textContent = 'â‚¦???';
  } else {
    document.getElementById('svcCustomWrap').style.display = 'none';
    svcSelectedAmount = amount;
    document.getElementById('svcDisplayAmount').textContent = 'â‚¦' + amount.toLocaleString();
  }
}

function updateSvcCustomAmount() {
  const val = parseInt(document.getElementById('svcCustomAmt').value) || 0;
  svcSelectedAmount = val;
  document.getElementById('svcDisplayAmount').textContent = val > 0 ? 'â‚¦' + val.toLocaleString() : 'â‚¦???';
}

function paySurveyService() {
  const name = document.getElementById('svcPayerName')?.value.trim();
  const email = document.getElementById('svcPayerEmail')?.value.trim();
  const phone = document.getElementById('svcPayerPhone')?.value.trim() || '';
  const note = document.getElementById('svcPayerNote')?.value.trim() || '';
  
  if (!name) { toast('Please enter your full name', 'warning'); document.getElementById('svcPayerName')?.focus(); return; }
  if (!email || !email.includes('@')) { toast('Please enter a valid email address', 'warning'); document.getElementById('svcPayerEmail')?.focus(); return; }
  if (svcSelectedAmount < 100) { toast('Please select or enter a valid amount (min â‚¦100)', 'warning'); return; }
  
  const PAYSTACK_PK = CFG.paystack_key;
  
  // Live key active â€” Paystack ready
  
  const amountKobo = svcSelectedAmount * 100;
  
  const handler = {
    key: PAYSTACK_PK,
    email: email,
    amount: amountKobo,
    currency: 'NGN',
    ref: 'SVC_' + Date.now() + '_' + Math.random().toString(36).substr(2,8).toUpperCase(),
    metadata: {
      name, phone, note, service: svcSelectedPurpose, platform: 'SurveyPro Elite',
      custom_fields: [
        { display_name: 'Customer Name', variable_name: 'customer_name', value: name },
        { display_name: 'Phone', variable_name: 'phone', value: phone || 'N/A' },
        { display_name: 'Service', variable_name: 'service', value: svcSelectedPurpose },
        { display_name: 'Notes', variable_name: 'notes', value: note || 'N/A' }
      ]
    },
    label: 'SurveyPro Elite â€” ' + svcSelectedPurpose + ' | Rogers Opus',
    callback: function(response) {
      toast('âœ… Payment successful! Ref: ' + response.reference, 'success');
      const msg = 'âœ… *SERVICE PAYMENT CONFIRMED â€” SurveyPro Elite*\n\nService: *' + svcSelectedPurpose + '*\nAmount: â‚¦' + svcSelectedAmount.toLocaleString() + '\nRef: ' + response.reference + '\nName: ' + name + '\nEmail: ' + email + '\nPhone: ' + (phone || 'N/A') + '\nNotes: ' + (note || 'N/A') + '\n\nThank you! We will contact you within 24 hours to schedule your survey. ğŸ‰';
      showBanner('âœ… Payment received! We will contact you shortly for scheduling.');
      setTimeout(() => window.open(CFG.whatsapp + '?text=' + encodeURIComponent(msg), '_blank'), 800);
    },
    onClose: function() { toast('Payment window closed', 'info'); }
  };
  
  if (window.PaystackPop) {
    const popup = window.PaystackPop.setup(handler);
    popup.openIframe();
  } else {
    svcPayViaWhatsApp();
  }
}

function svcPayViaWhatsApp() {
  const name = document.getElementById('svcPayerName')?.value.trim() || 'Customer';
  const email = document.getElementById('svcPayerEmail')?.value.trim() || '';
  const phone = document.getElementById('svcPayerPhone')?.value.trim() || '';
  const note = document.getElementById('svcPayerNote')?.value.trim() || '';
  const msg = 'ğŸ’³ *SERVICE PAYMENT REQUEST â€” SurveyPro Elite*\n\nService: *' + svcSelectedPurpose + '*\nAmount: â‚¦' + svcSelectedAmount.toLocaleString() + '\nName: ' + name + '\nEmail: ' + email + '\nPhone: ' + (phone || 'N/A') + '\nNotes: ' + (note || 'N/A') + '\n\n*Payment Options:*\n1ï¸âƒ£ Opay: *' + CFG.opay + '* (Rogers Opus)\n2ï¸âƒ£ PalmPay: *' + CFG.phone + '*\n3ï¸âƒ£ Bank: ' + CFG.bankName + ' â€” ' + CFG.bankAccountName + ' â€” ' + CFG.bankAccount + '\n\nAfter payment, send proof screenshot to confirm and schedule your service.';
  window.open(CFG.whatsapp + '?text=' + encodeURIComponent(msg), '_blank');
  toast('WhatsApp opened with payment details', 'success');
}

function svcPayViaBank() {
  openModal('<div style="padding:10px;">' +
    '<h3 style="font-weight:800;margin-bottom:16px;text-align:center;">ğŸ¦ Bank Transfer Details</h3>' +
    '<div style="display:grid;gap:12px;">' +
    '<div style="background:#f0fdf4;border:2px solid #86efac;border-radius:12px;padding:16px;">' +
    '<div style="font-size:0.72rem;font-weight:700;letter-spacing:0.06em;color:#15803d;margin-bottom:6px;">FIRST BANK OF NIGERIA</div>' +
    '<div style="font-size:1.6rem;font-weight:800;color:#166534;font-family:monospace;letter-spacing:2px;text-align:center;margin:8px 0;">' + CFG.bankAccount + '</div>' +
    '<div style="text-align:center;font-size:0.85rem;color:#166534;font-weight:600;">' + CFG.bankAccountName + '</div>' +
    '<div style="text-align:center;font-size:1.1rem;font-weight:800;margin-top:8px;color:#16a34a;">â‚¦' + svcSelectedAmount.toLocaleString() + '</div>' +
    '</div>' +
    '<div style="background:#f8fafc;border:2px solid var(--border);border-radius:12px;padding:16px;">' +
    '<div style="font-size:0.72rem;font-weight:700;letter-spacing:0.06em;color:var(--text3);margin-bottom:8px;">ALSO ACCEPTS (Instant Transfer)</div>' +
    '<div style="display:grid;gap:6px;font-size:0.85rem;">' +
    '<div>ğŸ“± <strong>Opay:</strong> ' + CFG.opay + ' (Arnold Opusunju)</div>' +
    '<div>ğŸ’š <strong>PalmPay:</strong> ' + CFG.phone + '</div>' +
    '</div>' +
    '</div>' +
    '</div>' +
    '<p style="font-size:0.78rem;color:var(--text3);text-align:center;margin-top:14px;">After transfer, send screenshot via WhatsApp to confirm and schedule.</p>' +
    '<div style="display:grid;gap:8px;margin-top:12px;">' +
    '<button class="btn btn-green btn-full" onclick="svcPayViaWhatsApp();closeModal();">ğŸ“± Send Payment Screenshot via WhatsApp</button>' +
    '<button class="btn btn-gray btn-full" onclick="closeModal()">Done</button>' +
    '</div>' +
    '</div>');
}

// Override subscribePro and contactEnterprise to use new modal




// â”€â”€ FORMSPREE CONTACT FORM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function submitContact(e) {
  e.preventDefault();
  const form = document.getElementById('contactForm');
  const status = document.getElementById('contactStatus');
  const btn = form.querySelector('button[type=submit]');
  
  btn.textContent = 'ğŸ“¨ Sending...';
  btn.disabled = true;
  
  try {
    const response = await fetch(form.action, {
      method: 'POST',
      body: new FormData(form),
      headers: { 'Accept': 'application/json' }
    });
    
    if (response.ok) {
      status.textContent = 'âœ… Message sent! We will reply within 2 hours. Check WhatsApp +234-811-755-4948 for faster response.';
      status.className = 'status-msg show success';
      form.reset();
      toast('Message sent successfully!', 'success');
    } else {
      throw new Error('Form submission failed');
    }
  } catch(err) {
    // Formspree fallback - use WhatsApp instead
    status.textContent = 'âš ï¸ Direct message failed. Redirecting to WhatsApp...';
    status.className = 'status-msg show error';
    setTimeout(() => {
      const data = new FormData(form);
      const msg = `ğŸ“© Website Contact â€” SurveyPro Elite\n\nName: ${data.get('name')||''}\nEmail: ${data.get('email')||''}\nPhone: ${data.get('phone')||''}\nService: ${data.get('service')||''}\nState: ${data.get('state')||''}\n\nMessage:\n${data.get('message')||''}`;
      window.open(`${CFG.whatsapp}?text=${encodeURIComponent(msg)}`, '_blank');
    }, 1500);
  } finally {
    btn.textContent = 'ğŸ“¨ Send Message â€” We Reply Within 2 Hours';
    btn.disabled = false;
  }
}

// â”€â”€ JOB BOARD (localStorage-based with Nigeria states) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const JOB_CATEGORIES = ['Cadastral Survey','Topographic Survey','Boundary Survey','Engineering Survey','Hydrographic Survey','GIS Mapping','Aerial/Drone Survey','C of O Processing'];

const SAMPLE_JOBS = [
  // â”€â”€ LAGOS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j1',  title:'Boundary Survey â€” 2 Plots, Ikeja GRA',       category:'Boundary Survey',    state:'Lagos',       lga:'Ikeja',            budget:120000, urgency:'high',   posted:'2026-02-17', desc:'Boundary survey for 2 residential plots at Ikeja GRA. SURCON licensed surveyor required. Concrete beacons and coordinate list needed. All owner documents available.',                               client:'Abubakar M.',  status:'open' },
  { id:'j1b', title:'Cadastral Survey â€” 8 Plots, Lekki Phase 1',  category:'Cadastral Survey',   state:'Lagos',       lga:'Eti-Osa',          budget:280000, urgency:'urgent', posted:'2026-02-19', desc:'Cadastral survey for 8-plot estate in Lekki Phase 1. Government-certified plan required for all allottees. SURCON stamp and land registry submission included.',                                     client:'Adeyemi B.',   status:'open' },
  { id:'j1c', title:'Topographic Survey â€” Ajah Road, Lagos',      category:'Topographic Survey', state:'Lagos',       lga:'Eti-Osa',          budget:190000, urgency:'medium', posted:'2026-02-20', desc:'Topographic survey for proposed 1.2km road in Ajah. Cross sections at 25m intervals, spot heights, drainage channels plotted. AutoCAD DWG output required.',                                       client:'Lagoon Dev.',  status:'open' },
  // â”€â”€ FCT ABUJA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j2',  title:'Topographic Survey â€” 5Ha, Gwagwalada',       category:'Topographic Survey', state:'FCT - Abuja', lga:'Gwagwalada',       budget:80000,  urgency:'medium', posted:'2026-02-16', desc:'Topo survey for housing estate development in Gwagwalada. 5 hectares. Contour interval 0.5m required. AutoCAD DWG + PDF deliverable. ABUJA layout datum.',                                          client:'Chioma E.',    status:'open' },
  { id:'j2b', title:'C of O Processing â€” Residential, Gwarinpa',  category:'C of O Processing',  state:'FCT - Abuja', lga:'Abuja Municipal',  budget:185000, urgency:'high',   posted:'2026-02-17', desc:'C of O processing for 3-bedroom house in Gwarinpa. Layout already approved by AGIS. Surveyor to process title deed at FCT lands office. All documents ready.',                                     client:'Samuel O.',    status:'open' },
  { id:'j2c', title:'Boundary Survey â€” 3 Plots, Lugbe',           category:'Boundary Survey',    state:'FCT - Abuja', lga:'Abuja Municipal',  budget:95000,  urgency:'medium', posted:'2026-02-18', desc:'Boundary demarcation for 3 serviced plots in Lugbe Estate. Concrete pillar beacons placement. AGIS-certified survey plan. Coordinate list in WGS84 and Abuja local grid.',                         client:'John A.',      status:'open' },
  // â”€â”€ RIVERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j3',  title:'C of O Processing â€” Commercial, GRA PHC',    category:'C of O Processing',  state:'Rivers',      lga:'Port Harcourt',    budget:200000, urgency:'urgent', posted:'2026-02-15', desc:'Urgent C of O for commercial property in GRA Phase 2, Port Harcourt. All original documents ready for processing. Deadline in 3 weeks. Meet Rivers state lands office requirements.',               client:'Emeka O.',     status:'open' },
  { id:'j3b', title:'Hydrographic Survey â€” Bonny Waterway',       category:'Hydrographic Survey',state:'Rivers',      lga:'Bonny',            budget:420000, urgency:'urgent', posted:'2026-02-16', desc:'Bathymetric survey of Bonny jetty approach channel for NIMASA port authority approval. Multi-beam echo sounder data. Full chart deliverable. Boat and fuel provided by client.',                     client:'Rivers Port',  status:'open' },
  { id:'j3c', title:'Cadastral Survey â€” Oil Serviced Estate',     category:'Cadastral Survey',   state:'Rivers',      lga:'Obio-Akpor',       budget:320000, urgency:'high',   posted:'2026-02-18', desc:'Cadastral survey for 15-plot serviced estate in Rumuola, Obio-Akpor. SURCON certified plan, pillar placement, and coordinate schedule for all plots.',                                              client:'ExxonMobil Hsg',status:'open'},
  // â”€â”€ KANO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j4',  title:'GIS Mapping â€” 50Ha Farm, Kano Municipal',    category:'GIS Mapping',        state:'Kano',        lga:'Kano Municipal',   budget:60000,  urgency:'low',    posted:'2026-02-14', desc:'50-hectare agricultural land GIS mapping and NDVI analysis. Satellite imagery provided. Report in PDF + Shapefile (SHP) format. GPS ground control points required.',                                client:'Musa I.',      status:'open' },
  { id:'j4b', title:'Boundary Survey â€” 10 Plots, Sabon Gari',    category:'Boundary Survey',    state:'Kano',        lga:'Sabon Gari',       budget:85000,  urgency:'medium', posted:'2026-02-18', desc:'Boundary survey for 10 residential plots in Sabon Gari. Concrete beacons, SURCON plan, and coordinates for each plot. Kano State lands office submission.',                                        client:'Nuhu A.',      status:'open' },
  // â”€â”€ OGUN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j5',  title:'Cadastral Survey â€” 10 Plots, Sagamu',        category:'Cadastral Survey',   state:'Ogun',        lga:'Sagamu',           budget:350000, urgency:'medium', posted:'2026-02-13', desc:'Cadastral survey for new estate in Sagamu. 10 residential plots. SURCON stamp and certified plan required for all individual title documents. Client has layout.',                                   client:'Folake A.',    status:'open' },
  { id:'j5b', title:'Topographic Survey â€” Agbara Industrial',     category:'Topographic Survey', state:'Ogun',        lga:'Ado-Odo/Ota',      budget:240000, urgency:'high',   posted:'2026-02-17', desc:'Topo survey for 8-hectare industrial land in Agbara. Drainage study, building setbacks, and 3D terrain model. AutoCAD Civil 3D and PDF deliverable.',                                              client:'OGIDA',        status:'open' },
  // â”€â”€ DELTA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j6',  title:'Engineering Survey â€” 3.5km Road, Warri',     category:'Engineering Survey', state:'Delta',       lga:'Warri',            budget:450000, urgency:'high',   posted:'2026-02-12', desc:'Pre-construction road survey 3.5km in Warri. Cross sections at 20m intervals. Earthworks volume computation and AutoCAD drawing deliverable. 2-week deadline.',                                     client:'Ovie D.',      status:'open' },
  { id:'j6b', title:'Drone Survey â€” Pipeline ROW, Ughelli',       category:'Aerial/Drone Survey',state:'Delta',       lga:'Ughelli',          budget:380000, urgency:'high',   posted:'2026-02-19', desc:'Drone aerial survey of 12km pipeline right-of-way in Ughelli. Orthophoto, digital terrain model, and encroachment mapping. Pix4D processing. SHP + PDF output.',                                   client:'Delta Energy',  status:'open' },
  // â”€â”€ ANAMBRA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j7',  title:'Drone Aerial Survey â€” 12Ha Estate, Awka',    category:'Aerial/Drone Survey',state:'Anambra',     lga:'Awka',             budget:180000, urgency:'medium', posted:'2026-02-11', desc:'Aerial photogrammetric survey for 12-hectare residential estate in Awka. Orthophoto + 1m contour map. Pix4D photogrammetry suite. Anambra state projection system.',                                client:'Ngozi K.',     status:'open' },
  { id:'j7b', title:'Topographic Survey â€” Flood Study, Onitsha',  category:'Topographic Survey', state:'Anambra',     lga:'Onitsha',          budget:170000, urgency:'urgent', posted:'2026-02-19', desc:'Topographic survey for flood risk study near River Niger in Onitsha. 20 hectares. Cross sections, spot heights, drainage flow direction analysis. Urgent â€” rainy season approaching.',                client:'Anambra Env.',  status:'open' },
  // â”€â”€ BAYELSA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j8',  title:'Hydrographic Survey â€” Jetty, Yenagoa',       category:'Hydrographic Survey',state:'Bayelsa',     lga:'Yenagoa',          budget:320000, urgency:'urgent', posted:'2026-02-10', desc:'Bathymetric survey of jetty approach channel in Yenagoa. NIMASA chart required for port authority approval. Single-beam echo sounder. Boat provided by client.',                                    client:'Timipre B.',   status:'open' },
  // â”€â”€ KADUNA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j9',  title:'Boundary Survey â€” 5 Plots, Ungwan Romi',     category:'Boundary Survey',    state:'Kaduna',      lga:'Kaduna North',     budget:95000,  urgency:'medium', posted:'2026-02-09', desc:'Boundary survey and concrete pillar placement for 5 residential plots in Ungwan Romi, Kaduna. Coordinate list in UTM 32N. Kaduna State lands office certification.',                               client:'Haruna A.',    status:'open' },
  { id:'j9b', title:'GIS Mapping â€” Kaduna Urban Expansion',       category:'GIS Mapping',        state:'Kaduna',      lga:'Kaduna South',     budget:155000, urgency:'medium', posted:'2026-02-17', desc:'GIS mapping and land use change analysis for Kaduna urban fringe. 150 sqkm. Multispectral satellite imagery classification. Shapefile and PDF map atlas output.',                                   client:'Kaduna State', status:'open' },
  // â”€â”€ ENUGU â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j10', title:'Topographic Survey â€” Industrial Park, Enugu',category:'Topographic Survey', state:'Enugu',       lga:'Enugu North',      budget:120000, urgency:'high',   posted:'2026-02-08', desc:'Detailed topographic survey for 8-hectare industrial park development in Enugu. Design datum, 0.5m contours, and drainage pattern mapping required.',                                               client:'Chukwudi N.',  status:'open' },
  // â”€â”€ OYO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j11', title:'GIS Analysis â€” Land Use Map, Ibadan',        category:'GIS Mapping',        state:'Oyo',         lga:'Ibadan North',     budget:75000,  urgency:'low',    posted:'2026-02-07', desc:'Update 2019 land use map with current satellite imagery for 200 sqkm area of Ibadan North LGA. Classification + change detection. Shapefile and PDF map deliverable.',                               client:'Yinka F.',     status:'open' },
  { id:'j11b',title:'C of O Processing â€” Family Land, Ibadan S.', category:'C of O Processing',  state:'Oyo',         lga:'Ibadan South',     budget:140000, urgency:'medium', posted:'2026-02-18', desc:'C of O processing for inherited family land in Ibadan South. Certified survey plan already available. Oyo state lands office submission and follow-up.',                                            client:'Bello K.',     status:'open' },
  // â”€â”€ IMO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j12', title:'Cadastral Survey â€” Church Land, Owerri',     category:'Cadastral Survey',   state:'Imo',         lga:'Owerri Municipal', budget:85000,  urgency:'medium', posted:'2026-02-06', desc:'Survey of 2-hectare RCCG church property in Owerri for land title application. SURCON stamp and certified plan required for Imo state lands office.',                                              client:'Rev. Eze',     status:'open' },
  // â”€â”€ PLATEAU â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j13', title:'C of O Processing â€” Residential, Jos',       category:'C of O Processing',  state:'Plateau',     lga:'Jos North',        budget:150000, urgency:'high',   posted:'2026-02-05', desc:'Certificate of Occupancy application for residential property in Jos. Owner has layout and survey plan. Plateau State lands office processing and follow-up until CofO issued.',                    client:'Grace B.',     status:'open' },
  // â”€â”€ BENUE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j14', title:'Boundary Survey â€” 20Ha Farm, Makurdi',       category:'Boundary Survey',    state:'Benue',       lga:'Makurdi',          budget:70000,  urgency:'low',    posted:'2026-02-04', desc:'Survey and beaconing of 20-hectare agricultural farmland near Makurdi. Tiv farm boundary demarcation. GPS coordinates, area computation, and survey plan.',                                        client:'Terkaa A.',    status:'open' },
  // â”€â”€ EDO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j15', title:'Engineering Survey â€” Bridge, Benin City',    category:'Engineering Survey', state:'Edo',         lga:'Egor',             budget:280000, urgency:'urgent', posted:'2026-02-03', desc:'Pre-construction survey for footbridge over Ikpoba River in Benin City. Cross sections, reduced levels, and pile positions. Urgent â€“ contract award imminent.',                                     client:'Ogie P.',      status:'open' },
  // â”€â”€ KWARA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j16', title:'Topographic Survey â€” University Campus, Ilorin',category:'Topographic Survey',state:'Kwara',     lga:'Ilorin West',      budget:160000, urgency:'medium', posted:'2026-02-02', desc:'University campus masterplan topographic survey in Ilorin. 40 hectares. Existing structures to be plotted. AutoCAD DWG output required. UNILORIN datum.',                                         client:'UNILORIN',     status:'open' },
  // â”€â”€ CROSS RIVER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j17', title:'GIS Mapping â€” Forest Reserve, Calabar',      category:'GIS Mapping',        state:'Cross River', lga:'Calabar',          budget:220000, urgency:'medium', posted:'2026-02-01', desc:'Forest reserve boundary mapping and vegetation analysis for Cross River National Park buffer zone near Calabar. Remote sensing + GPS field validation. Report for NESREA.',                          client:'CRS Ministry', status:'open' },
  // â”€â”€ AKWA IBOM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j18', title:'Cadastral Survey â€” Market Complex, Uyo',     category:'Cadastral Survey',   state:'Akwa Ibom',   lga:'Uyo',              budget:200000, urgency:'high',   posted:'2026-01-31', desc:'Cadastral survey of 3-hectare market complex in Uyo for government certification. Individual stall allocation plan required. Akwa Ibom State lands office.',                                        client:'Uyo Council',  status:'open' },
  // â”€â”€ EKITI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j19', title:'Boundary Survey â€” Family Compound, Ado',     category:'Boundary Survey',    state:'Ekiti',       lga:'Ado Ekiti',        budget:55000,  urgency:'low',    posted:'2026-01-30', desc:'Family compound boundary survey in Ado Ekiti. Approximately 0.5 hectares. Certified settlement survey plan for land regularization. Ekiti state datum.',                                          client:'Ola A.',       status:'open' },
  // â”€â”€ KOGI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j20', title:'Engineering Survey â€” Dam Site, Lokoja',      category:'Engineering Survey', state:'Kogi',        lga:'Lokoja',           budget:380000, urgency:'urgent', posted:'2026-01-29', desc:'Feasibility survey for small earth dam near Lokoja. Catchment area delineation, spillway route, reservoir extent, and earthworks estimate. Urgent â€“ funding deadline.',                             client:'KWSG Works',   status:'open' },
  // â”€â”€ ABIA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j21', title:'Cadastral Survey â€” Industrial Layout, Aba',  category:'Cadastral Survey',   state:'Abia',        lga:'Aba South',        budget:320000, urgency:'high',   posted:'2026-01-28', desc:'Cadastral survey for 15-plot industrial layout in Aba South. SURCON-certified plan for each allottee. Abia state lands office filing. Concrete beacons required.',                                  client:'Abia Dev.',    status:'open' },
  // â”€â”€ ADAMAWA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j22', title:'Topographic Survey â€” Irrigation Dam, Yola',  category:'Topographic Survey', state:'Adamawa',     lga:'Yola North',       budget:95000,  urgency:'medium', posted:'2026-01-27', desc:'Topographic survey for proposed irrigation dam catchment in Yola North. 15 hectares. Contour maps and cross sections at 10m intervals needed for design.',                                          client:'Adamawa Agric',status:'open' },
  // â”€â”€ BAUCHI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j23', title:'GIS Mapping â€” Mining Zone, Bauchi',          category:'GIS Mapping',        state:'Bauchi',      lga:'Bauchi',           budget:140000, urgency:'medium', posted:'2026-01-26', desc:'GIS mapping and land use analysis for proposed mining zone near Bauchi. Mineral rights boundary delineation. SHP + KML + PDF map atlas. Mines ministry submission.',                                client:'Bauchi Mines', status:'open' },
  // â”€â”€ BORNO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j24', title:'Boundary Survey â€” School Campus, Maiduguri', category:'Boundary Survey',    state:'Borno',       lga:'Maiduguri',        budget:75000,  urgency:'low',    posted:'2026-01-25', desc:'Boundary survey and beaconing for new school campus in Maiduguri. 4 hectares additional land. Survey plan for Borno State education ministry.',                                                    client:'Borno Edu.',   status:'open' },
  // â”€â”€ EBONYI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j25', title:'C of O Processing â€” Rice Farm, Abakaliki',   category:'C of O Processing',  state:'Ebonyi',      lga:'Abakaliki',        budget:120000, urgency:'medium', posted:'2026-01-24', desc:'Certificate of Occupancy for rice farm in Abakaliki. All documents available. Ebonyi state lands office processing and follow-up until CofO is issued.',                                           client:'Okeke F.',     status:'open' },
  // â”€â”€ GOMBE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j26', title:'Cadastral Survey â€” Residential Estate, Gombe',category:'Cadastral Survey',  state:'Gombe',       lga:'Gombe',            budget:180000, urgency:'medium', posted:'2026-01-23', desc:'Cadastral survey for new 12-plot residential estate in Gombe town. SURCON-certified plan for each allottee. Gombe State lands office submission.',                                                  client:'Gombe Dev.',   status:'open' },
  // â”€â”€ JIGAWA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j27', title:'Boundary Survey â€” 30Ha Farm, Dutse',         category:'Boundary Survey',    state:'Jigawa',      lga:'Dutse',            budget:65000,  urgency:'low',    posted:'2026-01-22', desc:'Agricultural farm boundary survey near Dutse. 30 hectares. GPS coordinates, area computation, and concrete beacon placement. Jigawa State survey plan.',                                          client:'Ibrahim M.',   status:'open' },
  // â”€â”€ KATSINA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j28', title:'Topographic Survey â€” Drainage Design, Katsina',category:'Topographic Survey',state:'Katsina',    lga:'Katsina',          budget:110000, urgency:'medium', posted:'2026-01-21', desc:'Urban topographic survey for drainage design in Katsina city. 10 hectares. Spot heights and contours at 0.25m interval. Katsina state datum. AutoCAD output.',                                    client:'Katsina LGA',  status:'open' },
  // â”€â”€ KEBBI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j29', title:'GIS Mapping â€” Irrigation Scheme, Birnin Kebbi',category:'GIS Mapping',      state:'Kebbi',       lga:'Birnin Kebbi',     budget:90000,  urgency:'medium', posted:'2026-01-20', desc:'GIS mapping for irrigation scheme in Birnin Kebbi. 500 hectares. Land classification, soil type mapping, canal route planning. SHP deliverable for RBDA.',                                       client:'Kebbi Water',  status:'open' },
  // â”€â”€ NASARAWA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j30', title:'Engineering Survey â€” 5km Rural Road, Lafia',  category:'Engineering Survey', state:'Nasarawa',    lga:'Lafia',            budget:250000, urgency:'high',   posted:'2026-01-19', desc:'Engineering survey for 5km rural road in Lafia LGA. Profile, cross sections at 20m, volume computation, and AutoCAD drawings. Nasarawa State works ministry.',                                  client:'Nasarawa Wks', status:'open' },
  // â”€â”€ NIGER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j31', title:'Cadastral Survey â€” 25-Plot Housing, Minna',   category:'Cadastral Survey',   state:'Niger',       lga:'Minna',            budget:420000, urgency:'high',   posted:'2026-01-18', desc:'Cadastral survey for 25-plot government housing scheme in Minna. Certified plans, pillar placement, coordinate schedule, and Niger state lands registry filing.',                                   client:'Niger Hsg.',   status:'open' },
  // â”€â”€ ONDO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j32', title:'Boundary Survey â€” Cocoa Farm, Akure',         category:'Boundary Survey',    state:'Ondo',        lga:'Akure',            budget:80000,  urgency:'low',    posted:'2026-01-17', desc:'Boundary survey and demarcation for 15-hectare cocoa farm near Akure. GPS coordinates, area computation, and SURCON-certified plan. Ondo State agricultural grant.',                               client:'Adewumi F.',   status:'open' },
  // â”€â”€ OSUN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j33', title:'Topographic Survey â€” Hotel Site, Osogbo',     category:'Topographic Survey', state:'Osun',        lga:'Osogbo',           budget:130000, urgency:'medium', posted:'2026-01-16', desc:'Topographic survey for proposed boutique hotel site in Osogbo. 3 hectares. Contour interval 0.5m. Existing trees, structures, and access roads plotted. AutoCAD output.',                           client:'Sola Hotels',  status:'open' },
  // â”€â”€ SOKOTO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j34', title:'GIS Mapping â€” Grazing Reserve, Sokoto',       category:'GIS Mapping',        state:'Sokoto',      lga:'Sokoto North',     budget:110000, urgency:'medium', posted:'2026-01-15', desc:'GIS boundary mapping for gazetted grazing reserve near Sokoto. Remote sensing analysis and boundary pillar placement required. Report for Sokoto state ministry.',                                  client:'Sokoto Min.',  status:'open' },
  // â”€â”€ TARABA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j35', title:'Cadastral Survey â€” Church Land, Jalingo',     category:'Cadastral Survey',   state:'Taraba',      lga:'Jalingo',          budget:95000,  urgency:'medium', posted:'2026-01-14', desc:'Cadastral survey for 2-hectare ECWA church property in Jalingo. SURCON-certified survey plan and stamp for Taraba state land title application.',                                                  client:'ECWA Church',  status:'open' },
  // â”€â”€ YOBE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j36', title:'Boundary Survey â€” School Expansion, Damaturu',category:'Boundary Survey',    state:'Yobe',        lga:'Damaturu',         budget:70000,  urgency:'low',    posted:'2026-01-13', desc:'Boundary survey for school campus expansion in Damaturu. 3 hectares of additional land. Concrete beacons and certified survey plan for Yobe education ministry.',                                  client:'Yobe Edu.',    status:'open' },
  // â”€â”€ ZAMFARA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j37', title:'Engineering Survey â€” Water Dam, Gusau',       category:'Engineering Survey', state:'Zamfara',     lga:'Gusau',            budget:290000, urgency:'urgent', posted:'2026-01-12', desc:'Pre-construction survey for rural water dam near Gusau. Catchment area mapping, spillway design levels, and reservoir extent computation. Zamfara State water resources.',                        client:'Zamfara Water',status:'open' },
  // â”€â”€ ADDITIONAL HIGH-VALUE JOBS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:'j38', title:'Hydrographic Survey â€” Bonny Waterway',        category:'Hydrographic Survey',state:'Rivers',      lga:'Bonny',            budget:520000, urgency:'urgent', posted:'2026-02-20', desc:'Full bathymetric survey of Bonny shipping channel for NIMASA annual recertification. Multi-beam echo sounder. Tidal corrections included. Boat provided by NLNG.',                                client:'NLNG',         status:'open' },
  { id:'j39', title:'Drone Survey â€” Agricultural Estate, Ondo',    category:'Aerial/Drone Survey',state:'Ondo',        lga:'Akure North',      budget:210000, urgency:'medium', posted:'2026-02-19', desc:'Drone aerial survey of 80-hectare agricultural estate in Akure North. Orthophoto mosaic, NDVI crop health index, soil sampling GPS grid. Pix4D output.',                                           client:'Ondo Agric.',  status:'open' },
  { id:'j40', title:'GIS Mapping â€” Coastal Erosion Study, Lagos',  category:'GIS Mapping',        state:'Lagos',       lga:'Badagry',          budget:290000, urgency:'high',   posted:'2026-02-20', desc:'GIS analysis and change detection for coastal erosion along Badagry shoreline. Multitemporal satellite data 2010â€“2026. Rate of shoreline retreat, risk zones. Report for LASEMA.',                  client:'LASEMA',       status:'open' },
  { id:'j41', title:'Engineering Survey â€” Seaport, Apapa',         category:'Engineering Survey', state:'Lagos',       lga:'Apapa',            budget:680000, urgency:'urgent', posted:'2026-02-19', desc:'Detailed engineering survey for proposed container terminal expansion at Apapa port. Hydrographic + topographic integration. AutoCAD Civil 3D, HEC-RAS, 3D model deliverable.',                      client:'NPA',          status:'open' },
  { id:'j42', title:'Cadastral Survey â€” Gated Estate, Abuja',      category:'Cadastral Survey',   state:'FCT - Abuja', lga:'Bwari',            budget:510000, urgency:'high',   posted:'2026-02-18', desc:'Cadastral survey for 30-plot luxury gated estate in Bwari. AGIS-certified plan, pillar placement with GPS coordinates, street layouts, and open space demarcation.',                                client:'Abuja Luxury', status:'open' }
];

function initJobBoard() {
  let jobs = JSON.parse(localStorage.getItem('spe_jobs') || 'null');
  if (!jobs) {
    jobs = SAMPLE_JOBS;
    localStorage.setItem('spe_jobs', JSON.stringify(jobs));
  }
  renderJobBoard(jobs);
  // Add real job board links banner at top
  const cont = document.getElementById('jobBoardContent');
  if(cont) {
    const banner = document.createElement('div');
    banner.style.cssText = 'background:linear-gradient(135deg,#0f172a,#1e3a5f);color:#fff;border-radius:12px;padding:16px;margin-bottom:16px;';
    banner.innerHTML = `
      <div style="font-weight:700;font-size:0.95rem;margin-bottom:8px;">ğŸŒ Find Real Surveying Jobs Near You</div>
      <p style="font-size:0.78rem;opacity:0.8;margin-bottom:12px;">Browse verified land surveyor jobs from top Nigerian employers. Your location is used to show nearby opportunities.</p>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
        <button onclick="findJobsByLocation()" style="background:#4ade80;color:#0f172a;border:none;border-radius:8px;padding:10px;font-weight:700;font-size:0.8rem;cursor:pointer;font-family:inherit;">ğŸ“ Jobs Near Me (GPS)</button>
        <button onclick="window.open(CFG.jobsBoard,'_blank')" style="background:#60a5fa;color:#fff;border:none;border-radius:8px;padding:10px;font-weight:700;font-size:0.8rem;cursor:pointer;font-family:inherit;">ğŸ’¼ Jobberman</button>
        <button onclick="window.open(CFG.jobsBoard2,'_blank')" style="background:#f59e0b;color:#fff;border:none;border-radius:8px;padding:10px;font-weight:700;font-size:0.8rem;cursor:pointer;font-family:inherit;">ğŸ” Indeed Nigeria</button>
        <button onclick="window.open('https://www.linkedin.com/jobs/search/?keywords=land+surveyor&location=Nigeria','_blank')" style="background:#0077b5;color:#fff;border:none;border-radius:8px;padding:10px;font-weight:700;font-size:0.8rem;cursor:pointer;font-family:inherit;">ğŸ’¼ LinkedIn Jobs</button>
      </div>
    `;
    cont.insertBefore(banner, cont.firstChild);
  }
}

function findJobsByLocation() {
  if(!navigator.geolocation){toast('GPS not supported on this browser','error');return;}
  toast('Getting your location...','info');
  navigator.geolocation.getCurrentPosition(pos=>{
    const lat=pos.coords.latitude,lon=pos.coords.longitude;
    // Find nearest state
    let nearestState='Nigeria',minDist=99999;
    for(const [state,coords] of Object.entries(NIG_STATE_COORDS)){
      const d=Math.sqrt(Math.pow(lat-coords[0],2)+Math.pow(lon-coords[1],2));
      if(d<minDist){minDist=d;nearestState=state;}
    }
    toast(`Found: ${nearestState} â€” opening jobs near you!`,'success');
    // Open real job board filtered by state
    const url = `https://www.jobberman.com/jobs/land-surveyor?location=${encodeURIComponent(nearestState)}`;
    window.open(url,'_blank');
    // Also filter local board
    const stateFilter = document.getElementById('jobStateFilter');
    if(stateFilter){stateFilter.value=nearestState;filterJobBoard();}
  },err=>{
    toast('Could not get location â€” opening all Nigeria jobs','warning');
    window.open(CFG.jobsBoard,'_blank');
  },{timeout:8000});
}

function renderJobBoard(jobs) {
  const cont = document.getElementById('jobBoardContent');
  if (!cont) return;
  if (!jobs.length) {
    cont.innerHTML = '<div style="text-align:center;padding:40px;color:var(--text3);">No jobs posted yet. Be the first!</div>';
    return;
  }
  const urgencyMap = { low: 'urgency-low', medium: 'urgency-med', high: 'urgency-high', urgent: 'urgency-urg' };
  cont.innerHTML = jobs.filter(j => j.status === 'open').map(j => `
    <div class="job-card">
      <div style="display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:8px;margin-bottom:10px;">
        <div>
          <h3 style="font-weight:800;font-size:0.95rem;color:var(--accent2);">${j.title}</h3>
          <p style="font-size:0.78rem;color:var(--text2);">${j.state} Â· ${j.lga} Â· ${j.category}</p>
        </div>
        <div style="text-align:right;">
          <div style="font-family:var(--ff-display,'Syne','Arial Black',sans-serif);font-size:1.2rem;font-weight:800;color:var(--accent);">â‚¦${j.budget.toLocaleString()}</div>
          <span class="job-urgency ${urgencyMap[j.urgency]||'urgency-med'}">${j.urgency.toUpperCase()}</span>
        </div>
      </div>
      <p style="font-size:0.82rem;color:var(--text2);margin-bottom:12px;">${j.desc}</p>
      <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px;">
        <span style="font-size:0.75rem;color:var(--text3);">Posted by: ${j.client} Â· ${j.posted}</span>
        <button class="btn btn-green btn-sm" onclick="applyForJob('${j.id}','${j.title}',${j.budget})">âœ… Apply for this Job</button>
      </div>
    </div>
  `).join('');
}

function applyForJob(id, title, budget) {
  if (!AUTH.isLoggedIn()) {
    openAuthModal('login');
    toast('Sign in to apply for jobs', 'warning');
    return;
  }
  const commission = Math.round(budget * 0.1); // 10% platform fee
  openModal(`<div>
    <h3 style="font-weight:800;margin-bottom:14px;">ğŸ“‹ Apply: ${title}</h3>
    <div style="background:#f0fdf4;border:2px solid #86efac;border-radius:10px;padding:14px;margin-bottom:16px;font-size:0.85rem;">
      <div><strong>Job Budget:</strong> â‚¦${budget.toLocaleString()}</div>
      <div><strong>Platform Fee (10%):</strong> â‚¦${commission.toLocaleString()} (deducted on completion)</div>
      <div style="margin-top:6px;font-size:0.78rem;color:var(--text2);">You receive â‚¦${(budget - commission).toLocaleString()} on successful completion</div>
    </div>
    <div class="form-group"><label>Your Proposed Rate (â‚¦)</label><input type="number" id="applyRate" value="${budget}" placeholder="${budget}"></div>
    <div class="form-group"><label>Cover Note</label><textarea id="applyNote" rows="3" placeholder="Describe your experience and why you're right for this job..."></textarea></div>
    <div class="form-group"><label>Estimated Completion Days</label><input type="number" id="applyDays" value="7" min="1" max="90"></div>
    <div class="btn-grid">
      <button class="btn btn-green" onclick="submitJobApplication('${id}','${title}',${budget})">ğŸ“¨ Submit Application</button>
      <button class="btn btn-gray" onclick="closeModal()">Cancel</button>
    </div>
  </div>`);
}

function submitJobApplication(jobId, title, budget) {
  const rate = document.getElementById('applyRate')?.value;
  const note = document.getElementById('applyNote')?.value;
  const days = document.getElementById('applyDays')?.value;
  if (!rate || !note) { toast('Fill all fields', 'warning'); return; }
  const user = AUTH.user;
  closeModal();
  toast('Application submitted! Connecting you to job board...', 'success');
  showBanner(`âœ… Applied for "${title}" â€” Budget: â‚¦${budget.toLocaleString()} Â· Opening job board to connect with real clients.`);
  // Redirect to real Nigerian job board for surveyors â€” NOT WhatsApp
  setTimeout(() => window.open(CFG.jobsBoard, '_blank'), 1000);
}

function postJob() {
  if (!AUTH.isLoggedIn()) {
    openAuthModal('register');
    toast('Create account to post jobs', 'warning');
    return;
  }
  openModal(`<div>
    <h3 style="font-weight:800;margin-bottom:14px;">ğŸ“ Post a New Job</h3>
    <div class="form-group"><label>Job Title</label><input id="jTitle" placeholder="e.g. Boundary Survey â€” 3 Plots, Lagos"></div>
    <div class="form-group"><label>Category</label>
      <select id="jCat">${JOB_CATEGORIES.map(c => `<option>${c}</option>`).join('')}</select>
    </div>
    <div class="form-row">
      <div class="form-group"><label>State</label>
        <select id="jState">
          ${['Lagos','FCT - Abuja','Rivers','Kano','Ogun','Anambra','Delta','Enugu','Kaduna','Oyo','Edo','Imo','Plateau','Benue','Kwara','Niger','Kogi','Cross River','Akwa Ibom','Bayelsa','Ondo','Osun','Ekiti','Abia','Ebonyi','Imo','Nasarawa','Gombe','Taraba','Adamawa','Borno','Yobe','Bauchi','Gombe','Jigawa','Katsina','Kebbi','Sokoto','Zamfara','Zamfara','Zamfara'].map(s=>`<option>${s}</option>`).join('')}
        </select>
      </div>
      <div class="form-group"><label>LGA</label><input id="jLGA" placeholder="Local Government Area"></div>
    </div>
    <div class="form-row">
      <div class="form-group"><label>Budget (â‚¦)</label><input type="number" id="jBudget" placeholder="50000"></div>
      <div class="form-group"><label>Urgency</label>
        <select id="jUrgency"><option value="low">Low</option><option value="medium" selected>Medium</option><option value="high">High</option><option value="urgent">Urgent</option></select>
      </div>
    </div>
    <div class="form-group"><label>Description</label><textarea id="jDesc" rows="3" placeholder="Describe the survey requirements, land size, access, what documents are available..."></textarea></div>
    <div class="btn-grid">
      <button class="btn btn-green" onclick="submitPostJob()">âœ… Post Job</button>
      <button class="btn btn-gray" onclick="closeModal()">Cancel</button>
    </div>
  </div>`);
}

function submitPostJob() {
  const title = document.getElementById('jTitle')?.value.trim();
  const budget = document.getElementById('jBudget')?.value;
  const desc = document.getElementById('jDesc')?.value.trim();
  if (!title || !budget || !desc) { toast('Fill all required fields', 'warning'); return; }
  
  const newJob = {
    id: 'j' + Date.now(),
    title, budget: parseInt(budget), desc,
    category: document.getElementById('jCat')?.value,
    state: document.getElementById('jState')?.value,
    lga: document.getElementById('jLGA')?.value,
    urgency: document.getElementById('jUrgency')?.value,
    client: `${AUTH.user?.firstName} ${AUTH.user?.lastName}`,
    posted: new Date().toISOString().split('T')[0],
    status: 'open'
  };
  
  const jobs = JSON.parse(localStorage.getItem('spe_jobs') || '[]');
  jobs.unshift(newJob);
  localStorage.setItem('spe_jobs', JSON.stringify(jobs));
  
  closeModal();
  toast('Job posted! Surveyors will see it immediately.', 'success');
  renderJobBoard(jobs);
  showBanner(`âœ… Job posted: "${title}" â€” â‚¦${parseInt(budget).toLocaleString()} budget`);
}

// â”€â”€ SURVEYOR DIRECTORY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const SAMPLE_SURVEYORS = [
  { id:'s1',  name:'Emeka Okafor',        state:'Lagos',       lga:'Ikeja',        rating:4.9, reviews:47, license:'SURCON/2019/0512', specs:['Cadastral Survey','Boundary Survey','GIS Mapping'],              plan:'professional', jobs:89, phone:'08023456789', experience:'7 yrs', available:true  },
  { id:'s2',  name:'Fatima Al-Hassan',    state:'FCT - Abuja', lga:'Maitama',      rating:4.8, reviews:32, license:'SURCON/2021/1234', specs:['Topographic Survey','Engineering Survey'],                       plan:'professional', jobs:54, phone:'08034567890', experience:'5 yrs', available:true  },
  { id:'s3',  name:'Chukwuemeka Eze',     state:'Anambra',     lga:'Awka',         rating:4.7, reviews:28, license:'SURCON/2020/0891', specs:['Cadastral Survey','Photogrammetric Survey'],                     plan:'basic',        jobs:41, phone:'08045678901', experience:'6 yrs', available:true  },
  { id:'s4',  name:'Aisha Mahmoud',       state:'Kano',        lga:'Nassarawa',    rating:4.6, reviews:19, license:'SURCON/2022/2341', specs:['GIS Mapping','Environmental Survey'],                            plan:'professional', jobs:33, phone:'08056789012', experience:'4 yrs', available:true  },
  { id:'s5',  name:'Biodun Adewale',      state:'Oyo',         lga:'Ibadan North', rating:4.5, reviews:15, license:'SURCON/2023/0123', specs:['Engineering Survey','Hydrographic Survey'],                      plan:'basic',        jobs:22, phone:'08067890123', experience:'3 yrs', available:true  },
  { id:'s6',  name:'Ovie Ejiro',          state:'Delta',       lga:'Warri South',  rating:4.8, reviews:36, license:'SURCON/2018/0345', specs:['Boundary Survey','Engineering Survey','Cadastral Survey'],        plan:'professional', jobs:71, phone:'08078901234', experience:'8 yrs', available:true  },
  { id:'s7',  name:'Ngozi Ihejirika',     state:'Rivers',      lga:'Port Harcourt',rating:4.9, reviews:52, license:'SURCON/2017/0678', specs:['Hydrographic Survey','GIS Mapping','Topographic Survey'],        plan:'professional', jobs:103,phone:'08089012345', experience:'9 yrs', available:false },
  { id:'s8',  name:'Haruna Bello',        state:'Kaduna',      lga:'Kaduna North', rating:4.6, reviews:21, license:'SURCON/2021/0912', specs:['Cadastral Survey','Boundary Survey'],                            plan:'basic',        jobs:38, phone:'08012345678', experience:'5 yrs', available:true  },
  { id:'s9',  name:'Grace Nwachukwu',     state:'Enugu',       lga:'Enugu East',   rating:4.7, reviews:24, license:'SURCON/2020/1456', specs:['Topographic Survey','Engineering Survey','GIS Mapping'],         plan:'professional', jobs:46, phone:'08023451234', experience:'6 yrs', available:true  },
  { id:'s10', name:'Tunde Fashola',       state:'Ogun',        lga:'Sagamu',       rating:4.8, reviews:44, license:'SURCON/2016/0234', specs:['Cadastral Survey','Boundary Survey','C of O Processing'],        plan:'professional', jobs:91, phone:'08034562345', experience:'10 yrs',available:true  },
  { id:'s11', name:'Amina Yakubu',        state:'Bauchi',      lga:'Bauchi',       rating:4.4, reviews:12, license:'SURCON/2023/0567', specs:['GIS Mapping','Environmental Survey'],                            plan:'basic',        jobs:18, phone:'08045673456', experience:'3 yrs', available:true  },
  { id:'s12', name:'Seun Adeleke',        state:'Ekiti',       lga:'Ado Ekiti',    rating:4.6, reviews:17, license:'SURCON/2022/0789', specs:['Boundary Survey','Cadastral Survey'],                            plan:'basic',        jobs:27, phone:'08056784567', experience:'4 yrs', available:true  },
  { id:'s13', name:'Kelechi Okonkwo',     state:'Imo',         lga:'Owerri West',  rating:4.7, reviews:29, license:'SURCON/2019/1123', specs:['Cadastral Survey','C of O Processing','GIS Mapping'],            plan:'professional', jobs:58, phone:'08067895678', experience:'7 yrs', available:true  },
  { id:'s14', name:'Aliyu Usman',         state:'Sokoto',      lga:'Sokoto North', rating:4.3, reviews:9,  license:'SURCON/2024/0012', specs:['Boundary Survey','Cadastral Survey'],                            plan:'basic',        jobs:11, phone:'08078906789', experience:'2 yrs', available:true  },
  { id:'s15', name:'Blessing Okoro',      state:'Bayelsa',     lga:'Yenagoa',      rating:4.8, reviews:31, license:'SURCON/2019/0678', specs:['Hydrographic Survey','GIS Mapping','Engineering Survey'],        plan:'professional', jobs:63, phone:'08089017890', experience:'7 yrs', available:true  },
  { id:'s16', name:'Olumide Adesanya',    state:'Osun',        lga:'Osogbo',       rating:4.5, reviews:18, license:'SURCON/2021/0345', specs:['Topographic Survey','Engineering Survey'],                       plan:'basic',        jobs:30, phone:'08012348901', experience:'5 yrs', available:true  },
  { id:'s17', name:'Zainab Garba',        state:'Niger',       lga:'Minna',        rating:4.6, reviews:22, license:'SURCON/2020/0456', specs:['GIS Mapping','Cadastral Survey','Environmental Survey'],         plan:'professional', jobs:44, phone:'08023459012', experience:'6 yrs', available:true  },
  { id:'s18', name:'Emmanuel Igwe',       state:'Cross River', lga:'Calabar',      rating:4.7, reviews:26, license:'SURCON/2019/0567', specs:['Topographic Survey','Aerial/Drone Survey','GIS Mapping'],        plan:'professional', jobs:52, phone:'08034560123', experience:'7 yrs', available:true  },
  { id:'s19', name:'Salisu Abdullahi',    state:'Jigawa',      lga:'Dutse',        rating:4.3, reviews:8,  license:'SURCON/2024/0156', specs:['Boundary Survey','Cadastral Survey'],                            plan:'basic',        jobs:9,  phone:'08045671234', experience:'2 yrs', available:true  },
  { id:'s20', name:'Chinyere Obasi',      state:'Akwa Ibom',   lga:'Uyo',          rating:4.8, reviews:38, license:'SURCON/2018/0789', specs:['Cadastral Survey','C of O Processing','Boundary Survey'],        plan:'professional', jobs:76, phone:'08056782345', experience:'8 yrs', available:true  },
  { id:'s21', name:'Ibrahim Musa',        state:'Borno',       lga:'Maiduguri',    rating:4.5, reviews:14, license:'SURCON/2022/0890', specs:['GIS Mapping','Topographic Survey'],                              plan:'basic',        jobs:21, phone:'08067893456', experience:'4 yrs', available:true  },
  { id:'s22', name:'Funmilayo Olawale',   state:'Kwara',       lga:'Ilorin West',  rating:4.7, reviews:25, license:'SURCON/2020/0901', specs:['Engineering Survey','Topographic Survey','GIS Mapping'],         plan:'professional', jobs:49, phone:'08078904567', experience:'6 yrs', available:true  },
  { id:'s23', name:'Patrick Akpan',       state:'Plateau',     lga:'Jos North',    rating:4.6, reviews:20, license:'SURCON/2021/0123', specs:['Cadastral Survey','Engineering Survey'],                         plan:'professional', jobs:36, phone:'08089015678', experience:'5 yrs', available:true  },
  { id:'s24', name:'Hadiza Suleiman',     state:'Kebbi',       lga:'Birnin Kebbi', rating:4.4, reviews:11, license:'SURCON/2023/0234', specs:['Boundary Survey','GIS Mapping'],                                  plan:'basic',        jobs:15, phone:'08012346789', experience:'3 yrs', available:true  },
  { id:'s25', name:'Godspower Etokebi',   state:'Edo',         lga:'Egor',         rating:4.8, reviews:41, license:'SURCON/2017/0345', specs:['Cadastral Survey','Boundary Survey','C of O Processing'],        plan:'professional', jobs:82, phone:'08023457890', experience:'9 yrs', available:true  },
  { id:'s26', name:'Maryam Umar',         state:'Katsina',     lga:'Katsina',      rating:4.4, reviews:10, license:'SURCON/2023/0456', specs:['GIS Mapping','Environmental Survey'],                            plan:'basic',        jobs:13, phone:'08034568901', experience:'3 yrs', available:true  },
  { id:'s27', name:'Uchenna Nwosu',       state:'Ebonyi',      lga:'Abakaliki',    rating:4.6, reviews:16, license:'SURCON/2022/0567', specs:['Cadastral Survey','Topographic Survey'],                         plan:'basic',        jobs:24, phone:'08045679012', experience:'4 yrs', available:true  },
  { id:'s28', name:'Yakubu Danjuma',      state:'Taraba',      lga:'Jalingo',      rating:4.5, reviews:13, license:'SURCON/2022/0678', specs:['Boundary Survey','GIS Mapping'],                                  plan:'basic',        jobs:19, phone:'08056780123', experience:'4 yrs', available:true  },
  { id:'s29', name:'Bamidele Okonkwo',    state:'Ondo',        lga:'Akure',        rating:4.7, reviews:27, license:'SURCON/2019/0789', specs:['Topographic Survey','Engineering Survey','Cadastral Survey'],     plan:'professional', jobs:55, phone:'08067891234', experience:'7 yrs', available:true  },
  { id:'s30', name:'Aliyu Sambo',         state:'Zamfara',     lga:'Gusau',        rating:4.3, reviews:7,  license:'SURCON/2024/0234', specs:['Boundary Survey','Cadastral Survey'],                            plan:'basic',        jobs:8,  phone:'08078902345', experience:'2 yrs', available:true  },
  { id:'s31', name:'Sylvanus Opusunju',   state:'Rivers',      lga:'Obio-Akpor',   rating:4.9, reviews:58, license:'SURCON/2015/0001', specs:['Cadastral Survey','Engineering Survey','Hydrographic Survey'],   plan:'professional', jobs:127,phone:'08117554948', experience:'11 yrs',available:true  },
  { id:'s32', name:'Chinonso Achu',       state:'Abia',        lga:'Aba South',    rating:4.6, reviews:23, license:'SURCON/2020/0012', specs:['Boundary Survey','Cadastral Survey','GIS Mapping'],              plan:'professional', jobs:43, phone:'08089023456', experience:'6 yrs', available:true  },
  { id:'s33', name:'Ismail Adamu',        state:'Yobe',        lga:'Damaturu',     rating:4.4, reviews:9,  license:'SURCON/2023/0345', specs:['GIS Mapping','Topographic Survey'],                              plan:'basic',        jobs:12, phone:'08012347890', experience:'3 yrs', available:true  },
  { id:'s34', name:'Tina Ezenwachi',      state:'Nasarawa',    lga:'Lafia',        rating:4.6, reviews:18, license:'SURCON/2021/0456', specs:['Engineering Survey','Topographic Survey'],                       plan:'professional', jobs:32, phone:'08023458901', experience:'5 yrs', available:true  },
  { id:'s35', name:'Usman Bala',          state:'Gombe',       lga:'Gombe',        rating:4.4, reviews:10, license:'SURCON/2023/0567', specs:['Boundary Survey','Cadastral Survey'],                            plan:'basic',        jobs:14, phone:'08034569012', experience:'3 yrs', available:true  },
  { id:'s36', name:'Adaeze Nwosu',        state:'Adamawa',     lga:'Yola North',   rating:4.5, reviews:14, license:'SURCON/2022/0678', specs:['GIS Mapping','Environmental Survey','Topographic Survey'],       plan:'professional', jobs:26, phone:'08045670123', experience:'4 yrs', available:true  },
  { id:'s37', name:'Labi Ogundimu',       state:'Benue',       lga:'Makurdi',      rating:4.6, reviews:20, license:'SURCON/2020/0789', specs:['Engineering Survey','Cadastral Survey'],                         plan:'professional', jobs:39, phone:'08056781234', experience:'6 yrs', available:true  },
  { id:'s38', name:'Hajiya Binta Umar',   state:'Kogi',        lga:'Lokoja',       rating:4.5, reviews:15, license:'SURCON/2022/0890', specs:['GIS Mapping','Boundary Survey','Cadastral Survey'],              plan:'basic',        jobs:22, phone:'08067892345', experience:'4 yrs', available:true  }
];

function initDirectory() {
  let surveyors = JSON.parse(localStorage.getItem('spe_directory') || 'null');
  if (!surveyors) {
    surveyors = SAMPLE_SURVEYORS;
    localStorage.setItem('spe_directory', JSON.stringify(surveyors));
  }
  renderDirectory(surveyors);
}

function renderDirectory(surveyors) {
  const cont = document.getElementById('directoryContent');
  if (!cont) return;
  if (!surveyors.length) {
    cont.innerHTML = '<div style="text-align:center;padding:40px;color:var(--text3);"><div style="font-size:3rem;margin-bottom:10px;">ğŸ”</div><div>No surveyors found in this filter. <a href="#" onclick="clearDirLocation();return false;" style="color:var(--accent);">Clear filters</a></div></div>';
    return;
  }
  cont.innerHTML = surveyors.map(s => {
    const initials = s.name.split(' ').map(n=>n[0]).join('').substring(0,2);
    const avail = s.available !== false;
    const lga = s.lga ? ' Â· ' + s.lga : '';
    const exp = s.experience || 'â€”';
    return `
    <div class="directory-card" style="position:relative;">
      <div style="position:absolute;top:12px;right:12px;">
        <span style="font-size:0.68rem;font-weight:700;padding:3px 10px;border-radius:20px;background:${avail?'#dcfce7':'#fee2e2'};color:${avail?'#16a34a':'#dc2626'};">${avail?'ğŸŸ¢ Available':'ğŸ”´ Busy'}</span>
      </div>
      <div style="display:flex;align-items:flex-start;gap:14px;margin-bottom:12px;">
        <div style="width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#0f172a,#16a34a);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-size:1rem;flex-shrink:0;">${initials}</div>
        <div style="flex:1;padding-right:60px;">
          <div style="font-weight:800;font-size:0.95rem;">${s.name}</div>
          <div style="font-size:0.75rem;color:var(--text2);">${s.state}${lga} Â· ${s.jobs} jobs Â· ${exp}</div>
          <div class="surveyor-rating">â­ ${s.rating} <span style="color:var(--text3);">(${s.reviews} reviews)</span></div>
        </div>
      </div>
      <div style="margin-bottom:10px;">${s.specs.map(sp=>`<span class="specialization-tag">${sp}</span>`).join('')}</div>
      <div style="font-size:0.72rem;color:var(--text3);margin-bottom:12px;display:flex;align-items:center;gap:6px;">
        <span class="verification-badge" style="font-size:0.68rem;">âœ… SURCON</span>
        <span class="mono">${s.license}</span>
      </div>
      <div class="btn-grid">
        <button class="btn btn-green btn-sm" onclick="contactSurveyor('${s.name}','${s.phone}')">ğŸ“± Contact</button>
        <button class="btn btn-blue btn-sm" onclick="hireSurveyor('${s.name}','${s.phone}')">ğŸ’¼ Hire</button>
      </div>
    </div>
  `;
  }).join('');
}

// â”€â”€ DIRECTORY NEAR ME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function detectLocationForDirectory() {
  if (!navigator.geolocation) { toast('GPS not supported', 'error'); return; }
  const banner = document.getElementById('dirLocationBanner');
  const txt = document.getElementById('dirLocationText');
  if (banner) banner.style.display = 'flex';
  if (txt) txt.textContent = 'ğŸ“¡ Detecting your location...';
  toast('Detecting your location...', 'info');
  navigator.geolocation.getCurrentPosition(
    pos => {
      const state = getStateFromCoords(pos.coords.latitude, pos.coords.longitude);
      if (state) {
        const sel = document.getElementById('dirStateFilter');
        if (sel) sel.value = state;
        if (txt) txt.textContent = 'ğŸ“ Showing surveyors in ' + state + ' â€” ' + NIG_STATE_COORDS[state].city;
        filterDirectory();
        toast('âœ… Showing surveyors in ' + state, 'success');
      }
    },
    err => {
      if (txt) txt.textContent = 'âš ï¸ Could not detect location. Select state manually.';
      toast('Location denied â€” select your state manually', 'warning');
    },
    { timeout: 10000, enableHighAccuracy: false }
  );
}

function clearDirLocation() {
  const sel = document.getElementById('dirStateFilter');
  if (sel) sel.value = '';
  const banner = document.getElementById('dirLocationBanner');
  if (banner) banner.style.display = 'none';
  filterDirectory();
  toast('Location filter cleared', 'info');
}

function filterDirectory() {
  const state = document.getElementById('dirStateFilter')?.value;
  const spec = document.getElementById('dirSpecFilter')?.value;
  const minRating = parseFloat(document.getElementById('dirRatingFilter')?.value) || 0;
  let surveyors = JSON.parse(localStorage.getItem('spe_directory') || JSON.stringify(SAMPLE_SURVEYORS));
  if (state) surveyors = surveyors.filter(s => s.state === state);
  if (spec) surveyors = surveyors.filter(s => s.specs.includes(spec));
  if (minRating) surveyors = surveyors.filter(s => s.rating >= minRating);
  // Sort by rating desc
  surveyors.sort((a,b) => b.rating - a.rating);
  renderDirectory(surveyors);
}

function contactSurveyor(name, phone) {
  const cleanPhone = phone.replace(/^0/,'').replace(/[^0-9]/g,'');
  const msg = `Hello ${name}! I found your profile on SurveyPro Elite. I need professional surveying services. Please get in touch with me.`;
  window.open(`https://wa.me/234${cleanPhone}?text=${encodeURIComponent(msg)}`, '_blank');
}

function registerAsSurveyor() {
  openModal(`<div>
    <h3 style="font-weight:800;margin-bottom:14px;">ğŸ“‹ Register as Licensed Surveyor</h3>
    <p style="font-size:0.82rem;color:var(--text2);margin-bottom:16px;">Join Nigeria's largest surveyor directory. Get discovered by land owners across all 36 states + FCT.</p>
    <div class="form-group"><label>Full Name</label><input id="regName" placeholder="Your full legal name"></div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
      <div class="form-group"><label>State</label>
        <select id="regState">
          <option value="">Select state...</option>
          ${Object.keys(NIG_STATE_COORDS).map(s=>`<option>${s}</option>`).join('')}
        </select>
      </div>
      <div class="form-group"><label>LGA</label><input id="regLGA" placeholder="Local Govt Area"></div>
    </div>
    <div class="form-group"><label>SURCON License Number</label><input id="regLicense" placeholder="SURCON/YYYY/XXXX"></div>
    <div class="form-group"><label>Phone (WhatsApp)</label><input id="regPhone" type="tel" placeholder="08XXXXXXXXX"></div>
    <div class="form-group"><label>Years of Experience</label><input id="regExp" type="number" placeholder="e.g. 5" min="1"></div>
    <div class="form-group"><label>Specializations</label>
      <div style="display:flex;flex-wrap:wrap;gap:6px;margin-top:6px;" id="specCheckboxes">
        ${['Cadastral Survey','Topographic Survey','Boundary Survey','Engineering Survey','Hydrographic Survey','GIS Mapping','Aerial/Drone Survey','C of O Processing','Environmental Survey','Photogrammetric Survey'].map(s=>`
          <label style="display:flex;align-items:center;gap:5px;font-size:0.8rem;background:var(--surface2);padding:5px 10px;border-radius:6px;cursor:pointer;border:1px solid var(--border);">
            <input type="checkbox" value="${s}" style="width:auto;"> ${s}
          </label>`).join('')}
      </div>
    </div>
    <div class="btn-grid" style="margin-top:16px;">
      <button class="btn btn-green" onclick="submitSurveyorRegistration()">âœ… Submit Registration</button>
      <button class="btn btn-gray" onclick="closeModal()">Cancel</button>
    </div>
  </div>`);
}

function submitSurveyorRegistration() {
  const name = document.getElementById('regName')?.value.trim();
  const state = document.getElementById('regState')?.value;
  const lga = document.getElementById('regLGA')?.value.trim();
  const license = document.getElementById('regLicense')?.value.trim();
  const phone = document.getElementById('regPhone')?.value.trim();
  const exp = document.getElementById('regExp')?.value;
  const specs = [...document.querySelectorAll('#specCheckboxes input:checked')].map(c=>c.value);
  if (!name||!state||!license||!phone) { toast('Fill all required fields','warning'); return; }
  if (specs.length === 0) { toast('Select at least one specialization','warning'); return; }
  const newSurveyor = {
    id: 's' + Date.now(), name, state, lga, license, phone,
    specs, experience: exp + ' yrs',
    rating: 0, reviews: 0, jobs: 0, plan: 'basic', available: true
  };
  const surveyors = JSON.parse(localStorage.getItem('spe_directory') || JSON.stringify(SAMPLE_SURVEYORS));
  surveyors.unshift(newSurveyor);
  localStorage.setItem('spe_directory', JSON.stringify(surveyors));
  const msg = `ğŸ“‹ *NEW SURVEYOR REGISTRATION â€” SurveyPro Elite*\n\nName: ${name}\nState: ${state} Â· ${lga}\nLicense: ${license}\nPhone: ${phone}\nExperience: ${exp} yrs\nSpecs: ${specs.join(', ')}\n\nPlease verify and activate this account.`;
  closeModal();
  toast('Registration submitted! You are now listed.', 'success');
  renderDirectory(surveyors);
  setTimeout(() => window.open(`${CFG.whatsapp}?text=${encodeURIComponent(msg)}`, '_blank'), 800);
}

function hireSurveyor(name, phone) {
  // Contact the SURVEYOR directly using their own phone â€” not Arnold's WhatsApp
  const cleanPhone = (phone||'').replace(/^0/,'').replace(/[^0-9]/g,'');
  openModal(`<div>
    <h3 style="font-weight:800;margin-bottom:12px;">ğŸ’¼ Hire ${name}</h3>
    <div style="background:#f0fdf4;border:2px solid #86efac;border-radius:10px;padding:12px;margin-bottom:14px;font-size:0.82rem;color:#166534;">
      âœ… You will contact <strong>${name}</strong> directly on their phone. SurveyPro Elite earns a 10% platform referral fee on completion.
    </div>
    <div class="form-group"><label>Your Name</label><input id="hName" placeholder="Your full name"></div>
    <div class="form-group"><label>Your Phone</label><input id="hPhone" placeholder="080XXXXXXXX" type="tel"></div>
    <div class="form-group"><label>Service Needed</label>
      <select id="hService">${JOB_CATEGORIES.map(c=>`<option>${c}</option>`).join('')}</select>
    </div>
    <div class="form-group"><label>Location/State</label><input id="hLocation" placeholder="e.g. Lagos Island, Lagos"></div>
    <div class="form-group"><label>Budget (â‚¦)</label><input id="hBudget" type="number" placeholder="50000"></div>
    <div class="btn-grid">
      <button class="btn btn-green" onclick="confirmHire('${name}','${cleanPhone}')">ğŸ“± Contact ${name} on WhatsApp</button>
      <button class="btn btn-gray" onclick="closeModal()">Cancel</button>
    </div>
  </div>`);
}

function confirmHire(surveyorName, surveyorPhone) {
  const n = document.getElementById('hName')?.value.trim();
  const p = document.getElementById('hPhone')?.value.trim();
  const s = document.getElementById('hService')?.value;
  const l = document.getElementById('hLocation')?.value.trim();
  const b = document.getElementById('hBudget')?.value;
  if (!n || !p || !l) { toast('Fill all fields', 'warning'); return; }
  const msg = `ğŸ‘‹ Hello ${surveyorName}! I found your profile on SurveyPro Elite.\n\nService needed: ${s}\nLocation: ${l}\nBudget: â‚¦${parseInt(b||0).toLocaleString()}\nMy name: ${n}\nMy phone: ${p}\n\nPlease get back to me!`;
  closeModal();
  toast('Connecting you to ' + surveyorName + '...', 'success');
  // Contact THIS surveyor directly on their OWN phone â€” not Arnold's number
  if(surveyorPhone && surveyorPhone.length >= 10) {
    window.open(`https://wa.me/234${surveyorPhone}?text=${encodeURIComponent(msg)}`, '_blank');
  } else {
    // Fallback: open surveyor's phone call
    toast('Opening phone call to ' + surveyorName,'info');
    window.open(`tel:0${surveyorPhone}`,'_self');
  }
}

// â”€â”€ ONLINE/OFFLINE DETECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
window.addEventListener('online',  () => { if(document.getElementById('offlineBar')) document.getElementById('offlineBar').style.display='none'; toast('Back online!','success'); });
window.addEventListener('offline', () => { if(document.getElementById('offlineBar')) document.getElementById('offlineBar').style.display='block'; toast('Offline â€” tools still work!','warning'); });

// â”€â”€ KEYBOARD SHORTCUTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.addEventListener('keydown', e => {
  if ((e.ctrlKey||e.metaKey) && !e.shiftKey) {
    switch(e.key) {
      case '1': e.preventDefault(); showTab('home'); break;
      case '2': e.preventDefault(); showTab('survey'); break;
      case '3': e.preventDefault(); showTab('coords'); break;
      case '4': e.preventDefault(); showTab('history'); break;
      case '5': e.preventDefault(); showTab('jobs'); break;
      case 's': e.preventDefault(); completeSurvey(); break;
    }
  }
  if (e.key === 'Escape') { closeModal(); closeAuthModal(); closePaymentModal(); }
});

// â”€â”€ USAGE ANALYTICS (local only) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function() {
  try {
    const s = JSON.parse(localStorage.getItem('spe_analytics') || '{"visits":0,"tabViews":{}}');
    s.visits++;
    s.lastVisit = new Date().toISOString();
    localStorage.setItem('spe_analytics', JSON.stringify(s));
  } catch(e) {}
})();

// â”€â”€ PRINT STYLES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const _ps = document.createElement('style');
_ps.textContent = '@media print { header,.nav-wrap,footer,.btn,#installBar,#offlineBar,#topBanner,#authModal,#paymentModal { display:none!important; } .tab-content { display:block!important; } }';
document.head.appendChild(_ps);

// Service worker removed - GitHub Pages CDN handles caching

// â”€â”€ INLINE PWA MANIFEST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function() {
  try {
    const manifest = {
      name: 'SurveyPro Elite', short_name: 'SurveyPro',
      description: "Nigeria's #1 Professional Land Surveying Platform",
      start_url: '.', display: 'standalone',
      background_color: '#0f172a', theme_color: '#0f172a',
      orientation: 'any',
      icons: [
        { src: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%230f172a'/><text y='.9em' font-size='80'>ğŸ¯</text></svg>", sizes: '192x192', type: 'image/svg+xml' },
        { src: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%230f172a'/><text y='.9em' font-size='80'>ğŸ¯</text></svg>", sizes: '512x512', type: 'image/svg+xml' }
      ],
      shortcuts: [
        { name: 'Survey', url: './?tab=survey', icons: [{ src: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='80'>ğŸ“¡</text></svg>", sizes: '96x96' }] },
        { name: 'Coordinates', url: './?tab=coords', icons: [{ src: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='80'>ğŸŒ</text></svg>", sizes: '96x96' }] }
      ]
    };
    const url = URL.createObjectURL(new Blob([JSON.stringify(manifest)], { type: 'application/json' }));
    const link = document.createElement('link');
    link.rel= 'manifest';
    link.href = url;
    document.head.appendChild(link);
  } catch(e) {}
})();

// â”€â”€ URL HASH ROUTING ON LOAD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
window.addEventListener('DOMContentLoaded', () => {
  const urlP = new URLSearchParams(window.location.search);
  const tab = urlP.get('tab');
  if (tab) showTab(tab);

  // â”€â”€ BACK TO TOP BUTTON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const btn = document.createElement('button');
  btn.id = 'backToTop';
  btn.title = 'Back to top';
  btn.innerHTML = 'â†‘';
  btn.onclick = () => window.scrollTo({top:0,behavior:'smooth'});
  document.body.appendChild(btn);
  window.addEventListener('scroll', () => {
    if(window.scrollY > 400) btn.classList.add('show');
    else btn.classList.remove('show');
  }, {passive:true});

  // â”€â”€ AUTO-SHOW WELCOME BANNER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  setTimeout(() => showBanner('ğŸ¯ Welcome to SurveyPro Elite â€” Nigeria\'s #1 Professional Surveying Platform!'), 800);
  // â”€â”€ INIT PROJECTION DISPLAY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  try { updateConvProjectionInfo(); } catch(e) {}
});

// â”€â”€ ADVANCED TOOLS TAB FUNCTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showToolPane(pane) {
  document.querySelectorAll('.coord-pane[id^="tp-"]').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.sub-tab[id^="tt-"]').forEach(el => el.classList.remove('active'));
  const tp = document.getElementById('tp-' + pane);
  if (tp) tp.classList.add('active');
  const tt = document.getElementById('tt-' + pane);
  if (tt) tt.classList.add('active');
}

function calcSlope() {
  const e1=parseFloat(document.getElementById('slope-e1')?.value),e2=parseFloat(document.getElementById('slope-e2')?.value),d=parseFloat(document.getElementById('slope-dist')?.value);
  if([e1,e2,d].some(isNaN)||d<=0){toast('Enter all slope values','warning');return;}
  const dElev=e2-e1,slopePct=(dElev/d)*100,slopeDeg=Math.atan(dElev/d)*180/Math.PI;
  showResult('slope-result',[['Height Difference',`${dElev>=0?'+':''}${dElev.toFixed(3)} m`],['Slope (%)',`${slopePct.toFixed(3)} %`],['Slope Angle',`${slopeDeg.toFixed(4)}Â°`],['Slope Ratio',Math.abs(dElev)>0?`1:${Math.abs(d/dElev).toFixed(1)}`:'0 (flat)'],['Slope Distance',`${Math.sqrt(d*d+dElev*dElev).toFixed(3)} m`]]);
  toast('Slope calculated!','success');
}

function generateStakeout() {
  const stN=parseFloat(document.getElementById('so-sn')?.value),stE=parseFloat(document.getElementById('so-se')?.value),tN=parseFloat(document.getElementById('so-tn')?.value),tE=parseFloat(document.getElementById('so-te')?.value);
  if([stN,stE,tN,tE].some(isNaN)){toast('Enter station and target coordinates','warning');return;}
  const dN=tN-stN,dE=tE-stE,dist=Math.sqrt(dN*dN+dE*dE),bear=((Math.atan2(dE,dN)*180/Math.PI)+360)%360;
  showResult('so-result',[['Target Northing',tN.toFixed(3)+' m'],['Target Easting',tE.toFixed(3)+' m'],['Distance to Target',dist.toFixed(3)+' m'],['Bearing to Target',bear.toFixed(4)+'Â°'],['Î”N',`${dN>=0?'+':''}${dN.toFixed(3)} m`],['Î”E',`${dE>=0?'+':''}${dE.toFixed(3)} m`]]);
  toast('Stakeout data ready!','success');
}

function calcHorizCurve() {
  const R=parseFloat(document.getElementById('hc-r')?.value),delta=parseFloat(document.getElementById('hc-delta')?.value),pcCh=parseFloat(document.getElementById('hc-pc')?.value)||0;
  if(isNaN(R)||isNaN(delta)){toast('Enter radius and deflection angle','warning');return;}
  const d2=delta*Math.PI/180,T=R*Math.tan(d2/2),L=R*d2,E=R*(1/Math.cos(d2/2)-1),M=R*(1-Math.cos(d2/2)),LC=2*R*Math.sin(d2/2);
  showResult('hc-result',[['Tangent Length (T)',T.toFixed(3)+' m'],['Arc Length (L)',L.toFixed(3)+' m'],['Chord Length (LC)',LC.toFixed(3)+' m'],['External Distance (E)',E.toFixed(3)+' m'],['Middle Ordinate (M)',M.toFixed(3)+' m'],['Chainage of PT',(pcCh+L).toFixed(3)+' m'],['Degree of Curve',`${(5729.58/R).toFixed(4)}Â°/chain`]]);
  toast('Curve elements calculated!','success');
}

function calcVolume() {
  const a1=parseFloat(document.getElementById('vol-a1')?.value),am=parseFloat(document.getElementById('vol-am')?.value),a2=parseFloat(document.getElementById('vol-a2')?.value),l=parseFloat(document.getElementById('vol-l')?.value);
  if([a1,am,a2,l].some(isNaN)){toast('Enter all volume fields','warning');return;}
  const vp=(l/6)*(a1+4*am+a2),va=(l/2)*(a1+a2);
  showResult('vol-result',[['Volume (Prismoidal)',vp.toFixed(3)+' mÂ³'],['Volume (Avg End Area)',va.toFixed(3)+' mÂ³'],['Prismoidal Correction',(va-vp).toFixed(3)+' mÂ³'],['Section 1 Area',a1.toFixed(3)+' mÂ²'],['Midpoint Area',am.toFixed(3)+' mÂ²'],['Section 2 Area',a2.toFixed(3)+' mÂ²'],['Length',l.toFixed(3)+' m']]);
  toast('Volume calculated!','success');
}

function calcTrigLevel() {
  const hi=parseFloat(document.getElementById('tl-hi')?.value),th=parseFloat(document.getElementById('tl-th')?.value),sd=parseFloat(document.getElementById('tl-sd')?.value),va=parseFloat(document.getElementById('tl-va')?.value),stElev=parseFloat(document.getElementById('tl-elev')?.value)||0;
  if([hi,th,sd,va].some(isNaN)){toast('Enter all trig level values','warning');return;}
  const vaR=va*Math.PI/180,hd=sd*Math.cos(vaR),vd=sd*Math.sin(vaR),targetElev=stElev+hi+vd-th;
  showResult('tl-result',[['Horizontal Distance',hd.toFixed(3)+' m'],['Vertical Difference (V)',vd.toFixed(3)+' m'],['Target Elevation',targetElev.toFixed(3)+' m'],['Elevation Difference',(targetElev-stElev).toFixed(3)+' m']]);
  toast('Elevation calculated!','success');
}



// â”€â”€ MAP SCALE CALCULATOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function calcMapScale() {
  const scale = parseFloat(document.getElementById('ms-scale')?.value);
  const mapDist = parseFloat(document.getElementById('ms-map')?.value);
  if (isNaN(scale) || isNaN(mapDist) || scale <= 0 || mapDist <= 0) {
    toast('Enter valid scale denominator and map distance', 'warning');
    return;
  }
  const groundM = (mapDist / 1000) * scale;          // metres
  const groundKm = groundM / 1000;
  const groundFt = groundM * 3.28084;
  const groundMiles = groundM / 1609.344;
  const mapCm = mapDist / 10;
  const mapIn = mapDist / 25.4;
  showResult('ms-result', [
    ['Scale',`1 : ${scale.toLocaleString()}`],
    ['Map Distance',`${mapDist.toFixed(2)} mm  (${mapCm.toFixed(2)} cm  /  ${mapIn.toFixed(3)} in)`],
    ['Ground Distance (m)',`${groundM.toFixed(3)} m`],
    ['Ground Distance (km)',`${groundKm.toFixed(4)} km`],
    ['Ground Distance (ft)',`${groundFt.toFixed(2)} ft`],
    ['Ground Distance (miles)',`${groundMiles.toFixed(4)} miles`],
    ['Inverse â€” 1 metre on ground',`${(1000/scale).toFixed(4)} mm on map`]
  ]);
  toast('Map scale converted!', 'success');
}

// â”€â”€ DETECT LOCATION FOR EQUIPMENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function detectLocationForEquipment() {
  if (!navigator.geolocation) { toast('GPS not supported by this browser', 'error'); return; }
  const banner = document.getElementById('equipLocationBanner');
  const txt    = document.getElementById('equipLocationText');
  if (banner) banner.style.display = 'flex';
  if (txt)    txt.textContent = 'ğŸ“¡ Detecting your location...';
  toast('Detecting your location...', 'info');
  navigator.geolocation.getCurrentPosition(
    pos => {
      const state = getStateFromCoords(pos.coords.latitude, pos.coords.longitude);
      if (state) {
        const sel = document.getElementById('equipStateFilter');
        if (sel) sel.value = state;
        const cityInfo = NIG_STATE_COORDS[state] ? ' â€” ' + NIG_STATE_COORDS[state].city : '';
        if (txt) txt.textContent = 'ğŸ“ Showing equipment near ' + state + cityInfo;
        filterEquipment();
        toast('âœ… Equipment filtered for ' + state, 'success');
      } else {
        if (txt) txt.textContent = 'âš ï¸ Location detected but state unclear. Select manually.';
        toast('Select your state manually', 'warning');
      }
    },
    () => {
      if (txt) txt.textContent = 'âš ï¸ Location denied. Please select state manually.';
      toast('Location denied â€” select your state manually', 'warning');
    },
    { timeout: 10000, enableHighAccuracy: false }
  );
}

// â”€â”€ FILTER EQUIPMENT BY STATE & TYPE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function filterEquipment() {
  const stateVal = document.getElementById('equipStateFilter')?.value;
  const typeVal  = document.getElementById('equipTypeFilter')?.value;
  const typeKeywords = {
    'GPS / GNSS':    ['GNSS','GPS','Receiver','Garmin'],
    'Total Station': ['Total Station','Station'],
    'Drone / UAV':   ['Drone','Survey Drone','UAV'],
    'Digital Level': ['Digital Level','Level'],
    'Laser Scanner': ['Laser','Scanner'],
    'Theodolite':    ['Theodolite']
  };
  let filtered = EQUIPMENT;
  if (typeVal && typeKeywords[typeVal]) {
    filtered = filtered.filter(eq =>
      typeKeywords[typeVal].some(kw => eq.name.toLowerCase().includes(kw.toLowerCase()) || eq.model.toLowerCase().includes(kw.toLowerCase()))
    );
  }
  const grid = document.getElementById('equipGrid');
  if (!grid) return;
  const stateNote = stateVal
    ? `<div style="background:linear-gradient(135deg,#f0fdf4,#dcfce7);border:2px solid #86efac;border-radius:12px;padding:12px 16px;margin-bottom:16px;font-size:0.83rem;color:#166534;display:flex;align-items:center;gap:10px;">
         <span style="font-size:1.3rem;">ğŸ“</span>
         <div><strong>Delivering to ${stateVal}</strong> â€” All equipment available nationwide. Contact via WhatsApp to arrange logistics to your state. Delivery fee applies for states beyond Lagos/FCT.</div>
       </div>` : '';
  if (!filtered.length) {
    grid.innerHTML = stateNote + '<div style="text-align:center;padding:40px;color:var(--text3);">No equipment matches this filter. <a href="#" onclick="document.getElementById(\'equipTypeFilter\').value=\'\';filterEquipment();return false;" style="color:var(--accent);">Clear filter</a></div>';
    return;
  }
  grid.innerHTML = stateNote + filtered.map(eq => {
    const you = Math.round(eq.price * 0.5);
    return `<div class="equip-card">
      <div class="equip-top"><span class="equip-icon">${eq.icon}</span>
        <div><h4 style="font-weight:800;font-size:1rem;color:var(--accent2);">${eq.name}</h4><p style="font-size:0.75rem;color:var(--text3);">${eq.model}</p></div>
      </div>
      <p style="font-size:0.82rem;color:var(--text2);margin-bottom:10px;">${eq.desc}</p>
      <div class="equip-price">â‚¦${eq.price.toLocaleString()} <span style="font-size:0.75rem;color:var(--text2);font-weight:400;">/day</span></div>
      <div class="equip-earn">âœ… You earn: â‚¦${you.toLocaleString()} (50% of booking)</div>
      <ul class="equip-features">${eq.features.map(f=>`<li>âœ… ${f}</li>`).join('')}</ul>
      <button class="btn btn-green btn-full" onclick="bookEquipment('${eq.name}',${eq.price})">ğŸ“… Book via WhatsApp</button>
    </div>`;
  }).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MONETIZATION FUNCTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Revenue Estimator
function calcEstRevenue() {
  const views = parseFloat(document.getElementById('estViews')?.value) || 0;
  const network = document.getElementById('estNetwork')?.value;
  const referrals = parseFloat(document.getElementById('estReferrals')?.value) || 0;
  const training = parseFloat(document.getElementById('estTraining')?.value) || 0;

  let adRevUSD = 0;
  let networkName = '';
  if (network === 'adsense') {
    adRevUSD = views * 0.02 * 0.05; // 2% CTR, $0.05 CPC
    networkName = 'Google AdSense';
  } else if (network === 'adsterra') {
    adRevUSD = (views / 1000) * 0.80;
    networkName = 'Adsterra';
  } else if (network === 'monetag') {
    adRevUSD = (views / 1000) * 1.20;
    networkName = 'Monetag';
  } else if (network === 'direct') {
    adRevUSD = 25; // Fixed â‰ˆ â‚¦40k/mo flat
    networkName = 'Direct Ads (Fixed)';
  }

  const adRevNGN = Math.round(adRevUSD * 1650);
  const equipCommission = referrals * 6000 * 0.5; // Avg â‚¦6k/day, 50%
  const trainingCommission = training * 15000 * 0.5; // Avg â‚¦15k course, 50%
  const totalNGN = adRevNGN + equipCommission + trainingCommission;

  const box = document.getElementById('revenueResult');
  if (!box) return;
  box.className = 'result-box show';
  box.innerHTML = `
    <div style="font-weight:800;font-size:1rem;margin-bottom:12px;color:var(--text);">ğŸ’° Estimated Monthly Revenue</div>
    <div class="result-row"><span class="rk">ğŸ“¢ ${networkName} Ad Revenue</span><span style="font-weight:700;color:var(--accent);">â‚¦${adRevNGN.toLocaleString()}</span></div>
    <div class="result-row"><span class="rk">âš™ï¸ Equipment Referral Commission</span><span style="font-weight:700;color:var(--accent);">â‚¦${equipCommission.toLocaleString()}</span></div>
    <div class="result-row"><span class="rk">ğŸ“ Training Course Commission</span><span style="font-weight:700;color:var(--accent);">â‚¦${trainingCommission.toLocaleString()}</span></div>
    <div class="result-row" style="background:linear-gradient(135deg,#f0fdf4,#dcfce7);border-radius:8px;padding:12px;margin-top:8px;"><span class="rk" style="font-weight:800;color:var(--text);">ğŸ† TOTAL ESTIMATE</span><span style="font-weight:900;font-size:1.2rem;color:#16a34a;">â‚¦${totalNGN.toLocaleString()}/mo</span></div>
    <div style="font-size:0.72rem;color:var(--text3);margin-top:10px;">âš ï¸ Estimates based on industry averages. Actual earnings depend on traffic quality, audience engagement, and conversion rates. USD/NGN rate: â‚¦1,650.</div>
  `;
  toast('Revenue estimate calculated!', 'success');
}

// Content Locker Demo
function showContentLockerDemo() {
  openModal(`
    <div style="padding:10px;">
      <h3 style="font-weight:800;margin-bottom:10px;text-align:center;">ğŸ” Content Locker Demo</h3>
      <p style="font-size:0.84rem;color:var(--text2);margin-bottom:16px;text-align:center;">This is how a content locker works â€” users complete a small action to unlock premium content.</p>
      <div style="background:#f0f4ff;border:2px dashed #93c5fd;border-radius:12px;padding:20px;text-align:center;position:relative;">
        <div style="filter:blur(5px);margin-bottom:16px;font-size:0.82rem;color:var(--text2);">
          ğŸ“„ PREMIUM CONTENT: Complete Survey Report Template (SURCON-Compliant)<br>
          âœ… 12-page professional template Â· Coordinate tables Â· Boundary description<br>
          ğŸ“ Pre-filled WGS84 & UTM fields Â· Legal language Â· Ready to print
        </div>
        <div style="background:#fff;border:2px solid #3b82f6;border-radius:10px;padding:16px;">
          <div style="font-size:1.5rem;margin-bottom:8px;">ğŸ”’</div>
          <div style="font-weight:800;margin-bottom:6px;">Unlock This Free Template</div>
          <p style="font-size:0.78rem;color:var(--text2);margin-bottom:12px;">Complete one quick step to download your free survey report template. Powered by CPALead.</p>
          <button class="btn btn-green btn-full" onclick="closeModal();toast('âœ… Content unlocked! (Demo) â€” In production, a CPALead survey would appear here.','success')">
            âœ… Complete to Unlock (Demo)
          </button>
        </div>
      </div>
      <div style="font-size:0.75rem;color:var(--text3);margin-top:12px;text-align:center;">In production: replace this with your CPALead or MyLead content locker script</div>
    </div>
  `);
}

// Ad Modal Functions
let adCountdownInterval = null;
function showAdModal(content, delaySec = 5) {
  const bg = document.getElementById('adModalBg');
  const contentEl = document.getElementById('adModalContent');
  const closeBtn = document.getElementById('adModalCloseBtn');
  const countdown = document.getElementById('adCountdownText');
  if (!bg || !contentEl) return;
  contentEl.innerHTML = content;
  bg.classList.add('show');
  closeBtn.style.display = 'none';
  let remaining = delaySec;
  countdown.textContent = `You can close this in ${remaining}s`;
  if (adCountdownInterval) clearInterval(adCountdownInterval);
  adCountdownInterval = setInterval(() => {
    remaining--;
    if (remaining <= 0) {
      clearInterval(adCountdownInterval);
      closeBtn.style.display = 'block';
      countdown.textContent = '';
    } else {
      countdown.textContent = `You can close this in ${remaining}s`;
    }
  }, 1000);
}

function closeAdModal() {
  const bg = document.getElementById('adModalBg');
  if (bg) bg.classList.remove('show');
  if (adCountdownInterval) clearInterval(adCountdownInterval);
}

// Cookie consent banner
function showCookieConsent() {
  if (localStorage.getItem('cookieConsent')) return;
  const banner = document.createElement('div');
  banner.id = 'cookieBanner';
  banner.style.cssText = 'position:fixed;bottom:0;left:0;right:0;background:#0f172a;color:#fff;padding:14px 20px;z-index:9998;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;font-size:0.82rem;';
  banner.innerHTML = `
    <div style="display:flex;align-items:center;gap:10px;flex:1;">
      <span style="font-size:1.2rem;">ğŸª</span>
      <span>SurveyPro Elite uses cookies to save your preferences and display relevant ads. By continuing, you accept our <a href="#" onclick="showTab('privacy');document.getElementById('cookieBanner')?.remove();return false;" style="color:#4ade80;text-decoration:underline;">Privacy Policy</a>.</span>
    </div>
    <div style="display:flex;gap:8px;flex-shrink:0;">
      <button onclick="localStorage.setItem('cookieConsent','yes');document.getElementById('cookieBanner').remove();" style="background:#16a34a;color:#fff;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:700;font-family:inherit;">âœ… Accept</button>
      <button onclick="document.getElementById('cookieBanner').remove();" style="background:rgba(255,255,255,0.15);color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;font-family:inherit;">Decline</button>
    </div>
  `;
  document.body.appendChild(banner);
}

// Init on page load
window.addEventListener('DOMContentLoaded', () => {
  setTimeout(showCookieConsent, 2000);
  // Show a content locker demo ad after 30 seconds for new users
  if (!localStorage.getItem('adShown')) {
    setTimeout(() => {
      localStorage.setItem('adShown', 'yes');
      showAdModal(`
        <div style="font-size:2rem;margin-bottom:10px;">ğŸ</div>
        <h3 style="font-weight:800;margin-bottom:8px;">Unlock Free Survey Templates</h3>
        <p style="font-size:0.84rem;color:var(--text2);margin-bottom:16px;">Get 5 professional survey report templates, SURCON-compliant forms, and coordinate conversion checklists â€” absolutely free.</p>
        <button class="btn btn-green btn-full" onclick="closeAdModal();toast('ğŸ‰ Templates unlocked! (Demo mode â€” integrate CPALead here)','success');" style="margin-bottom:8px;">ğŸ”“ Unlock Free Templates</button>
        <button class="btn btn-gray btn-full" onclick="closeAdModal();">No thanks</button>
      `, 5);
    }, 30000);
  }
});

</script>
</body>
</html>
